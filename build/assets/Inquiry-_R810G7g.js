import{r as o,_ as T,j as e}from"./index-MFgKNwIH.js";import{W as _,c as s}from"./Wrapper-DFsBGa0y.js";import{D as k}from"./DeleteModal-BSO39mJX.js";import{L as F}from"./Loader-CO7lNbH5.js";import{u as j,h as O,a as W}from"./index.esm-cL7qp0JE.js";import{u as q}from"./useDeleteApiReq-CP7Pmsb6.js";import{P as w}from"./react-bootstrap-pagination-control.esm-DkA0QwAF.js";import"./logo -C1Nz5jdc.js";import"./useDispatch-CwGLudnh.js";import"./iconBase-CdfoCUfg.js";const Z=()=>{const{res:c,fetchData:g,isLoading:z}=q(),{res:a,fetchData:N,isLoading:x}=j(),{res:l,fetchData:v,isLoading:u}=j(),[r,d]=o.useState(!1),[i,f]=o.useState([]),[y,D]=o.useState(""),[E,S]=o.useState(1),[p,P]=o.useState(1),C=async t=>{P(t)},L=(t,n)=>{t.stopPropagation(),D(n),d(!r)},$=async()=>{g(`/admin/delete-enquiry/${y}`)};o.useEffect(()=>{((c==null?void 0:c.status)===200||(c==null?void 0:c.status)===201)&&(T.success("Enquiry deleted successfully"),h(),d(!r))},[c]);const h=async()=>{N(`/admin/get-all-enquiry?page=${p}`)};o.useEffect(()=>{h()},[p]),o.useEffect(()=>{((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&(console.log("getInquiriesRes",a),f(a==null?void 0:a.data.data),S(parseInt(a==null?void 0:a.data.totalPage)))},[a]);const b=async t=>{const n=t.target.value;if(console.log("value",n),!n){h();return}v(`/admin/search-enquiries?query=${n}`)};o.useEffect(()=>{((l==null?void 0:l.status)===200||(l==null?void 0:l.status)===201)&&f(l==null?void 0:l.data.data)},[l]);function A(t,n){let m=null;return function(M){m&&clearTimeout(m),m=setTimeout(()=>{t(M)},n)}}return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsxs("div",{className:s["report-container"],children:[e.jsxs("div",{className:s["report-header"],children:[e.jsx("h1",{className:s["recent-Articles"],children:"Enquiries"}),e.jsx("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:e.jsxs("div",{className:"d-flex",style:{position:"relative"},children:[e.jsx(O,{onClick:()=>{},style:{position:"absolute",left:"8px",top:"10px",cursor:"pointer"}}),e.jsx("input",{onChange:A(b,1e3),style:{width:"400px",padding:"5px 10px",paddingLeft:"30px",borderRadius:"5px"},type:"search",placeholder:"search enquiry by name, phone and city"})]})})]}),e.jsxs("div",{className:s["report-body"],children:[e.jsxs("div",{className:s.enquiries,children:[e.jsx("h3",{className:s["t-op"],children:"Name"}),e.jsx("h3",{className:s["t-op"],children:"Phone"}),e.jsx("h3",{className:s["t-op"],children:"City"}),e.jsx("h3",{className:s["t-op"],children:"State"}),e.jsx("h3",{className:s["t-op"],children:"Service Type"}),e.jsx("h3",{className:s["t-op"],children:"Delete"})]}),e.jsxs("div",{className:s.items,children:[!x&&!u&&i.length===0&&e.jsx("p",{children:"No inquiries found"}),(x||u)&&e.jsx(F,{}),i==null?void 0:i.map(t=>e.jsxs("div",{className:s.enquiries,children:[e.jsx("h3",{className:s["t-op-nextlvl"],children:t.name}),e.jsx("h3",{className:s["t-op-nextlvl"],children:t.phone}),e.jsx("h3",{className:`${s["t-op-nextlvl"]}`,children:t.city}),e.jsx("h3",{className:`${s["t-op-nextlvl"]}`,children:t.state}),e.jsx("h3",{className:`${s["t-op-nextlvl"]}`,children:t.serviceType}),e.jsx("h3",{className:`${s["t-op-nextlvl"]}`,children:e.jsx(W,{onClick:n=>L(n,t._id),cursor:"pointer",size:22,color:"red"})})]},t._id))]}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(w,{changePage:C,limit:10,page:p,total:E+"0"})})]})]})}),r&&e.jsx(k,{setState:d,handleDelete:$})]})};export{Z as default};
