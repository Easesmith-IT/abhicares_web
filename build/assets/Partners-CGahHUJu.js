import{r as d,u as U,j as e,e as N,_ as $}from"./index-DpM_z6IC.js";import{c,W as ee}from"./Wrapper-D8NCHknB.js";import{A as te}from"./add-icon-nobg-CDiYK8IX.js";import{R as Q}from"./index.esm-BqNeVfbB.js";import{u as z}from"./useAuthorization-C9ZZ-i5a.js";import{F as ae,a as se}from"./index.esm-CI6h5U8o.js";import{a as ne}from"./LogoutModal-rCWBQ8ER.js";import{D as oe}from"./DeleteModal-DxluFYvk.js";import"./index-COzlj74Y.js";import{L as X}from"./Loader-BcbBY3v3.js";import"./logo -C1Nz5jdc.js";import"./iconBase-BW6_ZAh3.js";const ce="_wrapper_y3c11_1",ie="_modal_y3c11_27",de="_heading_container_y3c11_47",re="_form_y3c11_59",le="_input_container_y3c11_73",pe="_input_y3c11_73",he="_d_flex_y3c11_99",me="_multi_select_y3c11_111",ue="_button_wrapper_y3c11_143",xe="_button_y3c11_143",ge="_service_container_y3c11_175",je="_service_y3c11_175",a={wrapper:ce,modal:ie,heading_container:de,form:re,input_container:le,input:pe,d_flex:he,multi_select:me,button_wrapper:ue,button:xe,service_container:ge,service:je},K=({setIsModalOpen:_,seller:t="",getAllSellers:v})=>{var E,F,o,u,j,L,V,T,W,H,J,B,G;const{checkAuthorization:C}=z();console.log("seller",t);const[s,g]=d.useState({name:(t==null?void 0:t.name)||"",legalName:(t==null?void 0:t.legalName)||"",gstNumber:(t==null?void 0:t.gstNumber)||"",phone:(t==null?void 0:t.phone)||"",password:(t==null?void 0:t.password)||"",categoryId:((E=t==null?void 0:t.categoryId)==null?void 0:E._id)||"",services:((F=t==null?void 0:t.services)==null?void 0:F.map(n=>{var r,i;return{serviceId:(r=n==null?void 0:n.serviceId)==null?void 0:r._id,name:(i=n==null?void 0:n.serviceId)==null?void 0:i.name}}))||[],status:t==null?void 0:t.status}),[h,w]=d.useState({state:((o=t==null?void 0:t.address)==null?void 0:o.state)||"",city:((u=t==null?void 0:t.address)==null?void 0:u.city)||"",addressLine:((j=t==null?void 0:t.address)==null?void 0:j.addressLine)||"",pincode:((L=t==null?void 0:t.address)==null?void 0:L.pincode)||""}),[m,l]=d.useState({latitude:((T=(V=t==null?void 0:t.address)==null?void 0:V.location)==null?void 0:T.coordinates[0])||"",longitude:((H=(W=t==null?void 0:t.address)==null?void 0:W.location)==null?void 0:H.coordinates[1])||""}),[p,S]=d.useState({name:((J=t==null?void 0:t.contactPerson)==null?void 0:J.name)||"",phone:((B=t==null?void 0:t.contactPerson)==null?void 0:B.phone)||"",email:((G=t==null?void 0:t.contactPerson)==null?void 0:G.email)||""}),[I,A]=d.useState([]),[f,D]=d.useState([]);d.useState(!1);const O=(n,r)=>{const{value:i,checked:Y}=n.target;if(console.log("value: "+i),Y)g({...s,services:[...s.services,{serviceId:i,name:r}]});else{const q=s.services.filter(Z=>Z.serviceId!==i);console.log("filtered",q),g({...s,services:q})}},P=n=>{const{name:r,value:i}=n.target;S({...p,[r]:i})},y=n=>{const{name:r,value:i}=n.target;l({...m,[r]:i})},x=n=>{const{name:r,value:i}=n.target;g({...s,[r]:i}),w({...h,[r]:i})};U();const R=async()=>{try{const{data:n}=await N.get("https://abhicares.com/api/admin/get-all-category",{withCredentials:!0});console.log("categories",n.data),A(n.data)}catch(n){console.log(n)}};d.useEffect(()=>{R()},[]);const k=async()=>{try{console.log(s);const{data:n}=await N.get(`https://abhicares.com/api/admin/get-category-service/${s.categoryId}`,{withCredentials:!0});console.log("allCategoryServices",n.data),D(n.data)}catch(n){console.log(n)}};d.useEffect(()=>{k()},[s.categoryId]),console.log("seller state",s),console.log("contactPerson state",p);const M=async n=>{if(n.preventDefault(),!s.name||!s.legalName||!s.gstNumber||!s.phone||!s.password||!s.categoryId||s.services.length===0||!m.latitude||!m.longitude||!h.addressLine||!h.city||!h.pincode||!h.state||!p.name||!p.email||!p.phone){$.error("Please fill all the fields"),console.log("seller",s);return}const r={name:s.name,legalName:s.legalName,gstNumber:s.gstNumber,phone:s.phone,password:s.password,status:s.status,categoryId:s.categoryId,services:s.services,address:{state:h.state,city:h.city,pincode:h.pincode,addressLine:h.addressLine,location:{type:"Point",coordinates:[m.latitude,m.longitude]}},contactPerson:p};if(t)try{const{data:i}=await N.patch(`https://abhicares.com/api/admin/update-seller/${t._id}`,r,{withCredentials:!0});$.success("Seller updated successfully"),v(),_(!1)}catch(i){console.log(i),_(!1),C(i)}else try{const{data:i}=await N.post("https://abhicares.com/api/admin/create-seller",r,{withCredentials:!0});$.success("Seller added successfully"),console.log("add seller",i),v(),_(!1)}catch(i){console.log(i),_(!1),C(i)}};return e.jsx("div",{className:a.wrapper,children:e.jsxs("div",{className:a.modal,children:[e.jsxs("div",{className:a.heading_container,children:[e.jsxs("h4",{children:[t?"Update":"Add"," Seller"]}),e.jsx("div",{className:a.d_flex,children:e.jsx(Q,{onClick:()=>_(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:M,className:a.form,children:[e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:a.input,onChange:x,value:s.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"legalName",children:"Legal Name"}),e.jsx("input",{className:a.input,onChange:x,value:s.legalName,type:"text",name:"legalName",id:"legalName"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"gstNumber",children:"GST Number"}),e.jsx("input",{className:a.input,onChange:x,value:s.gstNumber,type:"text",name:"gstNumber",id:"gstNumber"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{className:a.input,onChange:x,value:s.phone,type:"text",name:"phone",id:"phone"})]}),!t&&e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{className:a.input,onChange:x,value:s.password,type:"password",name:"password",id:"password"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"state",children:"State"}),e.jsx("input",{className:a.input,onChange:x,value:h.state,type:"text",name:"state",id:"state"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"city",children:"City"}),e.jsx("input",{className:a.input,onChange:x,value:h.city,type:"text",name:"city",id:"city"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"addressLine",children:"Address Line"}),e.jsx("input",{className:a.input,onChange:x,value:h.addressLine,type:"text",name:"addressLine",id:"addressLine"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"pincode",children:"Pincode"}),e.jsx("input",{className:a.input,onChange:x,value:h.pincode,type:"text",name:"pincode",id:"pincode"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"contactPersonName",children:"Contact Person Name"}),e.jsx("input",{className:a.input,onChange:P,value:p.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"contactPersonPhone",children:"Contact Person Phone"}),e.jsx("input",{className:a.input,onChange:P,value:p.phone,type:"text",name:"phone",id:"phone"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"contactPersonEmail",children:"Contact Person Email"}),e.jsx("input",{className:a.input,onChange:P,value:p.email,type:"email",name:"email",id:"email"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"status",children:"Status"}),e.jsxs("select",{onChange:x,value:s.status,className:a.input,name:"status",id:"status",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"IN-REVIEW",children:"In Review"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"}),e.jsx("option",{value:"HOLD",children:"Hold"})]})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"categoryId",children:"Category"}),e.jsxs("select",{onChange:x,value:s.categoryId,className:a.input,name:"categoryId",id:"categoryId",children:[e.jsx("option",{value:"choose a category",children:"choose a category"}),I==null?void 0:I.map(n=>e.jsx("option",{value:n._id,children:n.name},n._id))]})]}),s.categoryId&&e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"servicesId",children:"Services"}),e.jsx("div",{className:a.multi_select,children:f==null?void 0:f.map(n=>e.jsxs("div",{className:a.d_flex,children:[e.jsx("label",{htmlFor:n.name,children:n.name}),e.jsx("input",{style:{width:"20px",height:"20px"},checked:s.services.some(r=>{var i;return(i=r==null?void 0:r.serviceId)!=null&&i._id?r.serviceId._id===n._id:r.serviceId===n._id}),onChange:r=>O(r,n.name),type:"checkbox",value:n._id,name:n.name,id:n.name})]},n._id))})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"latitude",children:"Latitude"}),e.jsx("input",{className:a.input,onChange:y,value:m.latitude,type:"number",name:"latitude",id:"latitude"})]}),e.jsxs("div",{className:a.input_container,children:[e.jsx("label",{htmlFor:"longitude",children:"Longitude"}),e.jsx("input",{className:a.input,onChange:y,value:m.longitude,type:"number",name:"longitude",id:"longitude"})]}),e.jsx("div",{className:a.button_wrapper,children:e.jsx("button",{type:"submit",className:a.button,children:t?"Update":"Add"})})]})]})})},_e="_wrapper_1c96m_1",ve="_modal_1c96m_27",Ne="_heading_container_1c96m_51",ye="_contianer_1c96m_63",fe="_mt_1c96m_89",be="_button_1c96m_97",Ce="_item1_1c96m_125",b={wrapper:_e,modal:ve,heading_container:Ne,contianer:ye,mt:fe,button:be,"report-body":"_report-body_1c96m_113","report-topic-heading":"_report-topic-heading_1c96m_123",item1:Ce},we=({setIsUnapprovedSellerModalOpen:_,getSellers:t})=>{const[v,C]=d.useState([]);U();const{checkAuthorization:s}=z(),[g,h]=d.useState(!0),w=async()=>{try{const{data:l}=await N.get("https://abhicares.com/api/admin/in-review-seller",{withCredentials:!0});console.log("appppp",l),C(l.data)}catch(l){console.log(l)}finally{h(!1)}},m=async l=>{try{const{data:p}=await N.patch(`https://abhicares.com/api/admin/update-seller-status/${l}`,{status:"APPROVED"},{withCredentials:!0});console.log(p),$.success("Seller approved"),w(),t()}catch(p){console.log(p),_(!1),s(p)}};return d.useEffect(()=>{w()},[]),e.jsx("div",{className:b.wrapper,children:e.jsxs("div",{className:b.modal,children:[e.jsxs("div",{className:b.heading_container,children:[e.jsx("h4",{children:"Unapproved Seller"}),e.jsx("div",{className:b.d_flex,children:e.jsx(Q,{onClick:()=>_(!1),cursor:"pointer",size:26})})]}),e.jsxs("div",{className:b["report-body"],children:[e.jsxs("div",{className:b["report-topic-heading"],children:[e.jsx("h3",{className:c["t-op"],style:{width:"150px"},children:"Seller Name"}),e.jsx("h3",{className:c["t-op"],style:{width:"200px"},children:"Service"}),e.jsx("h3",{className:c["t-op"],style:{width:"150px"},children:"Category"}),e.jsx("h3",{className:c["t-op"],style:{width:"150px"},children:"Phone"}),e.jsx("h3",{className:c["t-op"],style:{width:"150px"},children:"Approve"})]}),e.jsxs("div",{className:c.items,children:[!g&&v.length===0&&e.jsx("p",{children:"No unapproved seller found."}),g&&v.length===0&&e.jsx(X,{}),v==null?void 0:v.map(l=>e.jsxs("div",{className:b.item1,children:[e.jsx("h3",{className:c["t-op-nextlvl"],style:{width:"150px"},children:l.name}),e.jsx("h3",{className:`${c["t-op-nextlvl"]}`,style:{width:"200px"},children:l.services.map(p=>p.name).join(", ")}),e.jsx("h3",{className:`${c["t-op-nextlvl"]}`,style:{width:"150px"},children:l.category}),e.jsx("h3",{className:`${c["t-op-nextlvl"]}`,style:{width:"150px"},children:l.phone}),e.jsx("h3",{className:`${c["t-op-nextlvl"]}`,style:{width:"150px"},children:l.status==="IN-REVIEW"?e.jsx("button",{onClick:()=>m(l._id),className:b.button,children:"Approve"}):e.jsx("p",{children:"Approved"})})]},l._id))]})]})]})})},Me=()=>{const[_,t]=d.useState(!1),[v,C]=d.useState(!1),[s,g]=d.useState(!1);d.useState(!1);const[h,w]=d.useState({}),[m,l]=d.useState([]),[p,S]=d.useState(!0),[I,A]=d.useState(!1),[f,D]=d.useState(""),O=U(),{checkAuthorization:P}=z(),y=async()=>{try{const{data:o}=await N.get("https://abhicares.com/api/admin/get-all-seller",{withCredentials:!0});l(o.data),console.log("seller",o)}catch(o){console.log(o)}finally{S(!1)}};d.useEffect(()=>{y()},[]);const x=async()=>{try{S(!0);const{data:o}=await N.get(`https://abhicares.com/api/admin/filter-seller?status=${f}`,{withCredentials:!0});console.log("seller filtered",o),l(o.data)}catch(o){console.log(o)}finally{S(!1)}};d.useEffect(()=>{f&&x()},[f]);const R=(o,u)=>{o.stopPropagation(),w(u),C(!s)},k=(o,u)=>{o.stopPropagation(),w(u),g(!s)},M=async()=>{try{const{data:o}=await N.delete(`https://abhicares.com/api/admin/delete-seller/${h}`,{withCredentials:!0});$.success("Seller deleted successfully"),y(),g(!s)}catch(o){console.log(o),g(!1),P(o)}},E=async o=>{const u=o.target.value;if(console.log("value",u),!u){y();return}try{const{data:j}=await N.get(`https://abhicares.com/api/admin/search-seller?search=${u}`,{withCredentials:!0});console.log("search",j),l(j.data)}catch(j){console.log(j)}};function F(o,u){let j=null;return function(L){j&&clearTimeout(j),j=setTimeout(()=>{o(L)},u)}}return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsxs("div",{className:c["report-container"],children:[e.jsxs("div",{className:c["report-header"],children:[e.jsx("h1",{className:c["recent-Articles"],children:"Partners"}),e.jsx("input",{onChange:F(E,1e3),className:c.input,type:"text",placeholder:"Search professionals"}),e.jsxs("select",{name:"status",value:f,onChange:o=>D(o.target.value),className:c.input,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"IN-REVIEW",children:"In Review"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"}),e.jsx("option",{value:"HOLD",children:"Hold"})]}),e.jsx("button",{onClick:()=>A(!0),className:c.button,children:"Unapproved Seller"}),e.jsx("button",{onClick:()=>t(!0),className:c.services_add_btn,children:e.jsx("img",{src:te,alt:"add seller"})})]}),e.jsxs("div",{className:c["report-body"],children:[e.jsxs("div",{className:c.sellers,children:[e.jsx("h3",{className:c["t-op"],children:"Seller Name"}),e.jsx("h3",{className:c["t-op"],children:"Category"}),e.jsx("h3",{className:c["t-op"],children:"Phone"}),e.jsxs("h3",{className:c["t-op"],children:["Update/",e.jsx("br",{}),"Delete/Seller Order"]})]}),e.jsxs("div",{className:c.items,children:[!p&&m.length===0&&e.jsx("p",{children:"No sellers found"}),p&&m.length===0&&e.jsx(X,{}),m==null?void 0:m.map(o=>e.jsxs("div",{className:c.sellers,children:[e.jsx("h3",{className:c["t-op-nextlvl"],children:o.name}),e.jsx("h3",{className:`${c["t-op-nextlvl"]}`,children:o.categoryId.name}),e.jsx("h3",{className:`${c["t-op-nextlvl"]}`,children:o.phone}),e.jsxs("h3",{className:`${c["t-op-nextlvl"]}`,children:[e.jsx(ae,{onClick:u=>R(u,o),cursor:"pointer",size:20}),e.jsx(ne,{onClick:u=>k(u,o._id),cursor:"pointer",size:22,color:"red"}),e.jsx(se,{onClick:()=>O(`/admin/partners/${o._id}`,{state:o}),cursor:"pointer",size:20})]})]},o._id))]})]})]})}),_&&e.jsx(K,{setIsModalOpen:t,getAllSellers:y}),v&&e.jsx(K,{setIsModalOpen:C,getAllSellers:y,seller:h}),s&&e.jsx(oe,{setState:g,handleDelete:M}),I&&e.jsx(we,{setIsUnapprovedSellerModalOpen:A,allSellers:m,getSellers:y})]})};export{Me as default};
