import{h as S,r as f,j as s,f as _,_ as c}from"./index-DmceSUEu.js";import{A as I,f as L}from"./LogoutModal-BO_6Xxx7.js";const M="_modal_overlay_9z2w0_1",V="_modal_open_9z2w0_21",D="_modal_close_9z2w0_33",H="_modal_wrapper_9z2w0_41",P="_modal_9z2w0_1",T="_p_9z2w0_99",q="_mt_9z2w0_111",B="_rating_container_9z2w0_119",G="_button_9z2w0_141",J="_input_box_9z2w0_165",K="_input_9z2w0_165",e={modal_overlay:M,modal_open:V,modal_close:D,modal_wrapper:H,modal:P,p:T,mt:q,rating_container:B,button:G,input_box:J,input:K},W=({isReviewModalOpen:w,setIsReviewModalOpen:i,review:a,id:p,getAllReviewsOfUser:m,isBooking:N=!1,bookingId:u,serviceType:z,serviceId:C})=>{const d=S("userInfo"),h=d==null?void 0:d.id;console.log("userId",h),console.log("bookingId",u);const[o,g]=f.useState({title:(a==null?void 0:a.title)||"",content:(a==null?void 0:a.content)||"",rating:(a==null?void 0:a.rating)||""}),[$,x]=f.useState(void 0),A=Array(5).fill(0),j=n=>{const{name:l,value:r}=n.target;g({...o,[l]:r})},k=n=>{g({...o,rating:n})},R=n=>{x(n)},E=()=>{x(void 0)},F=async()=>{var n,l,r,b,v,y;if(!(!o.title||!o.content||!o.rating))if(N)try{const{data:t}=await _.post("https://abhicares.com/api/shopping/add-booking-review",{...o,bookingId:u,serviceType:z,serviceId:C,userId:h},{withCredentials:!0});i(!1),c.success("Review added successfully"),console.log(t)}catch(t){c.error((l=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:l.message),console.log(t)}else if(a)try{const{data:t}=await _.patch(`https://abhicares.com/api/shopping/update-product-review/${p}`,{...o},{withCredentials:!0});i(!1),c.success("Review updated successfully"),m(),console.log(t)}catch(t){c.error((b=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:b.message),console.log(t)}else try{const{data:t}=await _.post(`https://abhicares.com/api/shopping/add-product-review/${p}`,{...o},{withCredentials:!0});i(!1),c.success("Review added successfully"),m(),console.log(t)}catch(t){c.error((y=(v=t==null?void 0:t.response)==null?void 0:v.data)==null?void 0:y.message),console.log(t)}};return console.log(o),s.jsx("div",{className:`${e.modal_overlay} ${w?e.modal_open:e.modal_close}`,children:s.jsxs("div",{className:e.modal_wrapper,children:[s.jsx("button",{onClick:()=>i(),className:e.modal_close,children:s.jsx(I,{size:20})}),s.jsxs("div",{className:e.modal,children:[s.jsx("p",{className:e.p,children:"Add Review"}),s.jsxs("div",{className:e.mt,children:[s.jsx("label",{htmlFor:"title",children:"Title"}),s.jsx("div",{className:e.input_box,children:s.jsx("input",{className:e.input,onChange:j,value:o.title,type:"text",name:"title",id:"title",placeholder:"Enter your review title"})})]}),s.jsxs("div",{className:e.mt,children:[s.jsx("label",{htmlFor:"content",children:"Description"}),s.jsx("div",{className:e.input_box,children:s.jsx("input",{className:e.input,onChange:j,value:o.content,type:"text",name:"content",id:"content",placeholder:"Enter your review description"})})]}),s.jsxs("div",{className:e.mt,children:[s.jsx("label",{htmlFor:"rating",children:"Select Rating"}),s.jsx("div",{className:e.rating_container,children:A.map((n,l)=>s.jsx("li",{children:s.jsx(L,{size:20,onClick:()=>k(l+1),onMouseOver:()=>R(l+1),onMouseLeave:E,color:($||o.rating)>l?"yellow":"gray"})},l))})]}),s.jsx("button",{onClick:F,className:e.button,children:"Proceed"})]})]})})};export{W as A};
