import{r as d,e as A,j as n,_ as V}from"./index-jh_7jsAh.js";import{W as q}from"./Wrapper-BxFEiEae.js";import{L as J}from"./Loader-DWDw_Ctb.js";import{P as W}from"./react-bootstrap-pagination-control.esm-BpD4t2g1.js";import{u as $,g as Q,a as U}from"./index.esm-CbTUZ4YC.js";import{D as H}from"./DeleteModal-D9-MpWwM.js";import{R as K}from"./index.esm-DQbcOE5R.js";import{R as z}from"./react-stars-NquYUT5E.js";import{p as Z}from"./index-D929gUkn.js";import{f as F}from"./index-CnJc0tvj.js";import{u as X}from"./useDeleteApiReq-BO4SlYl6.js";import"./logo -C1Nz5jdc.js";import"./iconBase-CTzivY3m.js";const Y="_settings_o9f4h_1",R="_filter_container_o9f4h_11",D="_filter_button_o9f4h_21",w="_filter_input_o9f4h_37",ee="_left_o9f4h_47",ne="_heading_container_o9f4h_57",se="_btn_wrapper_o9f4h_71",ae="_button_o9f4h_81",te="_container_o9f4h_97",ce="_flex_o9f4h_111",de="_item_o9f4h_125",oe="_right_o9f4h_149",ie="_status_o9f4h_159",re="_active_o9f4h_169",le="_inactive_o9f4h_179",h={settings:Y,filter_container:R,filter_button:D,filter_input:w,left:ee,heading_container:ne,btn_wrapper:se,button:ae,container:te,flex:ce,item:de,right:oe,status:ie,active:re,inactive:le},pe="_wrapper1_16asb_1",he="_modal_16asb_27",ue="_heading_container_16asb_47",_e="_viewBtn_16asb_59",xe="_heading_16asb_47",fe="_reviewGrid_16asb_83",je="_price_16asb_109",i={wrapper1:pe,modal:he,heading_container:ue,viewBtn:_e,heading:xe,reviewGrid:fe,price:je},ge=({setIsModalOpen:l,review:c})=>{var _,g,m,u,N,T,y,t,v,x,S,P,E,b,f,M,s,C,L,B;const{res:r,fetchData:j,isLoading:o}=$(),[e,p]=d.useState("");d.useState(!0);const a=A(),I=async()=>{j(`/admin/review-detail?reviewId=${c._id}`)};return d.useEffect(()=>{I()},[]),d.useEffect(()=>{((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&p(r==null?void 0:r.data.data)},[r]),n.jsx("div",{className:i.wrapper1,children:n.jsxs("div",{className:i.modal,children:[n.jsxs("div",{className:i.heading_container,children:[n.jsx("h4",{children:"Review Details"}),n.jsx("div",{className:i.d_flex,children:n.jsx(K,{onClick:()=>l(!1),cursor:"pointer",size:26})})]}),n.jsxs("div",{children:[n.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"10px"},children:["Rating:",n.jsx(z,{count:5,edit:!1,value:c.rating,size:24,color2:"#ffd700"})]}),n.jsxs("p",{children:[n.jsx("b",{children:"Date:"})," ",c.date]}),n.jsxs("p",{children:[n.jsx("b",{children:"Review Type:"})," ",e==null?void 0:e.reviewType]}),n.jsxs("p",{children:[n.jsx("b",{children:"Review:"})," ",c.content]}),n.jsxs("div",{className:i.reviewGrid,children:[n.jsxs("div",{children:[n.jsx("div",{className:i.heading_container,children:n.jsx("h5",{className:i.heading,children:"User Details"})}),n.jsxs("p",{children:[n.jsx("b",{children:"Name:"})," ",(_=e==null?void 0:e.userId)==null?void 0:_.name]}),n.jsxs("p",{children:[n.jsx("b",{children:"Phone:"})," ",(g=e==null?void 0:e.userId)==null?void 0:g.phone]})]}),n.jsxs("div",{children:[n.jsx("div",{className:i.heading_container,children:n.jsx("h5",{className:i.heading,children:"Service Details"})}),n.jsxs("p",{children:[n.jsx("b",{children:"Name:"})," ",e!=null&&e.productId?(m=e==null?void 0:e.productId)==null?void 0:m.name:(u=e==null?void 0:e.packageId)==null?void 0:u.name]}),n.jsxs("p",{children:[n.jsx("b",{children:"Type:"})," ",e!=null&&e.productId?"Product":"Package"]}),n.jsxs("p",{children:[n.jsx("b",{children:"Description:"}),e!=null&&e.productId?n.jsx("p",{children:Z((N=e==null?void 0:e.productId)==null?void 0:N.description)}):n.jsx("p",{children:((T=e==null?void 0:e.packageId)==null?void 0:T.description)&&Z((y=e==null?void 0:e.packageId)==null?void 0:y.description)})]}),n.jsxs("div",{className:i.price,children:[n.jsxs("span",{children:["₹",e!=null&&e.productId?(t=e==null?void 0:e.productId)==null?void 0:t.price:(v=e==null?void 0:e.packageId)==null?void 0:v.price]}),n.jsxs("span",{children:["₹",e!=null&&e.productId?(x=e==null?void 0:e.productId)==null?void 0:x.offerPrice:(S=e==null?void 0:e.packageId)==null?void 0:S.offerPrice]})]})]}),((P=e==null?void 0:e.bookingId)==null?void 0:P.sellerId)&&n.jsxs("div",{children:[n.jsxs("div",{className:i.heading_container,children:[n.jsx("h5",{className:i.heading,children:"Partner Details"}),n.jsx("button",{onClick:()=>{var k,G,O;return a(`/admin/partners/${(G=(k=e==null?void 0:e.bookingId)==null?void 0:k.sellerId)==null?void 0:G._id}`,{state:(O=e==null?void 0:e.bookingId)==null?void 0:O.sellerId})},className:i.viewBtn,children:"View"})]}),n.jsxs("p",{children:[n.jsx("b",{children:"Name:"})," ",(b=(E=e==null?void 0:e.bookingId)==null?void 0:E.sellerId)==null?void 0:b.name]}),n.jsxs("p",{children:[n.jsx("b",{children:"Phone:"})," ",(M=(f=e==null?void 0:e.bookingId)==null?void 0:f.sellerId)==null?void 0:M.phone]})]}),(e==null?void 0:e.bookingId)&&n.jsxs("div",{children:[n.jsxs("div",{className:i.heading_container,children:[n.jsx("h5",{className:i.heading,children:"Booking Details"}),n.jsx("button",{onClick:()=>{var k;return a(`/admin/bookings/${(k=e==null?void 0:e.bookingId)==null?void 0:k._id}`,{state:e==null?void 0:e.bookingId})},className:i.viewBtn,children:"View"})]}),n.jsxs("p",{children:[n.jsx("b",{children:"Order Value:"})," ",(s=e==null?void 0:e.bookingId)==null?void 0:s.orderValue]}),n.jsxs("p",{children:[n.jsx("b",{children:"Booking Date:"})," ",((C=e==null?void 0:e.bookingId)==null?void 0:C.bookingDate)&&F(new Date((L=e==null?void 0:e.bookingId)==null?void 0:L.bookingDate),"dd-MM-yyyy")]}),n.jsxs("p",{children:[n.jsx("b",{children:"Booking Time:"})," ",(B=e==null?void 0:e.bookingId)==null?void 0:B.bookingTime]})]})]})]})]})})},me=({review:l,fetchReviews:c})=>{const[r,j]=d.useState(!1),[o,e]=d.useState(!1),{res:p,fetchData:a,isLoading:I}=X(),_=async()=>{a(`/admin/delete-review?reviewId=${l==null?void 0:l._id}`)};return d.useEffect(()=>{((p==null?void 0:p.status)===200||(p==null?void 0:p.status)===201)&&(V.success("Review deleted successfully"),c())},[p]),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:h.item,children:n.jsxs("div",{className:h.left,children:[n.jsxs("div",{className:h.flex,children:[n.jsxs("p",{children:["Title: ",l.title]}),n.jsxs("div",{className:h.right,children:[n.jsx(Q,{onClick:()=>e(!0),cursor:"pointer",size:22,color:"black"}),n.jsx(U,{onClick:()=>j(!0),cursor:"pointer",size:22,color:"red"})]})]}),n.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"10px"},children:["Rating:",n.jsx(z,{count:5,edit:!1,value:l.rating,size:24,color2:"#ffd700"})]}),n.jsxs("p",{children:["Date: ",l.date]}),n.jsxs("p",{children:["Review: ",l.content]})]})}),r&&n.jsx(H,{handleDelete:_,setState:j}),o&&n.jsx(ge,{setIsModalOpen:e,review:l})]})},$e=()=>{const l=[{_id:"1",userName:"John Doe",serviceType:"delivery",date:"2024-11-20T10:30:00.000Z",content:"Great service! The delivery was quick and the food was hot."},{_id:"2",userName:"Jane Smith",serviceType:"pickup",date:"2024-11-18T15:45:00.000Z",content:"The staff was friendly, but the order was slightly delayed."},{_id:"3",userName:"Mike Johnson",serviceType:"delivery",date:"2024-11-19T12:20:00.000Z",content:"The app is easy to use, and the service is reliable."},{_id:"4",userName:"Emily Davis",serviceType:"pickup",date:"2024-11-17T18:00:00.000Z",content:"Good experience, but the packaging could be better."},{_id:"5",userName:"David Brown",serviceType:"delivery",date:"2024-11-16T20:15:00.000Z",content:"Excellent delivery timing. The driver was polite and professional."},{_id:"6",userName:"Sophia Wilson",serviceType:"pickup",date:"2024-11-15T14:10:00.000Z",content:"Quick and easy pickup. The restaurant staff was helpful."}],{res:c,fetchData:r,isLoading:j}=$(),{res:o,fetchData:e,isLoading:p}=$(),{res:a,fetchData:I,isLoading:_}=$(),[g,m]=d.useState(l),[u,N]=d.useState(1),[T,y]=d.useState(0),[t,v]=d.useState({date:"",serviceType:"",type:""}),[x,S]=d.useState([]);console.log("filter",t);const P=async()=>{r("/admin/get-all-category")};d.useEffect(()=>{P()},[]),d.useEffect(()=>{((c==null?void 0:c.status)===200||(c==null?void 0:c.status)===201)&&S(c==null?void 0:c.data.data)},[c]);const E=async s=>{N(s)},b=async()=>{e(`/admin/get-all-reviews?page=${u}`)};d.useEffect(()=>{((o==null?void 0:o.status)===200||(o==null?void 0:o.status)===201)&&(m(o==null?void 0:o.data.data),y(o==null?void 0:o.data.totalPages))},[o]);const f=s=>{const{name:C,value:L}=s.target;v({...t,[C]:L})},M=async()=>{I(`/admin/filter-review?date=${t.date&&F(new Date(t.date),"dd/MM/yyyy")}&serviceType=${t.serviceType}&reviewType=${t.type}&page=${u}`)};return d.useEffect(()=>{!t.date&&!t.serviceType&&!t.type?b():M()},[u,t.date,t.serviceType,t.type]),d.useEffect(()=>{((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&(y(a==null?void 0:a.data.totalPages),m(a==null?void 0:a.data.data))},[a]),n.jsx(q,{children:n.jsxs("div",{className:h.settings,children:[n.jsxs("div",{className:h.heading_container,children:[n.jsx("h1",{children:"Reviews"}),n.jsxs("div",{className:h.filter_container,children:[n.jsx("input",{type:"date",name:"date",value:t.date,onChange:f,placeholder:"Start Date",className:h.filter_input}),n.jsxs("select",{name:"serviceType",value:t.serviceType,onChange:f,className:h.filter_input,children:[n.jsx("option",{value:"",children:"Select Service"}),x==null?void 0:x.map(s=>n.jsx("option",{value:s==null?void 0:s._id,children:s==null?void 0:s.name},s==null?void 0:s._id))]}),n.jsxs("select",{name:"type",value:t.type,onChange:f,className:h.filter_input,children:[n.jsx("option",{value:"",children:"Select Type"}),n.jsx("option",{value:"service",children:"Service"}),n.jsx("option",{value:"product",children:"Product"})]})]})]}),p||_?n.jsx(J,{}):g.length===0?n.jsx("p",{children:"No reviews found"}):n.jsx("div",{className:h.container,children:g.map(s=>n.jsx(me,{review:s,fetchReviews:b},s._id))}),n.jsx("div",{style:{marginTop:"20px"},children:n.jsx(W,{changePage:E,limit:10,page:u,total:T+"0"})})]})})};export{$e as default};
