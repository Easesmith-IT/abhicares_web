import{r as o,_ as O,j as e}from"./index-B-IXA8Ie.js";import{b as Y}from"./index.esm-Cs3NBBGY.js";import{F as Z}from"./index.esm-BMR3ZfE0.js";import{u as A,a as R}from"./index.esm-BbyRK8SJ.js";import{R as M}from"./index.esm-UZTkdxOj.js";/* empty css                   */import{u as ee}from"./usePatchApiReq-CFyoLoKy.js";import{u as se}from"./usePostApiReq-BqGvxZz6.js";import{c as d,W as ne}from"./Wrapper-MkLY3g7U.js";import{h as te}from"./jspdf-html2canvas.min-DgPDKMHS.js";import{L as P}from"./Loader-BC-JdY3x.js";import{D as ae}from"./DeleteModal-C90xvr-R.js";import"./index-BzzzayLF.js";import{f as oe}from"./index--LFhlb37.js";import{u as ce}from"./useDeleteApiReq-Cdh8879L.js";import{P as le}from"./react-bootstrap-pagination-control.esm-BkNEHDtK.js";import"./iconBase-3hUsnpgH.js";import"./useDispatch-C5OFXrAN.js";import"./logo -C1Nz5jdc.js";const ie="_wrapper_1s75l_1",de="_modal_1s75l_27",re="_heading_container_1s75l_47",pe="_form_1s75l_59",he="_input_container_1s75l_73",me="_input_1s75l_73",_e="_button_wrapper_1s75l_105",xe="_button_1s75l_105",p={wrapper:ie,modal:de,heading_container:re,form:pe,input_container:he,input:me,button_wrapper:_e,button:xe},U=({setIsModalOpen:i,user:s="",getAllUsers:l})=>{const{res:n,fetchData:x,isLoading:r}=se(),[a,j]=o.useState({name:(s==null?void 0:s.name)||"",phone:(s==null?void 0:s.phone)||"",status:(s==null?void 0:s.status)||!0}),t=m=>{const{name:_,value:v}=m.target;j({...a,[_]:v})},{res:h,fetchData:g}=ee(),b=async m=>{if(m.preventDefault(),!a.name||!a.phone||!a.status){alert("alert");return}s?await g(`/admin/update-user/${s._id}`,{...a}):x("/admin/create-user",{...a})};return o.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(O.success("User created successfully"),l(),i(!1))},[n]),o.useEffect(()=>{((h==null?void 0:h.status)===200||(h==null?void 0:h.status)===201)&&(O.success("User updated successfully"),l(),i(!1))},[h]),e.jsx("div",{className:p.wrapper,children:e.jsxs("div",{className:p.modal,children:[e.jsxs("div",{className:p.heading_container,children:[e.jsxs("h4",{children:[s?"Update":"Add"," User"]}),e.jsx("div",{className:p.d_flex,children:e.jsx(M,{onClick:()=>i(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:b,className:p.form,children:[e.jsxs("div",{className:p.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:p.input,onChange:t,value:a.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:p.input_container,children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{className:p.input,onChange:t,value:a.phone,type:"number",name:"phone",id:"phone"})]}),e.jsxs("div",{className:p.input_container,children:[e.jsx("label",{htmlFor:"status",children:"Status"}),e.jsxs("select",{onChange:t,value:a.status,className:p.input,name:"status",id:"status",children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"InActive"})]})]}),e.jsx("div",{className:p.button_wrapper,children:e.jsx("button",{className:p.button,children:s?"Update":"Add"})})]})]})})},ue="_wrapper_ig0nd_1",je="_modal_ig0nd_27",fe="_heading_container_ig0nd_45",ge="_contianer_ig0nd_61",be="_mt_ig0nd_87",Ne="_btn_container_ig0nd_95",ve="_button_ig0nd_109",we="_table_wrapper_ig0nd_125",ye="_table_ig0nd_125",u={wrapper:ue,modal:je,heading_container:fe,contianer:ge,mt:be,btn_container:Ne,button:ve,table_wrapper:we,table:ye},$e=({setIsModalOpen:i})=>{const[s,l]=o.useState([]),{res:n,fetchData:x,isLoading:r}=A(),a=async()=>{x("/admin/get-users-data")};o.useEffect(()=>{a()},[]),o.useEffect(()=>{var t;((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(console.log("getUsersDataRes",n),l((t=n==null?void 0:n.data)==null?void 0:t.users))},[n]);const j=()=>{te(document.querySelector("#table"),{jsPDF:{format:"a4"},imageType:"image/jpeg",output:"./pdf/generate.pdf"})};return e.jsx("div",{className:u.wrapper,children:e.jsxs("div",{className:u.modal,children:[e.jsxs("div",{className:u.heading_container,children:[e.jsx("h4",{children:"All Users"}),e.jsx("div",{className:u.d_flex,children:e.jsx(M,{onClick:()=>i(!1),cursor:"pointer",size:26})})]}),!r&&(s==null?void 0:s.length)===0&&e.jsx("p",{style:{padding:"20px"},children:"No users found"}),e.jsx("div",{style:{marginBottom:"20px"},children:r&&(s==null?void 0:s.length)===0&&e.jsx(P,{})}),(s==null?void 0:s.length)>0&&e.jsxs("div",{className:d["report-body"],children:[e.jsx("div",{id:"table",className:u.table_wrapper,children:e.jsxs("table",{border:"2px",className:u.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Locality"})]})}),e.jsx("tbody",{children:s.map((t,h)=>{var g,b,m,_;return e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px",textAlign:"left",paddingInline:"10px"},children:(g=t==null?void 0:t.userInfo)==null?void 0:g.name}),e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:(b=t==null?void 0:t.userInfo)==null?void 0:b.phone}),t!=null&&t.add?e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:`${(m=t==null?void 0:t.add)==null?void 0:m.city}, ${(_=t==null?void 0:t.add)==null?void 0:_.pincode}`}):e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:"No address found."})]},h)})})]})}),e.jsx("div",{className:u.btn_container,children:e.jsx("button",{className:u.button,onClick:j,children:"Download"})})]})]})})},Ce="_wrapper_1c8xw_1",Ae="_modal_1c8xw_27",Me="_heading_container_1c8xw_47",Se="_contianer_1c8xw_59",De="_mt_1c8xw_85",Ie="_btn_1c8xw_95",w={wrapper:Ce,modal:Ae,heading_container:Me,contianer:Se,mt:De,btn:Ie},Oe="_wrapper_mlgom_1",Pe="_modal_mlgom_27",Le="_heading_container_mlgom_47",Ee="_form_mlgom_59",ke="_input_container_mlgom_73",Fe="_input_mlgom_73",ze="_button_wrapper_mlgom_105",Ue="_button_mlgom_105",qe="_addresses_container_mlgom_131",Te="_address_mlgom_131",f={wrapper:Oe,modal:Pe,heading_container:Le,form:Ee,input_container:ke,input:Fe,button_wrapper:ze,button:Ue,addresses_container:qe,address:Te},We=({setIsModalOpen:i,userId:s})=>{const{res:l,fetchData:n,isLoading:x}=A(),[r,a]=o.useState([]),j=async()=>{n(`/admin/get-all-addresses/${s}`)};return o.useEffect(()=>{j()},[]),o.useEffect(()=>{((l==null?void 0:l.status)===200||(l==null?void 0:l.status)===201)&&a(l==null?void 0:l.data.addresses)},[l]),e.jsx("div",{className:f.wrapper,children:e.jsxs("div",{className:f.modal,children:[e.jsxs("div",{className:f.heading_container,children:[e.jsx("h4",{children:"User Addresses"}),e.jsx("div",{className:f.d_flex,children:e.jsx(M,{onClick:()=>i(!1),cursor:"pointer",size:26})})]}),e.jsxs("div",{className:f.addresses_container,children:[!x&&(r==null?void 0:r.length)===0&&e.jsx("p",{children:"No address found"}),x&&(r==null?void 0:r.length)===0&&e.jsx(P,{}),r&&r.map(t=>e.jsx("div",{className:f.address,children:e.jsxs("div",{className:f.partner_left,children:[e.jsxs("p",{children:[e.jsx("b",{children:"Address Line:"})," ",t.addressLine]}),e.jsxs("p",{children:[e.jsx("b",{children:"Landmark:"})," ",t.landmark]}),e.jsxs("p",{children:[e.jsx("b",{children:"City:"})," ",t.city]}),e.jsxs("p",{children:[e.jsx("b",{children:"Pincode:"})," ",t.pincode]}),e.jsxs("p",{children:[e.jsx("b",{children:"Default Address:"})," ",`${t.defaultAddress}`]}),e.jsxs("p",{children:[e.jsx("b",{children:"Co-ordinates:"})," ",`${t.location.coordinates[0]}, ${t.location.coordinates[1]}`]})]})}))]})]})})},Qe=({setIsUserInfoModalOpen:i,user:s})=>{console.log(s);const[l,n]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:w.wrapper,children:e.jsxs("div",{className:w.modal,children:[e.jsxs("div",{className:w.heading_container,children:[e.jsx("h4",{children:"Customer Info"}),e.jsxs("div",{className:w.d_flex,children:[e.jsx("button",{onClick:()=>n(!0),className:w.btn,children:"View all address"}),e.jsx(M,{onClick:()=>i(!1),cursor:"pointer",size:26})]})]}),e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsxs("p",{children:[e.jsx("b",{children:"Name:"})," ",s==null?void 0:s.name]}),e.jsxs("p",{children:[e.jsx("b",{children:"Phone:"})," ",s==null?void 0:s.phone]}),e.jsxs("p",{children:[e.jsx("b",{children:"Status:"})," ",e.jsx("span",{style:{color:s!=null&&s.status?"green":"red",fontWeight:700},children:s!=null&&s.status?"Active":"Inactive"})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Joined Date:"})," ",(s==null?void 0:s.createdAt)&&oe(new Date(s==null?void 0:s.createdAt),"dd/MM/yyyy")]})]})]})}),l&&e.jsx(We,{userId:s._id,setIsModalOpen:n})]})},ds=()=>{const{res:i,fetchData:s,isLoading:l}=ce(),{res:n,fetchData:x,isLoading:r}=A(),{res:a,fetchData:j,isLoading:t}=A(),[h,g]=o.useState(!1),[b,m]=o.useState(!1),[_,v]=o.useState(!1),[S,D]=o.useState({}),[N,L]=o.useState([]),[E,k]=o.useState(!1),[q,F]=o.useState(!1),[T,z]=o.useState(1),[y,W]=o.useState(1),[I,Q]=o.useState(""),B=async c=>{W(c)},$=async()=>{x(`/admin/get-all-user?page=${y}`)};o.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(console.log("getUsersRes",n),L(n==null?void 0:n.data.data),z(n==null?void 0:n.data.totalPage))},[n]);const G=c=>{D(c),m(!_)},J=c=>{D(c),k(!E)},V=c=>{D(c),v(!_)},H=async()=>{s(`/admin/delete-user/${S}`)};o.useEffect(()=>{((i==null?void 0:i.status)===200||(i==null?void 0:i.status)===201)&&(O.success("User deleted successfully"),$(),v(!_))},[i]);const K=async c=>{const C=c.target.value;Q(C)};o.useEffect(()=>{if(!I){$();return}j(`/admin/search-user?search=${I}&page=${y}`)},[y,I]),o.useEffect(()=>{var c,C;((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&(console.log("searchUserRes",a),z((C=(c=a==null?void 0:a.data)==null?void 0:c.pagination)==null?void 0:C.totalPages),L(a==null?void 0:a.data.data))},[a]);const X=()=>{F(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsxs("div",{className:d["report-container"],children:[e.jsxs("div",{className:d["report-header"],children:[e.jsx("h1",{className:d["recent-Articles"],children:"Customers"}),e.jsxs("div",{className:d.d_flex,children:[e.jsx("button",{className:d.btn,onClick:X,children:"Download"}),e.jsx("input",{onChange:K,className:d.input,type:"text",placeholder:"Search customers"})]})]}),e.jsxs("div",{className:d["report-body"],children:[e.jsxs("div",{className:d.Customer,children:[e.jsx("h3",{className:d["t-op"],children:"Customer Name"}),e.jsx("h3",{className:d["t-op"],children:"Contact Number"}),e.jsx("h3",{className:d["t-op"],children:"Update/Delete"})]}),e.jsxs("div",{className:d.items,children:[!r&&!t&&(N==null?void 0:N.length)===0&&e.jsx("p",{children:"No users found"}),(r||t)&&e.jsx(P,{}),N==null?void 0:N.map(c=>e.jsxs("div",{className:d.Customer,children:[e.jsx("h3",{className:d["t-op-nextlvl"],children:c.name}),e.jsx("h3",{className:d["t-op-nextlvl"],children:c.phone}),e.jsxs("h3",{style:{display:"flex",gap:"10px"},className:`${d["t-op-nextlvl"]}`,children:[e.jsx(Y,{onClick:()=>J(c),cursor:"pointer",size:20}),e.jsx(Z,{onClick:()=>G(c),cursor:"pointer",className:"ml-2",size:20}),e.jsx(R,{onClick:()=>V(c._id),cursor:"pointer",size:22,color:"red"})]})]},c._id))]}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(le,{changePage:B,limit:10,page:y,total:T+"0"})})]})]})}),E&&e.jsx(Qe,{setIsUserInfoModalOpen:k,user:S}),h&&e.jsx(U,{setIsModalOpen:g,getAllUsers:$}),b&&e.jsx(U,{setIsModalOpen:m,user:S,getAllUsers:$}),_&&e.jsx(ae,{setState:v,handleDelete:H}),q&&e.jsx($e,{setIsModalOpen:F})]})};export{ds as default};
