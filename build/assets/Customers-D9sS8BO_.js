import{r as o,_ as w,j as e,e as K}from"./index-I-QjRnx0.js";import{P as V}from"./react-bootstrap-pagination-control.esm-D-VtLJoz.js";import{b as X}from"./index.esm-BVaOyPDU.js";import{F as Y}from"./index.esm-M9azWFrE.js";import{u as A,a as Z}from"./index.esm-C3Z8P0YS.js";import{R as L}from"./index.esm-MEfTCSon.js";/* empty css                   */import{u as U}from"./usePatchApiReq-BvTl6UI0.js";import{u as R}from"./usePostApiReq-hUuV07yT.js";import{c}from"./Shared.module-DD54I-nI.js";import{h as ee}from"./jspdf-html2canvas.min-Bc1FLTY-.js";import{L as O}from"./Loader-DJYIHqme.js";import{D as se}from"./DeleteModal-CXHgyNYm.js";import{u as te}from"./useDeleteApiReq-BK3eY5Hh.js";import{W as ae}from"./Wrapper-BY0MUZnD.js";import"./iconBase-BpojMoAv.js";import"./useDispatch-PMR2IWSw.js";import"./logo -C1Nz5jdc.js";const ne="_wrapper_1s75l_1",oe="_modal_1s75l_27",le="_heading_container_1s75l_47",ce="_form_1s75l_59",ie="_input_container_1s75l_73",de="_input_1s75l_73",re="_button_wrapper_1s75l_105",pe="_button_1s75l_105",d={wrapper:ne,modal:oe,heading_container:le,form:ce,input_container:ie,input:de,button_wrapper:re,button:pe},E=({setIsModalOpen:i,user:t="",getAllUsers:j})=>{const{res:s,fetchData:g,isLoading:m}=R(),[a,N]=o.useState({name:(t==null?void 0:t.name)||"",phone:(t==null?void 0:t.phone)||"",status:(t==null?void 0:t.status)||!0}),n=p=>{const{name:h,value:b}=p.target;N({...a,[h]:b})},{res:r,fetchData:x}=U(),_=async p=>{if(p.preventDefault(),!a.name||!a.phone||!a.status){alert("alert");return}t?await x(`/admin/update-user/${t._id}`,{...a}):g("/admin/create-user",{...a})};return o.useEffect(()=>{((s==null?void 0:s.status)===200||(s==null?void 0:s.status)===201)&&(w.success("User created successfully"),j(),i(!1))},[s]),o.useEffect(()=>{((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&(w.success("User updated successfully"),j(),i(!1))},[r]),e.jsx("div",{className:d.wrapper,children:e.jsxs("div",{className:d.modal,children:[e.jsxs("div",{className:d.heading_container,children:[e.jsxs("h4",{children:[t?"Update":"Add"," User"]}),e.jsx("div",{className:d.d_flex,children:e.jsx(L,{onClick:()=>i(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:_,className:d.form,children:[e.jsxs("div",{className:d.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:d.input,onChange:n,value:a.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:d.input_container,children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{className:d.input,onChange:n,value:a.phone,type:"number",name:"phone",id:"phone"})]}),e.jsxs("div",{className:d.input_container,children:[e.jsx("label",{htmlFor:"status",children:"Status"}),e.jsxs("select",{onChange:n,value:a.status,className:d.input,name:"status",id:"status",children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"InActive"})]})]}),e.jsx("div",{className:d.button_wrapper,children:e.jsx("button",{className:d.button,children:t?"Update":"Add"})})]})]})})},he="_wrapper_ig0nd_1",ue="_modal_ig0nd_27",me="_heading_container_ig0nd_45",xe="_contianer_ig0nd_61",_e="_mt_ig0nd_87",fe="_btn_container_ig0nd_95",je="_button_ig0nd_109",ge="_table_wrapper_ig0nd_125",Ne="_table_ig0nd_125",u={wrapper:he,modal:ue,heading_container:me,contianer:xe,mt:_e,btn_container:fe,button:je,table_wrapper:ge,table:Ne},be=({setIsModalOpen:i})=>{const[t,j]=o.useState([]),{res:s,fetchData:g,isLoading:m}=A(),a=async()=>{g("/admin/get-users-data")};o.useEffect(()=>{a()},[]),o.useEffect(()=>{var n;((s==null?void 0:s.status)===200||(s==null?void 0:s.status)===201)&&(console.log("getUsersDataRes",s),j((n=s==null?void 0:s.data)==null?void 0:n.users))},[s]);const N=()=>{ee(document.querySelector("#table"),{jsPDF:{format:"a4"},imageType:"image/jpeg",output:"./pdf/generate.pdf"})};return e.jsx("div",{className:u.wrapper,children:e.jsxs("div",{className:u.modal,children:[e.jsxs("div",{className:u.heading_container,children:[e.jsx("h4",{children:"All Users"}),e.jsx("div",{className:u.d_flex,children:e.jsx(L,{onClick:()=>i(!1),cursor:"pointer",size:26})})]}),!m&&(t==null?void 0:t.length)===0&&e.jsx("p",{style:{padding:"20px"},children:"No users found"}),e.jsx("div",{style:{marginBottom:"20px"},children:m&&(t==null?void 0:t.length)===0&&e.jsx(O,{})}),(t==null?void 0:t.length)>0&&e.jsxs("div",{className:c["report-body"],children:[e.jsx("div",{id:"table",className:u.table_wrapper,children:e.jsxs("table",{border:"2px",className:u.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Locality"})]})}),e.jsx("tbody",{children:t.map((n,r)=>{var x,_,p,h;return e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px",textAlign:"left",paddingInline:"10px"},children:(x=n==null?void 0:n.userInfo)==null?void 0:x.name}),e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:(_=n==null?void 0:n.userInfo)==null?void 0:_.phone}),n!=null&&n.add?e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:`${(p=n==null?void 0:n.add)==null?void 0:p.city}, ${(h=n==null?void 0:n.add)==null?void 0:h.pincode}`}):e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:"No address found."})]},r)})})]})}),e.jsx("div",{className:u.btn_container,children:e.jsx("button",{className:u.button,onClick:N,children:"Download"})})]})]})})},Qe=()=>{const{res:i,fetchData:t,isLoading:j}=te(),{res:s,fetchData:g,isLoading:m}=A(),{res:a,fetchData:N,isLoading:n}=A(),[r,x]=o.useState(!1),[_,p]=o.useState(!1),[h,b]=o.useState(!1),[D,M]=o.useState({}),[f,P]=o.useState([]);o.useState(!1);const[F,$]=o.useState(!1),[k,I]=o.useState(1),[v,q]=o.useState(1),[S,z]=o.useState(""),Q=K(),T=async l=>{q(l)},y=async()=>{g(`/admin/get-all-user?page=${v}`)};o.useEffect(()=>{((s==null?void 0:s.status)===200||(s==null?void 0:s.status)===201)&&(console.log("getUsersRes",s),P(s==null?void 0:s.data.data),I(s==null?void 0:s.data.totalPage))},[s]);const W=l=>{M(l),p(!h)},B=l=>{M(l),b(!h)},G=async()=>{t(`/admin/delete-user/${D}`)};o.useEffect(()=>{((i==null?void 0:i.status)===200||(i==null?void 0:i.status)===201)&&(w.success("User deleted successfully"),y(),b(!h))},[i]);const H=async l=>{const C=l.target.value;z(C)};o.useEffect(()=>{if(!S){y();return}N(`/admin/search-user?search=${S}&page=${v}`)},[v,S]),o.useEffect(()=>{var l,C;((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&(console.log("searchUserRes",a),I((C=(l=a==null?void 0:a.data)==null?void 0:l.pagination)==null?void 0:C.totalPages),P(a==null?void 0:a.data.data))},[a]);const J=()=>{$(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(ae,{children:e.jsxs("div",{className:c["report-container"],children:[e.jsxs("div",{className:c["report-header"],children:[e.jsx("h1",{className:c["recent-Articles"],children:"Customers"}),e.jsxs("div",{className:c.d_flex,children:[e.jsx("button",{className:c.btn,onClick:J,children:"Download"}),e.jsx("input",{onChange:H,className:c.input,type:"text",placeholder:"Search customers"})]})]}),e.jsxs("div",{className:c["report-body"],children:[e.jsxs("div",{className:c.Customer,children:[e.jsx("h3",{className:c["t-op"],children:"Customer Name"}),e.jsx("h3",{className:c["t-op"],children:"Contact Number"}),e.jsx("h3",{className:c["t-op"],children:"Update/Delete"})]}),e.jsxs("div",{className:c.items,children:[!m&&!n&&(f==null?void 0:f.length)===0&&e.jsx("p",{children:"No users found"}),(m||n)&&e.jsx(O,{}),f==null?void 0:f.map(l=>e.jsxs("div",{className:c.Customer,children:[e.jsx("h3",{className:c["t-op-nextlvl"],children:l.name}),e.jsx("h3",{className:c["t-op-nextlvl"],children:l.phone}),e.jsxs("h3",{style:{display:"flex",gap:"10px"},className:`${c["t-op-nextlvl"]}`,children:[e.jsx(X,{onClick:()=>Q(`/admin/customers/${l._id}`,{state:l}),cursor:"pointer",size:20}),e.jsx(Y,{onClick:()=>W(l),cursor:"pointer",className:"ml-2",size:20}),e.jsx(Z,{onClick:()=>B(l._id),cursor:"pointer",size:22,color:"red"})]})]},l._id))]}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(V,{changePage:T,limit:10,page:v,total:k+"0"})})]})]})}),r&&e.jsx(E,{setIsModalOpen:x,getAllUsers:y}),_&&e.jsx(E,{setIsModalOpen:p,user:D,getAllUsers:y}),h&&e.jsx(se,{setState:b,handleDelete:G}),F&&e.jsx(be,{setIsModalOpen:$})]})};export{Qe as default};
