import{r as i,j as e,L as g,f as l,u as f}from"./index-if6yrKUM.js";import{c as s,A as w}from"./style.module-ZeKiwiqh.js";import{W as p}from"./WebsiteWrapper-Czc46hzn.js";import"./index.esm-CdsNXrcl.js";import"./iconBase-lzS6dEZZ.js";import"./useDispatch-D0Me-TH-.js";import"./rolling-white-BBE_8u84.js";import"./index.esm-2CfOHty1.js";import"./Button-CDO2tyIS.js";import"./index.esm-DsWS68ZJ.js";const b=()=>{const[r,m]=i.useState([]);return i.useEffect(()=>{(async()=>{try{const c=(await l.get("https://blog.abhicares.com/wp-json/wp/v2/posts")).data.map(async t=>{if(t.featured_media){const n=await l.get(`https://blog.abhicares.com/wp-json/wp/v2/media/${t.featured_media}`);return{...t,featured_image:n.data}}return t}),h=await Promise.all(c);m(h)}catch(o){console.error("Error fetching data:",o)}})()},[]),e.jsx("div",{className:"wrapper",children:e.jsxs("div",{className:s["recent-blogs-wrapper"],children:[e.jsx("h1",{children:"Recent blogs"}),e.jsx("div",{className:s["blogs-sidebar-inner"],children:r.slice(0,3).map(a=>e.jsxs("div",{className:s["recent-blogs-cards"],children:[e.jsx("div",{className:s["blog-swiper-thumbnail"],children:e.jsx(g,{to:`/single-blog/${a.id}`,children:e.jsx("img",{src:a.featured_image.source_url,alt:"image"})})}),e.jsxs("div",{className:s["blog-content"],children:[e.jsx("div",{className:s["authoring-date"],children:e.jsx("span",{children:new Date(a.date).toLocaleDateString()})}),e.jsx("div",{className:s["blog-name"],children:e.jsx("h5",{children:e.jsx(g,{to:`/single-blog/${a.id}`,children:a.title.rendered})})}),e.jsx("div",{className:s["read-more"],children:e.jsxs(g,{to:`/single-blog/${a.id}`,children:["Read moreÂ ",e.jsx(w,{})]})})]})]},a.id))})]})})},D=()=>{const[r,m]=i.useState(null),[a,o]=i.useState(!0),[c,h]=i.useState(null),{id:t}=f(),n=t,u=window.innerWidth;return i.useEffect(()=>{(async()=>{try{const d=await l.get(`https://blog.abhicares.com/wp-json/wp/v2/posts/${n}`),j=d.data.featured_media,x=(await l.get(`https://blog.abhicares.com/wp-json/wp/v2/media/${j}`)).data.source_url;m({...d.data,featuredImageUrl:x})}catch(d){h(d)}finally{o(!1)}})()},[n]),a?e.jsx(p,{children:e.jsx("div",{className:s["recent-blogs-wrapper-loading"],children:e.jsx("div",{className:s.loading,children:e.jsx("h1",{children:"....Loading"})})})}):c?e.jsxs("p",{children:["Error: ",c.message]}):r?e.jsxs(p,{children:[e.jsx("div",{className:s["featured-image"],children:e.jsx("img",{src:r.featuredImageUrl,alt:"image"})}),e.jsxs("div",{className:s["each-blog-container-wrapper"],children:[e.jsxs("div",{className:s["recent-blogs-wrapper"],style:{margin:u<520?"0.2rem 0.4rem":""},children:[e.jsx("h2",{children:r.title.rendered}),e.jsx("div",{dangerouslySetInnerHTML:{__html:r.content.rendered}})]}),e.jsx(b,{})]})]}):e.jsxs("p",{children:["No post found with ID ",n]})};export{D as default};
