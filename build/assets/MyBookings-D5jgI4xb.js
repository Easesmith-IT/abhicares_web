import{r,j as s,e as j,h as v}from"./index-I-QjRnx0.js";import{L as y}from"./Loader-DJYIHqme.js";import{u,d as k}from"./index.esm-C3Z8P0YS.js";import{I as N}from"./InvoiceModal-ZWWOp7ZY.js";import{f as w}from"./index-CdPvp2KC.js";import{W as $}from"./WebsiteWrapper-Up1EDifj.js";import"./iconBase-BpojMoAv.js";import"./useDispatch-PMR2IWSw.js";import"./index.esm-BVaOyPDU.js";import"./jspdf-html2canvas.min-Bc1FLTY-.js";import"./index-7eC6c092.js";import"./rolling-white-BBE_8u84.js";import"./Button-CFwGVW0z.js";import"./index.esm-CvPoa2P-.js";const C="_order_b0wcb_1",I="_order_top_b0wcb_33",O="_img_b0wcb_63",M="_info_b0wcb_77",D="_info_row_b0wcb_85",E="_order_bottom_b0wcb_107",L="_progress_b0wcb_121",S="_d_flex_b0wcb_161",A="_status_b0wcb_171",q="_Cancelled_b0wcb_183",B="_Completed_b0wcb_191",V="_alloted_b0wcb_201",W="_pending_b0wcb_211",F="_OutOfDelivery_b0wcb_219",Q="_p_b0wcb_121",l={order:C,order_top:I,img:O,info:M,info_row:D,order_bottom:E,progress:L,d_flex:S,status:A,Cancelled:q,Completed:B,alloted:V,pending:W,OutOfDelivery:F,p:Q},z="_modal_overlay_h3fvf_1",G="_modal_h3fvf_1",T="_heading_container_h3fvf_49",H="_button_h3fvf_61",J="_p_container_h3fvf_81",K="_progress_h3fvf_89",P="_d_flex_h3fvf_131",U="_product_contaner_h3fvf_141",X="_product_h3fvf_141",Y="_img_h3fvf_173",Z="_info_h3fvf_183",R="_p_h3fvf_81",c={modal_overlay:z,modal:G,heading_container:T,button:H,p_container:J,progress:K,d_flex:P,product_contaner:U,product:X,img:Y,info:Z,p:R},ss=({setIsInfoModalOpen:n,order:i})=>{var h;const{res:o,fetchData:e,isLoading:p}=u();console.log(i._id);const[d,t]=r.useState({}),[m,_]=r.useState(!1),f=async()=>{e(`/shopping/get-product-invoice/${i._id}`)};return r.useEffect(()=>{f()},[]),r.useEffect(()=>{((o==null?void 0:o.status)===200||(o==null?void 0:o.status)===201)&&t(o==null?void 0:o.data.data)},[o]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:c.modal_overlay,children:s.jsxs("div",{className:c.modal,children:[s.jsxs("div",{className:c.heading_container,children:[s.jsx("h2",{children:"Booking Info"}),s.jsx(k,{onClick:()=>n(!1),size:22,cursor:"pointer"})]}),s.jsxs("div",{className:c.heading_container,children:[s.jsx("h3",{children:"Order1"}),s.jsx("button",{onClick:()=>_(!0),className:c.button,children:"View Invoice"})]}),s.jsx("div",{className:c.p_container,children:s.jsx("p",{className:c.qty,children:"Qty: 1"})}),s.jsx("h3",{children:"Products"}),s.jsx("div",{className:c.product_contaner,children:(h=i==null?void 0:i.products)==null?void 0:h.map(a=>{var g,x;return s.jsxs("div",{className:c.product,children:[s.jsx("img",{className:c.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${a.product.imageUrl[0]}`,alt:""}),s.jsxs("div",{className:c.info,children:[s.jsx("h4",{children:(g=a==null?void 0:a.product)==null?void 0:g.name}),s.jsxs("p",{children:["Qty: ",a==null?void 0:a.quantity]}),s.jsxs("p",{children:["₹",(x=a==null?void 0:a.product)==null?void 0:x.offerPrice]})]})]},a._id)})}),s.jsx("h4",{children:"Track Order"}),s.jsxs("div",{children:[s.jsx("div",{className:c.progress}),s.jsxs("div",{className:c.d_flex,children:[s.jsx("p",{}),s.jsx("p",{children:"Out for delivary"}),s.jsx("p",{children:"Delivered"})]})]}),s.jsx("hr",{})]})}),m&&s.jsx(N,{setIsInvoiceModalOpen:_})]})},ns=({order:n,index:i})=>{console.log("single order",n);const o=j(),[e,p]=r.useState(!1),d=()=>{o(`/my_bookings/${n._id}`,{state:n}),p(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{onClick:d,className:l.order,children:[s.jsx("div",{children:n.items.map((t,m)=>{var _,f,h;return s.jsx("img",{className:l.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${(_=t==null?void 0:t.product)!=null&&_.imageUrl[0]?(f=t==null?void 0:t.product)==null?void 0:f.imageUrl[0]:(h=t==null?void 0:t.package)==null?void 0:h.imageUrl[0]}`,alt:""},m)})}),s.jsxs("div",{children:[s.jsxs("p",{style:{color:"grey"},children:["#",n.orderId]}),s.jsxs("p",{children:["Date : ",w(new Date(n.createdAt),"dd-MM-yyyy")]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:["Order Value : ₹",n.orderValue]}),s.jsxs("div",{className:l.order_bottom,children:[s.jsx("p",{children:"Order Status :"}),s.jsx("div",{className:` ${l.status} ${n.status==="Cancelled"?l.Cancelled:n.status==="Completed"?l.Completed:n.status==="Pending"?l.pending:l.OutOfDelivery}`,children:n==null?void 0:n.status})]})]})]}),e&&s.jsx(ss,{setIsInfoModalOpen:p,order:n})]})},os="_my_bookings_1k5yf_1",es="_img_1k5yf_15",ts="_table_1k5yf_31",cs="_bookings_container_1k5yf_73",b={my_bookings:os,img:es,table:ts,bookings_container:cs},us=()=>{const{res:n,fetchData:i,isLoading:o}=u(),[e,p]=r.useState([]);j();const d=v("userInfo"),t=d==null?void 0:d.id,m=async()=>{i(`/shopping/get-user-orders?userId=${t}`)};return r.useEffect(()=>{m()},[]),r.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&p(n==null?void 0:n.data.data)},[n]),s.jsx($,{children:s.jsxs("section",{className:b.my_bookings,children:[s.jsx("h1",{children:"MyBookings"}),!o&&(e==null?void 0:e.length)===0&&s.jsx("p",{children:"No bookings found"}),o&&(e==null?void 0:e.length)===0&&s.jsx(y,{}),s.jsx("div",{className:b.bookings_container,children:e==null?void 0:e.map((_,f)=>s.jsx(ns,{index:f,order:_},_._id))})]})})};export{us as default};
