import{r as o,_ as E,j as e}from"./index-MFgKNwIH.js";import{R as k}from"./index.esm-DfQilCDn.js";import{u as f}from"./index.esm-cL7qp0JE.js";import{u as L}from"./usePostApiReq-BPpWmR_n.js";const U="_wrapper_d05c9_1",F="_modal_d05c9_27",A="_heading_container_d05c9_47",q="_select_d05c9_59",B="_form_d05c9_79",z="_input_container_d05c9_93",G="_input_d05c9_93",H="_d_flex_d05c9_119",O="_multi_select_d05c9_131",P="_button_wrapper_d05c9_171",$="_button_d05c9_171",J="_service_container_d05c9_203",K="_service_d05c9_203",s={wrapper:U,modal:F,heading_container:A,select:q,form:B,input_container:z,input:G,d_flex:H,multi_select:O,button_wrapper:P,button:$,service_container:J,service:K},Z=({setIsModalOpen:p,getBannersFromServer:x,data:d})=>{const{res:c,fetchData:g,isLoading:M}=f(),{res:n,fetchData:v,isLoading:Q}=f(),[a,j]=o.useState({serviceId:"",categoryId:""}),{res:i,fetchData:y,isLoading:T}=L(),[l,b]=o.useState([]),[_,I]=o.useState([]),[u,m]=o.useState(!1),h=t=>{const{name:r,value:D}=t.target;j({...a,[r]:D})},N=t=>{t.target.checked?m(!0):m(!1)},w=async()=>{g("/admin/get-all-category")};o.useEffect(()=>{w()},[]),o.useEffect(()=>{((c==null?void 0:c.status)===200||(c==null?void 0:c.status)===201)&&b(c==null?void 0:c.data.data)},[c]);const S=async()=>{v(`/admin/get-category-service/${a.categoryId}`)};o.useEffect(()=>{a.categoryId&&S()},[a.categoryId]),o.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&I(n==null?void 0:n.data.data)},[n]);const C=async t=>{t.preventDefault(),console.log("info",a);const r=new FormData;r.append("img",d.img),r.append("type",d.type),r.append("serviceId",a.serviceId),r.append("page",d.page),r.append("section",d.section),y("/content/upload-banners",r)};return o.useEffect(()=>{((i==null?void 0:i.status)===200||(i==null?void 0:i.status)===201)&&(console.log("Admin status response:",i),p(!1),x(),E.success("Updated successfully!"))},[i]),e.jsx("div",{className:s.wrapper,children:e.jsxs("div",{className:s.modal,children:[e.jsxs("div",{className:s.heading_container,children:[e.jsx("h4",{children:"Update Banner"}),e.jsx("div",{className:s.d_flex,children:e.jsx(k,{onClick:()=>p(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:C,className:s.form,children:[e.jsxs("div",{className:s.select,children:[e.jsx("input",{onChange:N,value:u,type:"checkbox",name:"checkbox",id:"checkbox"}),"Does not want to specify category and service."]}),!u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.input_container,children:[e.jsx("label",{htmlFor:"categoryId",children:"Category"}),e.jsxs("select",{onChange:h,value:a.categoryId,className:s.input,name:"categoryId",id:"categoryId",children:[e.jsx("option",{value:"choose a category",children:"Select a category"}),l==null?void 0:l.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]})]}),a.categoryId&&e.jsxs("div",{className:s.input_container,children:[e.jsx("label",{htmlFor:"serviceId",children:"Service"}),e.jsxs("select",{onChange:h,value:a.serviceId,className:s.input,name:"serviceId",id:"serviceId",children:[e.jsx("option",{value:"choose a service",children:"Select a service"}),_==null?void 0:_.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]})]})]}),e.jsx("div",{className:s.button_wrapper,children:e.jsx("button",{type:"submit",className:s.button,children:"Update"})})]})]})})};export{Z as U};
