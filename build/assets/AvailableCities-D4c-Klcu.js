import{r as o,e as M,_ as h,j as e}from"./index-iVe9Vivd.js";import{A as P}from"./add-icon-nobg-CDiYK8IX.js";import{L as E}from"./Loader-BFdpHLnG.js";import{W as L,c as N}from"./Wrapper-yQx_tRHn.js";import{F}from"./index.esm-IWUxmtms.js";import{u as O,a as B}from"./index.esm-BWkUA85f.js";import{R as D}from"./index.esm-BE76ok0X.js";/* empty css                   */import{u as I}from"./useAuthorization-CWsdsEM-.js";import{u as w}from"./usePatchApiReq-DgT57iow.js";import{u as U}from"./usePostApiReq-CXvXU-pP.js";import{D as z}from"./DeleteModal-BKAyOPvS.js";import{u as $}from"./useDeleteApiReq-D1sOSnjd.js";import"./logo -C1Nz5jdc.js";import"./iconBase-CW1Jb1pT.js";const W="_container_1kxfl_1",G="_city_wrapper_1kxfl_17",H="_city_1kxfl_17",J="_city_right_1kxfl_45",j={container:W,city_wrapper:G,city:H,city_right:J},K="_wrapper_sq67q_1",Q="_modal_sq67q_27",T="_heading_container_sq67q_47",V="_form_sq67q_59",X="_input_container_sq67q_73",Y="_input_sq67q_73",Z="_button_wrapper_sq67q_105",R="_button_sq67q_105",ee="_inputAndButton_sq67q_131",se="_pincodes_heading_sq67q_145",t={wrapper:K,modal:Q,heading_container:T,form:V,input_container:X,input:Y,button_wrapper:Z,button:R,inputAndButton:ee,pincodes_heading:se},S=({setIsModalOpen:c,city:a="",getAllCities:b})=>{I(),w();const{res:s,fetchData:C,isLoading:g}=U(),[i,_]=o.useState({city:(a==null?void 0:a.city)||"",state:(a==null?void 0:a.state)||"",pinCode:""}),[l,x]=o.useState((a==null?void 0:a.pinCodes)||[]);console.log("pinCodes",l);const f=()=>{if(i.pinCode||h.error("Please enter a pincode"),i.pinCode.length!==6){h.error("Pincode length must be 6 digits");return}x(n=>[...n,{code:i.pinCode}]),_({...i,pinCode:""})},m=n=>{const{name:u,value:A}=n.target;_({...i,[u]:A})};M();const{res:r,fetchData:v}=w(),d=async n=>{if(n.preventDefault(),!i.city||l.length===0||!i.state){h.error("All fields are required");return}a?v(`/admin/update-availabe-city/${a._id}`,{...i,pinCodes:l}):C("/admin/create-availabe-city",{...i,pinCode:l})};o.useEffect(()=>{((s==null?void 0:s.status)===200||(s==null?void 0:s.status)===201)&&(h.success("City added successfully"),b(),c(!1))},[s]);const q=n=>{let u=[...l];u.splice(n,1),x(u)};return o.useEffect(()=>{((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&(console.log("updateCityRes",r),h.success("City updated successfully"),b(),c(!1))},[r]),e.jsx("div",{className:t.wrapper,children:e.jsxs("div",{className:t.modal,children:[e.jsxs("div",{className:t.heading_container,children:[e.jsxs("h4",{children:[a?"Update":"Add"," City"]}),e.jsx("div",{className:t.d_flex,children:e.jsx(D,{onClick:()=>c(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:d,className:t.form,children:[e.jsxs("div",{className:t.input_container,children:[e.jsx("label",{htmlFor:"city",children:"City"}),e.jsx("input",{className:t.input,onChange:m,value:i.city,type:"text",name:"city",id:"city"})]}),e.jsxs("div",{className:t.input_container,children:[e.jsx("label",{htmlFor:"state",children:"State"}),e.jsx("input",{className:t.input,onChange:m,value:i.state,type:"text",name:"state",id:"state"})]}),e.jsxs("div",{className:t.input_container,children:[e.jsx("label",{htmlFor:"pinCode",children:"Add Pincodes"}),e.jsxs("div",{className:t.inputAndButton,children:[e.jsx("input",{className:t.input,onChange:m,value:i.pinCode,type:"number",name:"pinCode",id:"pinCode"}),e.jsx("button",{onClick:f,type:"button",className:t.button,children:"Add Pincode"})]}),l.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:t.pincodes_heading,children:"Added Pincodes:"}),e.jsx("div",{className:t.pincodes,children:l.map((n,u)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("p",{children:n==null?void 0:n.code}),e.jsx(D,{onClick:()=>q(u),style:{color:"red"},cursor:"pointer"})]}))})]})]}),e.jsx("div",{className:t.button_wrapper,children:e.jsx("button",{className:t.button,children:g?"Loading...":a?"Update":"Add"})})]})]})})},fe=()=>{const{res:c,fetchData:a,isLoading:b}=$(),{res:s,fetchData:C,isLoading:g}=O(),[i,_]=o.useState(!1),[l,x]=o.useState(!1),[f,m]=o.useState(!1),[r,v]=o.useState({}),[d,q]=o.useState([]),n=async()=>{C("/admin/get-availabe-city")};o.useEffect(()=>{n()},[]),o.useEffect(()=>{((s==null?void 0:s.status)===200||(s==null?void 0:s.status)===201)&&q(s==null?void 0:s.data.data)},[s]);const u=p=>{v(p),x(!l)},A=p=>{v(p),m(!f)},k=async()=>{a(`/admin/delete-availabe-city/${r}`)};return o.useEffect(()=>{((c==null?void 0:c.status)===200||(c==null?void 0:c.status)===201)&&(h.success("City deleted successfully"),n(),m(!f))},[c]),e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsxs("div",{className:N["report-container"],children:[e.jsxs("div",{className:N["report-header"],children:[e.jsx("h1",{className:N["recent-Articles"],children:"Available Cities"}),e.jsx("button",{onClick:()=>_(!0),className:N.services_add_btn,children:e.jsx("img",{src:P,alt:"add seller"})})]}),e.jsxs("div",{className:j.container,children:[!g&&(d==null?void 0:d.length)===0&&e.jsx("p",{children:"No cities found"}),g&&(d==null?void 0:d.length)===0&&e.jsx(E,{}),d==null?void 0:d.map(p=>e.jsxs("div",{className:j.city_wrapper,children:[e.jsxs("div",{className:j.city,children:[e.jsx("div",{className:j.city_left,children:e.jsxs("p",{children:["city: ",p.city]})}),e.jsxs("div",{className:j.city_right,children:[e.jsx(F,{onClick:()=>u(p),cursor:"pointer",size:20}),e.jsx(B,{onClick:()=>A(p._id),cursor:"pointer",size:22,color:"red"})]})]}),e.jsxs("p",{children:["state: ",p.state]}),e.jsxs("p",{children:["pincode: ",p.pinCodes.map(y=>y==null?void 0:y.code).join(", ")]})]},p._id))]})]})}),i&&e.jsx(S,{setIsModalOpen:_,getAllCities:n}),l&&e.jsx(S,{setIsModalOpen:x,getAllCities:n,city:r}),f&&e.jsx(z,{handleDelete:k,setState:m})]})};export{fe as default};
