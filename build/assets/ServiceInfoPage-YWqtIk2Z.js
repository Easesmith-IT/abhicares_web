import{r as d,j as e,_ as M,e as R,u as ne,n as Ce,o as Se}from"./index-DkoRNXTn.js";import{W as Pe,c as E}from"./Wrapper-BE5Wi-p6.js";import{p as ae}from"./index-CtRzJl0P.js";import{A as de}from"./add-icon-nobg-CDiYK8IX.js";import{R as V}from"./index.esm-DqU3JioV.js";import{R as ke}from"./index-qExohVyK.js";/* empty css                   */import{u as X}from"./useAuthorization-BLxMBhCp.js";import{g as re,j as Fe,a as oe}from"./LogoutModal-CkNuOxDX.js";import{l as fe}from"./rolling-white-BBE_8u84.js";import{c as N}from"./ProductInfoModal.module-DFnnMkat.js";import{C as Ae}from"./index-De0dZ-MB.js";import{I as Me,a as De,b as Ue}from"./index.esm-Big-ue6h.js";import{D as ce}from"./DeleteModal-TikKTlLr.js";import{L as me}from"./Loader-DVwzzA9D.js";import{F as pe}from"./index.esm-CB_s1KZF.js";import"./logo -C1Nz5jdc.js";import"./iconBase-CHCpDIrE.js";const ze="_service_info_12cr3_1",Oe="_button_12cr3_5",qe="_heading_container_12cr3_35",Re="_service_info_wrapper_12cr3_47",Le="_img_wrapper_12cr3_67",Ee="_icon_12cr3_77",Q={service_info:ze,button:Oe,heading_container:qe,service_info_wrapper:Re,img_wrapper:Le,icon:Ee},Be="_wrapper_12osz_1",Je="_modal_12osz_27",Ge="_heading_container_12osz_47",Te="_form_12osz_59",We="_input_container_12osz_73",Qe="_input_12osz_73",He="_button_wrapper_12osz_105",Ke="_button_12osz_105",Ve="_loader_12osz_131",Xe="_img_cotainer_12osz_141",Ye="_icon_12osz_161",F={wrapper:Be,modal:Je,heading_container:Ge,form:Te,input_container:We,input:Qe,button_wrapper:He,button:Ke,loader:Ve,img_cotainer:Xe,icon:Ye},he=({setIsModalOpen:h,serviceId:r,product:l="",getAllProducts:$})=>{var H,G;const{checkAuthorization:o}=X(),[y,i]=d.useState((l==null?void 0:l.description)||""),C=()=>Math.floor(Math.random()*90)+10,a=(H=l==null?void 0:l.imageUrl)==null?void 0:H.map(P=>({img:`https://storage.googleapis.com/abhicares-backend-bucket/${P}`,id:C()})),[n,f]=d.useState({name:(l==null?void 0:l.name)||"",price:(l==null?void 0:l.price)||"",offerPrice:(l==null?void 0:l.offerPrice)||"",img:(l==null?void 0:l.imageUrl)||[],previewImages:a||[],uploadedImages:[]}),[I,A]=d.useState(!l),w=d.useRef(null),[x,W]=d.useState(!1);console.log("prev state",n.previewImages),console.log("state",n);const J=P=>{P.preventDefault(),A(()=>!0),console.log("img length",n.img.length===3);const p=Array.from(P.target.files);if(p.length>3){M.error("Cannot upload files more than 3"),P.target.value=null;return}const b=U=>new Promise(L=>{const s=new FileReader;s.readAsDataURL(U),s.addEventListener("load",function(){L({img:this.result,id:C()})})});Promise.all(p.map(U=>b(U))).then(U=>{const L=p.length,s=[...n==null?void 0:n.img],c=[...n==null?void 0:n.previewImages];s.splice(0,L),c.splice(0,L);const u=p.map((k,q)=>({img:k,id:U[q].id}));f(k=>({...k,previewImages:[...c,...U],img:s,uploadedImages:u}))})},g=P=>{const{name:p,value:b}=P.target;f({...n,[p]:b})},D=(P,p)=>{console.log("id",p);let b=[...n.img].filter((s,c)=>c!==P),U=[...n.previewImages].filter(s=>s.id!==p),L=[...n.uploadedImages].filter(s=>s.id!==p);console.log("prev",U),console.log("db",b),w.current&&U.length===0&&(w.current.value=null),f({...n,img:b,previewImages:U,uploadedImages:L})},S=async P=>{if(P.preventDefault(),!n.name||!n.price||!n.offerPrice||!y){M.error("All the fields are required");return}W(!0);const p=new FormData;p.append("name",n.name),p.append("price",n.price),p.append("offerPrice",n.offerPrice),p.append("serviceId",r);for(const b of n.uploadedImages)p.append("img",b.img);if(p.append("imageUrl",JSON.stringify(n.img)),p.append("description",y),l)try{const{data:b}=await R.patch(`https://abhicares.com/api/admin/update-product/${l._id}`,p,{withCredentials:!0});M.success("Product updated successfully"),$(),h(!1)}catch(b){console.log(b),h(!1),o(b)}finally{W(!1)}else try{const{data:b}=await R.post("https://abhicares.com/api/admin/create-product",p,{withCredentials:!0});M.success("Product added successfully"),$(),h(!1)}catch(b){console.log(b),h(!1),o(b)}finally{W(!1)}};return e.jsx("div",{className:F.wrapper,children:e.jsxs("div",{className:F.modal,children:[e.jsxs("div",{className:F.heading_container,children:[e.jsxs("h4",{children:[l?"Update":"Add"," Product"]}),e.jsx("div",{className:F.d_flex,children:e.jsx(V,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:S,className:F.form,children:[e.jsxs("div",{className:F.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:F.input,onChange:g,value:n.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:F.input_container,children:[e.jsx("label",{htmlFor:"price",children:"Price"}),e.jsx("input",{className:F.input,onChange:g,value:n.price,type:"number",name:"price",id:"price"})]}),e.jsxs("div",{className:F.input_container,children:[e.jsx("label",{htmlFor:"offerPrice",children:"Offer Price"}),e.jsx("input",{className:F.input,onChange:g,value:n.offerPrice,type:"number",name:"offerPrice",id:"offerPrice"})]}),e.jsxs("div",{className:F.input_container,children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx(ke,{theme:"snow",value:y,onChange:i})]}),e.jsxs("div",{className:F.input_container,children:[e.jsx("label",{htmlFor:"img",children:"Image"}),e.jsx("input",{ref:w,onChange:J,multiple:!0,type:"file",name:"img",id:"img"})]}),e.jsx("div",{className:F.img_cotainer,children:(G=n==null?void 0:n.previewImages)==null?void 0:G.map((P,p)=>e.jsxs("div",{children:[e.jsx("img",{width:190,height:150,src:P.img,alt:"product"},p),e.jsx(re,{onClick:()=>D(p,P.id),className:F.icon})]},p))}),e.jsx("div",{className:F.button_wrapper,children:e.jsx("button",{className:F.button,children:x?e.jsx("img",{className:F.loader,src:fe,alt:"loader"}):l?"Update":"Add"})})]})]})})},ue=({setIsInfoModalOpen:h,product:r,isPackage:l})=>{var y;const $={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:1},desktop:{breakpoint:{max:3e3,min:1024},items:1},tablet:{breakpoint:{max:1024,min:550},items:1},mobile:{breakpoint:{max:550,min:0},items:1}},o=({next:i,previous:C})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${N.carousel_button} ${N.carousel_button_left}`,onClick:()=>C(),children:e.jsx(Me,{size:35})}),e.jsx("button",{className:`${N.carousel_button} ${N.carousel_button_right}`,onClick:()=>i(),children:e.jsx(De,{size:35})})]});return e.jsx("div",{className:N.wrapper,children:e.jsxs("div",{className:N.modal,children:[e.jsxs("div",{className:N.heading_container,children:[e.jsxs("h4",{children:[l?"Package":"Product"," Info"]}),e.jsx("div",{className:N.d_flex,children:e.jsx(V,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),e.jsx(Ae,{responsive:$,arrows:!1,showDots:!0,className:N.carousel,customButtonGroup:e.jsx(o,{}),children:(y=r==null?void 0:r.imageUrl)==null?void 0:y.map(i=>e.jsx("img",{className:N.carousel_img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${i}`,alt:l?"Package":"Product"},i))}),e.jsxs("div",{className:N.contianer,children:[e.jsx("h5",{children:r==null?void 0:r.name}),(r==null?void 0:r.description)&&e.jsx("p",{children:ae(r==null?void 0:r.description)}),e.jsxs("div",{children:[e.jsxs("span",{children:["₹",r==null?void 0:r.price]}),e.jsxs("span",{children:["₹",r==null?void 0:r.offerPrice]})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:N.h3,children:"Products"}),e.jsx("div",{className:N.products_cotainer,children:r.products.map(i=>{var C,a,n,f,I;return e.jsxs("div",{className:N.product,children:[e.jsx("img",{className:N.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${(C=i==null?void 0:i.productId)==null?void 0:C.imageUrl[0]}`,alt:"product"}),e.jsxs("div",{className:N.product_info,children:[e.jsx("h5",{children:(a=i==null?void 0:i.productId)==null?void 0:a.name}),e.jsx("p",{children:ae((n=i==null?void 0:i.productId)==null?void 0:n.description)}),e.jsx("div",{className:N.d_flex,children:e.jsxs("div",{className:N.price_cotainer,children:[e.jsxs("p",{className:N.price,children:["₹",(f=i==null?void 0:i.productId)==null?void 0:f.price]}),e.jsxs("p",{className:N.price,children:["₹",(I=i==null?void 0:i.productId)==null?void 0:I.offerPrice]})]})})]})]})})})]})]})})},Ze="_wrapper_wqmyh_1",es="_modal_wqmyh_27",ss="_heading_container_wqmyh_47",as="_form_wqmyh_59",ns="_input_container_wqmyh_73",ts="_input_wqmyh_73",is="_d_flex_wqmyh_107",rs="_multi_select_wqmyh_119",os="_button_wrapper_wqmyh_151",cs="_button_wqmyh_151",ls="_loader_wqmyh_177",ds="_img_cotainer_wqmyh_187",ms="_icon_wqmyh_207",ps="_product_container_wqmyh_225",hs="_product_wqmyh_225",v={wrapper:Ze,modal:es,heading_container:ss,form:as,input_container:ns,input:ts,d_flex:is,multi_select:rs,button_wrapper:os,button:cs,loader:ls,img_cotainer:ds,icon:ms,product_container:ps,product:hs},_e=({setIsModalOpen:h,serviceId:r,getAllPackage:l,allProducts:$,selectedPackage:o})=>{var p,b,U,L;ne();const{checkAuthorization:y}=X(),i=()=>Math.floor(Math.random()*90)+10,C=(p=o==null?void 0:o.imageUrl)==null?void 0:p.map(s=>({img:`https://storage.googleapis.com/abhicares-backend-bucket/${s}`,id:i()})),[a,n]=d.useState({name:(o==null?void 0:o.name)||"",price:(o==null?void 0:o.price)||"",offerPrice:(o==null?void 0:o.offerPrice)||"",img:(o==null?void 0:o.imageUrl)||[],products:(o==null?void 0:o.products)||[],previewImages:C||[],uploadedImages:[]}),[f,I]=d.useState(!1),[A,w]=d.useState(!o),x=d.useRef(null),[W,J]=d.useState(!1),g=s=>{s.preventDefault(),w(()=>!0);const c=Array.from(s.target.files);if(c.length>3){M.error("Cannot upload files more than 3"),s.target.value=null;return}const u=k=>new Promise(q=>{const O=new FileReader;O.readAsDataURL(k),O.addEventListener("load",function(){q({img:this.result,id:i()})})});Promise.all(c.map(k=>u(k))).then(k=>{const q=c.length,O=[...a==null?void 0:a.img],K=[...a==null?void 0:a.previewImages];O.splice(0,q),K.splice(0,q);const Y=c.map((Z,te)=>({img:Z,id:k[te].id}));n(Z=>({...Z,previewImages:[...K,...k],img:O,uploadedImages:Y}))})},D=s=>{const{name:c,value:u}=s.target;n({...a,[c]:u})},S=(s,c)=>{console.log("id",c);let u=[...a.img].filter((O,K)=>K!==s),k=[...a.previewImages].filter(O=>O.id!==c),q=[...a.uploadedImages].filter(O=>O.id!==c);console.log("prev",k),console.log("db",u),x.current&&k.length===0&&(x.current.value=null),n({...a,img:u,previewImages:k,uploadedImages:q})},H=(s,c)=>{const{value:u,checked:k}=s.target;if(k)n({...a,products:[...a.products,{productId:u,name:c}]});else{const q=a.products.filter(O=>O.productId!==u);n({...a,products:q})}},G=s=>{console.log("id",s);const c=a.products.filter(u=>u.productId._id!==s);n({...a,products:c})},P=async s=>{if(s.preventDefault(),!a.name||!a.price||!a.offerPrice||a.products.length===0){M.error("All the fields are required");return}J(!0);const c=new FormData;c.append("name",a.name),c.append("price",a.price),c.append("offerPrice",a.offerPrice),c.append("serviceId",r),c.append("products",JSON.stringify(a.products));for(const u of a.uploadedImages)c.append("img",u.img);if(c.append("imageUrl",JSON.stringify(a.img)),o)try{const{data:u}=await R.patch(`https://abhicares.com/api/admin/update-package/${o._id}`,c,{withCredentials:!0});M.success("Package updated successfully"),l(),h(!1)}catch(u){h(!1),y(u),console.log(u)}finally{J(!1)}else try{const{data:u}=await R.post("https://abhicares.com/api/admin/create-package",c,{withCredentials:!0});M.success("Package added successfully"),l(),h(!1)}catch(u){h(!1),y(u),console.log(u)}finally{J(!1)}};return console.log("package",a),e.jsx("div",{className:v.wrapper,children:e.jsxs("div",{className:v.modal,children:[e.jsxs("div",{className:v.heading_container,children:[e.jsxs("h4",{children:[o?"Update":"Add"," Package"]}),e.jsx("div",{className:v.d_flex,children:e.jsx(V,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:P,className:v.form,children:[e.jsxs("div",{className:v.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:v.input,onChange:D,value:a.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:v.input_container,children:[e.jsx("label",{htmlFor:"price",children:"Price"}),e.jsx("input",{className:v.input,onChange:D,value:a.price,type:"number",name:"price",id:"price"})]}),e.jsxs("div",{className:v.input_container,children:[e.jsx("label",{htmlFor:"offerPrice",children:"Offer Price"}),e.jsx("input",{className:v.input,onChange:D,value:a.offerPrice,type:"number",name:"offerPrice",id:"offerPrice"})]}),e.jsxs("div",{className:v.input_container,children:[e.jsx("label",{htmlFor:"Products",children:"Products"}),e.jsxs("div",{onClick:()=>I(!f),className:`${v.input} ${v.d_flex}`,children:["select product",e.jsx(Ue,{})]}),f&&e.jsx("div",{className:v.multi_select,children:$==null?void 0:$.map(s=>e.jsxs("div",{className:v.d_flex,children:[e.jsx("label",{htmlFor:s.name,children:s.name}),e.jsx("input",{checked:a.products.some(c=>c.productId===s._id),onChange:c=>H(c,s==null?void 0:s.name),type:"checkbox",value:s._id,name:s.name,id:s.name})]},s._id))}),e.jsx("div",{className:v.product_container,children:((b=a==null?void 0:a.products)==null?void 0:b.length)>0&&((U=a==null?void 0:a.products)==null?void 0:U.map(s=>{var c;return e.jsxs("span",{className:v.product,children:[s!=null&&s.name?s==null?void 0:s.name:(c=s==null?void 0:s.productId)==null?void 0:c.name,e.jsx(re,{cursor:"pointer",size:20,onClick:()=>{var u;return G((u=s==null?void 0:s.productId)==null?void 0:u._id)}})]},s==null?void 0:s.name)}))})]}),e.jsxs("div",{className:v.input_container,children:[e.jsx("label",{htmlFor:"img",children:"Image"}),e.jsx("input",{ref:x,onChange:g,multiple:!0,type:"file",name:"img",id:"img"})]}),e.jsx("div",{className:v.img_cotainer,children:(L=a==null?void 0:a.previewImages)==null?void 0:L.map((s,c)=>e.jsxs("div",{children:[e.jsx("img",{width:190,height:150,src:s.img,alt:"package"},c),e.jsx(re,{onClick:()=>S(c,s.id),className:v.icon})]},c))}),e.jsx("div",{className:v.button_wrapper,children:e.jsx("button",{className:v.button,children:W?e.jsx("img",{className:v.loader,src:fe,alt:"loader"}):o?"Update":"Add"})})]})]})})},us="_wrapper_1s75l_1",_s="_modal_1s75l_27",gs="_heading_container_1s75l_47",fs="_form_1s75l_59",xs="_input_container_1s75l_73",js="_input_1s75l_73",vs="_button_wrapper_1s75l_105",ws="_button_1s75l_105",T={wrapper:us,modal:_s,heading_container:gs,form:fs,input_container:xs,input:js,button_wrapper:vs,button:ws},bs=({setIsModalOpen:h,serviceId:r,getServiceDetails:l})=>{const{checkAuthorization:$}=X(),[o,y]=d.useState({icon:"",iconPrev:""});d.useState(!1);const i=d.useRef(null),C=n=>{n.preventDefault();const f=n.target.files[0],I=new FileReader;I.readAsDataURL(f),I.addEventListener("load",function(){y({...o,icon:f,iconPrev:this.result})})},a=async n=>{if(n.preventDefault(),!o.icon){M.error("Choose icon");return}const f=new FormData;f.append("img",o.icon);try{const{data:I}=await R.post(`https://abhicares.com/api/admin/upload-service-icon/${r}`,f,{withCredentials:!0});M.success("Icon added successfully"),h(!1),l()}catch(I){h(!1),$(I),console.log(I)}};return e.jsx("div",{className:T.wrapper,children:e.jsxs("div",{className:T.modal,children:[e.jsxs("div",{className:T.heading_container,children:[e.jsx("h4",{children:"Upload Icon"}),e.jsx("div",{className:T.d_flex,children:e.jsx(V,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:a,className:T.form,children:[e.jsxs("div",{className:T.input_container,children:[e.jsx("label",{htmlFor:"icon",children:"Icon"}),e.jsx("input",{ref:i,onChange:C,type:"file",name:"icon",id:"icon"}),o.iconPrev&&e.jsx("div",{className:T.img_container,children:e.jsx("img",{width:200,height:150,src:o.iconPrev,alt:"feature"})}),!o.iconPrev&&o.icon&&e.jsx("div",{className:T.img_container,children:e.jsx("img",{width:200,height:150,src:`https://storage.googleapis.com/abhicares-backend-bucket/${o.icon}`,alt:"feature"})})]}),e.jsx("div",{className:T.button_wrapper,children:e.jsx("button",{className:T.button,children:"Upload"})})]})]})})},Is="_wrapper_1q4wh_1",Ns="_modal_1q4wh_27",$s="_heading_container_1q4wh_47",ys="_d_flex_1q4wh_59",Cs="_features_1q4wh_71",Ss="_feature_1q4wh_71",Ps="_feature_wrapper_1q4wh_103",ks="_feature_img_1q4wh_117",Fs="_feature_content_1q4wh_141",As="_icons_cotainer_1q4wh_151",Ms="_button_1q4wh_163",B={wrapper:Is,modal:Ns,heading_container:$s,d_flex:ys,features:Cs,feature:Ss,feature_wrapper:Ps,feature_img:ks,feature_content:Fs,icons_cotainer:As,button:Ms},Ds="_wrapper_6v0i8_1",Us="_modal_6v0i8_27",zs="_heading_container_6v0i8_47",Os="_form_6v0i8_59",qs="_input_container_6v0i8_73",Rs="_input_6v0i8_73",Ls="_button_wrapper_6v0i8_105",Es="_button_6v0i8_105",z={wrapper:Ds,modal:Us,heading_container:zs,form:Os,input_container:qs,input:Rs,button_wrapper:Ls,button:Es},ge=({setIsModalOpen:h,feature:r,getServiceDetails:l,serviceId:$,index:o})=>{console.log("index",o),ne();const{checkAuthorization:y}=X(),[i,C]=d.useState({name:(r==null?void 0:r.title)||"",description:(r==null?void 0:r.description)||"",img:(r==null?void 0:r.image)||"",previewImage:""});d.useState(!r);const a=d.useRef(null),n=A=>{A.preventDefault();const w=A.target.files[0],x=new FileReader;x.readAsDataURL(w),x.addEventListener("load",function(){C({...i,img:w,previewImage:this.result})})},f=A=>{const{name:w,value:x}=A.target;C({...i,[w]:x})},I=async A=>{if(A.preventDefault(),!i.name||!i.description||!i.img){M.error("All the fields are required");return}const w=new FormData;if(w.append("title",i.name),w.append("description",i.description),w.append("img",i.img),r&&w.append("index",o),r)try{const{data:x}=await R.patch(`https://abhicares.com/api/admin/update-service-feature/${$}`,w,{withCredentials:!0});M.success("Feature updated successfully"),h(!1),l()}catch(x){h(!1),y(x),console.log(x)}else try{const{data:x}=await R.post(`https://abhicares.com/api/admin/add-service-feature/${$}`,w,{withCredentials:!0});M.success("Feature added successfully"),h(!1),l()}catch(x){h(!1),y(x),console.log(x)}};return e.jsx("div",{className:z.wrapper,children:e.jsxs("div",{className:z.modal,children:[e.jsxs("div",{className:z.heading_container,children:[e.jsxs("h4",{children:[r?"Update":"Add"," Feature"]}),e.jsx("div",{className:z.d_flex,children:e.jsx(V,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:I,className:z.form,children:[e.jsxs("div",{className:z.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:z.input,onChange:f,value:i.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:z.input_container,children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("input",{className:z.input,onChange:f,value:i.description,type:"text",name:"description",id:"description"})]}),e.jsxs("div",{className:z.input_container,children:[e.jsx("label",{htmlFor:"imageUrl",children:"Image"}),e.jsx("input",{ref:a,onChange:n,type:"file",name:"imageUrl",id:"imageUrl"}),i.previewImage&&e.jsx("div",{className:z.img_container,children:e.jsx("img",{width:200,height:150,src:i.previewImage,alt:"feature"})}),!i.previewImage&&i.img&&e.jsx("div",{className:z.img_container,children:e.jsx("img",{width:200,height:150,src:`https://storage.googleapis.com/abhicares-backend-bucket/${i.img}`,alt:"feature"})})]}),e.jsxs("div",{className:z.button_wrapper,children:[e.jsx("button",{className:z.button,onClick:()=>h(!1),children:"Cancel"}),e.jsx("button",{className:z.button,children:r?"Update":"Add"})]})]})]})})},Bs=({setIsModalOpen:h,allFeatures:r=[],getServiceDetails:l,serviceId:$})=>{X(),ne();const[o,y]=d.useState(!1),[i,C]=d.useState(!1),[a,n]=d.useState(!1),[f,I]=d.useState(""),[A,w]=d.useState(null),x=async g=>{var D;g.preventDefault();try{const S=await R.post(`https://abhicares.com/api/admin/delete-service-feature/${$}?title=${f==null?void 0:f.title}`,{},{withCredentials:!0});S.status===200&&(console.log("feature deleted successfully",S),M.success((D=S==null?void 0:S.data)==null?void 0:D.message),l(),n(!1))}catch(S){console.log(S)}},W=async(g,D)=>{I(g),w(D),C(!0)},J=async g=>{I(g),n(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:B.wrapper,children:e.jsxs("div",{className:B.modal,children:[e.jsxs("div",{className:B.heading_container,children:[e.jsx("h4",{children:"Features"}),e.jsxs("div",{className:B.d_flex,children:[e.jsx("button",{className:B.button,onClick:()=>y(!0),children:"Add Feature"}),e.jsx(V,{onClick:()=>h(!1),cursor:"pointer",size:26})]})]}),e.jsxs("div",{className:B.features,children:[r.length===0&&e.jsx("p",{children:"No features found"}),r==null?void 0:r.map((g,D)=>e.jsxs("div",{className:B.feature,children:[e.jsxs("div",{className:B.feature_wrapper,children:[e.jsx("div",{className:B.feature_img,children:e.jsx("img",{src:`https://storage.googleapis.com/abhicares-backend-bucket/${g==null?void 0:g.image}`,alt:"feature"})}),e.jsxs("div",{className:B.feature_content,children:[e.jsx("h5",{children:g==null?void 0:g.title}),e.jsx("p",{children:g==null?void 0:g.description})]})]}),e.jsxs("div",{className:B.icons_cotainer,children:[e.jsx(Fe,{onClick:()=>W(g,D),size:22,cursor:"pointer"}),e.jsx(oe,{onClick:()=>J(g),color:"red",size:22,cursor:"pointer"})]})]}))]})]})}),o&&e.jsx(ge,{setIsModalOpen:y,getServiceDetails:l,serviceId:$}),i&&e.jsx(ge,{setIsModalOpen:C,feature:f,getServiceDetails:l,serviceId:$,index:A}),a&&e.jsx(ce,{handleDelete:x,setState:n})]})},oa=()=>{const h=ne(),[r,l]=d.useState(!1),[$,o]=d.useState(!1),[y,i]=d.useState(!1),[C,a]=d.useState(!1),[n,f]=d.useState(!1),[I,A]=d.useState(!1),[w,x]=d.useState(!1),[W,J]=d.useState(!1),[g,D]=d.useState(!1),[S,H]=d.useState([]),[G,P]=d.useState([]),[p,b]=d.useState({}),[U,L]=d.useState({}),[s,c]=d.useState(""),[u,k]=d.useState(!0),[q,O]=d.useState(!0),[K,Y]=d.useState(!1),[Z,te]=d.useState(!0),[_,xe]=d.useState("");Ce();const m=Se(),{checkAuthorization:le}=X(),je=(t,j)=>{t.stopPropagation(),b(j),h(`/admin/services/${m==null?void 0:m.categoryId}/product/${m==null?void 0:m.serviceId}/info`,{state:{product:j,isPackage:!1}})},ve=(t,j)=>{t.stopPropagation(),c(j),h(`/admin/services/${m==null?void 0:m.categoryId}/product/${m==null?void 0:m.serviceId}/info`,{state:{product:j,isPackage:!0}})},we=(t,j)=>{t.stopPropagation(),b(j),i(!I)},be=(t,j)=>{t.stopPropagation(),L(j),D(!g)},ie=async()=>{try{const{data:t}=await R.get(`https://abhicares.com/api/admin/get-service-details/${m==null?void 0:m.serviceId}`,{withCredentials:!0});console.log("service details",t),xe(t==null?void 0:t.service)}catch(t){console.log(t)}finally{te(!1)}},ee=async()=>{try{const{data:t}=await R.get(`https://abhicares.com/api/admin/get-service-product/${m==null?void 0:m.serviceId}`,{withCredentials:!0});H(t.data)}catch(t){console.log(t)}finally{O(!1)}},se=async()=>{try{const{data:t}=await R.get(`https://abhicares.com/api/admin/get-service-package/${m==null?void 0:m.serviceId}`,{withCredentials:!0});console.log(t),P(t.data)}catch(t){console.log(t)}finally{k(!1)}};d.useEffect(()=>{ee(),se(),ie()},[]);const Ie=async()=>{try{console.log(p);const{data:t}=await R.delete(`https://abhicares.com/api/admin/delete-product/${p}`,{withCredentials:!0});M.success("Product deleted successfully"),ee(),A(!I)}catch(t){console.log(t),A(!1),le(t)}},Ne=(t,j)=>{t.stopPropagation(),b(j),A(!I)},$e=(t,j)=>{t.stopPropagation(),c(j),x(!w)},ye=async()=>{try{const{data:t}=await R.delete(`https://abhicares.com/api/admin/delete-package/${s}`,{withCredentials:!0});console.log(t),M.success("Package deleted successfully"),se(),x(!w)}catch(t){console.log(t),x(!1),le(t)}};return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{children:e.jsxs("div",{className:E["services-wrapper"],children:[e.jsxs("div",{className:Q.service_info_wrapper,children:[e.jsxs("div",{className:Q.img_wrapper,children:[(_==null?void 0:_.icon)&&e.jsx("img",{onClick:()=>o(!0),className:Q.icon,src:`https://storage.googleapis.com/abhicares-backend-bucket/${_.icon}`,alt:"icon"}),e.jsxs("div",{className:Q.service_info,children:[e.jsx("h5",{children:_==null?void 0:_.name}),e.jsx("div",{children:e.jsxs("p",{children:["Starting Price: ₹",_==null?void 0:_.startingPrice]})}),e.jsx("p",{children:(_==null?void 0:_.description)&&ae(_==null?void 0:_.description)}),!(_!=null&&_.icon)&&e.jsx("button",{className:Q.button,onClick:()=>o(!0),children:"Upload Icon"})]})]}),e.jsx("button",{className:Q.button,onClick:()=>Y(!0),children:"Update Features"})]}),e.jsxs("div",{className:E["services-header"],children:[e.jsx("h4",{children:"Products"}),e.jsx("button",{onClick:()=>l(!0),className:E.services_add_btn,children:e.jsx("img",{src:de,alt:"add product"})})]}),e.jsxs("div",{className:E.card_container,children:[!q&&S.length===0&&e.jsx("p",{children:"No products found"}),q&&S.length===0&&e.jsx(me,{}),S==null?void 0:S.map(t=>e.jsxs("div",{onClick:j=>je(j,t),className:E.card,children:[e.jsx("img",{src:`https://storage.googleapis.com/abhicares-backend-bucket/${t.imageUrl[0]}`,alt:"product"}),e.jsxs("div",{children:[e.jsxs("div",{className:Q.heading_container,children:[e.jsx("h5",{children:t.name}),e.jsxs("div",{className:E.icon_container,children:[e.jsx(pe,{onClick:j=>we(j,t),size:20}),e.jsx(oe,{onClick:j=>Ne(j,t._id),size:22,color:"red"})]})]}),e.jsx("p",{children:ae(t.description)})]})]},t._id))]}),e.jsxs("div",{className:E["services-header"],children:[e.jsx("h4",{children:"Packages"}),e.jsx("button",{onClick:()=>J(!0),className:E.services_add_btn,children:e.jsx("img",{src:de,alt:"add package"})})]}),e.jsxs("div",{className:E.card_container,children:[!u&&G.length===0&&e.jsx("p",{children:"No packages found"}),u&&G.length===0&&e.jsx(me,{}),G==null?void 0:G.map(t=>e.jsxs("div",{onClick:j=>ve(j,t),className:E.card,children:[e.jsx("img",{src:`https://storage.googleapis.com/abhicares-backend-bucket/${t.imageUrl[0]}`,alt:"package"}),e.jsx("div",{children:e.jsxs("div",{className:Q.heading_container,children:[e.jsx("h5",{children:t.name}),e.jsxs("div",{className:E.icon_container,children:[e.jsx(pe,{onClick:j=>be(j,t),size:20}),e.jsx(oe,{onClick:j=>$e(j,t._id),size:22,color:"red"})]})]})})]},t._id))]})]})}),C&&e.jsx(ue,{product:p,setIsInfoModalOpen:a}),n&&e.jsx(ue,{isPackage:!0,product:s,setIsInfoModalOpen:f}),r&&e.jsx(he,{serviceId:m==null?void 0:m.serviceId,setIsModalOpen:l,getAllProducts:ee}),y&&e.jsx(he,{serviceId:m==null?void 0:m.serviceId,setIsModalOpen:i,product:p,getAllProducts:ee}),$&&e.jsx(bs,{setIsModalOpen:o,serviceId:_==null?void 0:_._id,getServiceDetails:ie}),W&&e.jsx(_e,{serviceId:m==null?void 0:m.serviceId,setIsModalOpen:J,getAllPackage:se,allProducts:S}),g&&e.jsx(_e,{selectedPackage:U,serviceId:m==null?void 0:m.serviceId,setIsModalOpen:D,getAllPackage:se,allProducts:S}),I&&e.jsx(ce,{setState:A,handleDelete:Ie}),w&&e.jsx(ce,{setState:x,handleDelete:ye}),K&&e.jsx(Bs,{setIsModalOpen:Y,allFeatures:_==null?void 0:_.features,getServiceDetails:ie,serviceId:_==null?void 0:_._id})]})};export{oa as default};
