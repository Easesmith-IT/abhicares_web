import{r as o,h as H,_ as ss,j as s,i as T,k as S,l as U,m as B,n as Y,f as R,e as es,o as is,u as ts}from"./index-iVe9Vivd.js";import{l as q,L as z}from"./Loader-BFdpHLnG.js";import{l as G}from"./rolling-white-BBE_8u84.js";import{H as ns,a as cs}from"./index.esm-C_6i7GKn.js";import{B as J,a as K,b as as,C as os}from"./CartItem-dpnyKHax.js";import{c as i}from"./Modal.module-xeZ_p1n2.js";import{M as rs,a as ls,u as _s,A as ds}from"./index.esm-BWkUA85f.js";import{I as ms,a as ps}from"./index.esm-CeT0r-lM.js";import{G as fs}from"./iconBase-CW1Jb1pT.js";import{C as hs}from"./index-Dww7aYEL.js";/* empty css               */import{p as Q}from"./index-Dnw9itFl.js";import{u as xs}from"./useDeleteApiReq-D1sOSnjd.js";import{D as us}from"./DeleteModal-BKAyOPvS.js";import{A as X}from"./AddReviewModal-C_0frRok.js";import{f as js}from"./index-h5yRQfKO.js";import{S as gs}from"./index-BAhRdxJu.js";/* empty css                 */import{R as Z}from"./react-stars-CGz6VW3M.js";import{W as vs}from"./WebsiteWrapper-DKnIxjBs.js";import"./usePatchApiReq-DgT57iow.js";import"./usePostApiReq-CXvXU-pP.js";import"./index.esm-Ck0M7SmQ.js";import"./Button-D7Y-_WuR.js";const bs="_product_page_pl7mf_1",Ns="_container_pl7mf_9",ys="_heading_pl7mf_21",ws="_booking_pl7mf_31",ks="_star_container_pl7mf_43",Is="_booking_span_pl7mf_63",Cs="_wrapper_pl7mf_71",Ss="_services_border_pl7mf_83",$s="_select_service_p_pl7mf_103",As="_select_service_p_div_pl7mf_121",Ls="_services_container_pl7mf_133",Ms="_service_pl7mf_83",Os="_service_img_pl7mf_163",Rs="_service_p_pl7mf_175",Bs="_selected_service_pl7mf_187",zs="_selected_service_h2_pl7mf_209",Es="_sub_services_container_pl7mf_221",Fs="_sub_service_pl7mf_221",Ts="_badge_pl7mf_245",Us="_badge_span_pl7mf_267",qs="_info_container_pl7mf_279",Gs="_info_container_left_pl7mf_297",Vs="_dashed_underline_pl7mf_305",Ws="_sub_service_h4_pl7mf_317",Hs="_sub_service_star_container_pl7mf_325",Ys="_sub_service_booking_span_pl7mf_337",Js="_price_time_container_pl7mf_345",Ks="_price_pl7mf_345",Qs="_dot_time_container_pl7mf_369",Xs="_dot_pl7mf_369",Zs="_time_pl7mf_395",Ps="_d_flex_pl7mf_403",Ds="_button_pl7mf_417",se="_addToCartBtn_pl7mf_441",ee="_list_container_pl7mf_457",ie="_list_pl7mf_457",te="_list_first_span_pl7mf_483",ne="_list_second_span_pl7mf_491",ce="_package_button_pl7mf_499",ae="_product_pl7mf_1",oe="_product_info_pl7mf_559",re="_img_pl7mf_573",le="_price_cotainer_pl7mf_591",_e="_right_section_pl7mf_627",de="_cart_detail_box_pl7mf_647",me="_view_cart_button_pl7mf_661",pe="_right_section_common_button_pl7mf_679",fe="_sm_cart_pl7mf_693",he="_offer_container_pl7mf_701",xe="_offer_pl7mf_701",ue="_offer_left_div_pl7mf_727",je="_offer_img_outer_div_pl7mf_747",ge="_offer_left_div_p_pl7mf_767",ve="_offer_left_div_first_p_pl7mf_777",be="_sm_cart_span_pl7mf_895",Ne="_max_lg_hidden_pl7mf_933",ye="_min_lg_hidden_pl7mf_979",n={product_page:bs,container:Ns,heading:ys,booking:ws,star_container:ks,booking_span:Is,wrapper:Cs,services_border:Ss,select_service_p:$s,select_service_p_div:As,services_container:Ls,service:Ms,service_img:Os,service_p:Rs,selected_service:Bs,selected_service_h2:zs,sub_services_container:Es,sub_service:Fs,badge:Ts,badge_span:Us,info_container:qs,info_container_left:Gs,dashed_underline:Vs,sub_service_h4:Ws,sub_service_star_container:Hs,sub_service_booking_span:Ys,price_time_container:Js,price:Ks,dot_time_container:Qs,dot:Xs,time:Zs,d_flex:Ps,button:Ds,addToCartBtn:se,list_container:ee,list:ie,list_first_span:te,list_second_span:ne,package_button:ce,product:ae,product_info:oe,img:re,price_cotainer:le,right_section:_e,cart_detail_box:de,view_cart_button:me,right_section_common_button:pe,sm_cart:fe,offer_container:he,offer:xe,offer_left_div:ue,offer_img_outer_div:je,offer_left_div_p:ge,offer_left_div_first_p:ve,sm_cart_span:be,max_lg_hidden:Ne,min_lg_hidden:ye};function E(e){return fs({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"}}]})(e)}const we=({review:e,isUser:C=!1,getAllReviews:t})=>{var h,f;const{res:d,fetchData:l,isLoading:p}=xs(),[x,u]=o.useState(!1),[w,j]=o.useState(!1),_=H("userInfo"),b=_==null?void 0:_.name,c=_==null?void 0:_.id;console.log("review",e);const $=async()=>{l(`/shopping/delete-product-review/${e._id}`)};return o.useEffect(()=>{((d==null?void 0:d.status)===200||(d==null?void 0:d.status)===201)&&(ss.success("Review deleted successfully"),j(!1),t())},[d]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:i.customer_review,children:[s.jsxs("div",{className:i.customer_review_left,children:[s.jsxs("div",{className:i.customer_info,children:[s.jsx("img",{className:i.customer_img,src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTa6YvRump6DC1zR3Bu5fz9358Gcgviuu5nag&usqp=CAU",alt:"customer"}),s.jsxs("div",{className:i.customer_info_right,children:[s.jsx("p",{className:i.customer_name,children:(h=e==null?void 0:e.userId)!=null&&h.name?e.userId.name:b}),s.jsx("p",{className:i.review_date,children:js(new Date(e.createdAt),"MMMM yyyy")})]})]}),s.jsx("h5",{className:i.h5,children:e.title}),s.jsx("p",{className:i.customer_review_p,children:e.content})]}),s.jsxs("div",{className:i.customer_review_right,children:[s.jsxs("div",{className:i.rating_staricon_num_container,children:[s.jsx(E,{color:"black",size:10}),s.jsx("span",{className:i.rating_star_num,children:e.rating})]}),c===((f=e==null?void 0:e.userId)==null?void 0:f._id)&&s.jsxs("div",{className:i.d_flex,children:[s.jsx(rs,{onClick:()=>u(!0),cursor:"pointer",color:"black",size:15}),s.jsx(ls,{onClick:()=>j(!0),cursor:"pointer",color:"black",size:15})]})]})]}),x&&s.jsx(X,{isReviewModalOpen:x,setIsReviewModalOpen:u,id:e._id,review:e,getAllReviewsOfUser:t}),w&&s.jsx(us,{handleDelete:$,setState:j})]})},M=({ratingValue:e,ratingStar:C,maxRating:t=500})=>{const d=Math.min(e/t*100,100);return s.jsxs("div",{className:i.specific_star_rating_div,children:[s.jsxs("div",{className:i.rating_staricon_num_container,children:[s.jsx(E,{color:"black",size:10}),s.jsx("span",{className:i.rating_star_num,children:C})]}),s.jsx("div",{className:i["singlerating-bar-container"],children:s.jsx("div",{className:i["singlerating-bar"],style:{width:`${d||0}%`}})}),s.jsx("div",{className:i.specific_star_rating_total,children:e})]})},P=({product:e,setIsCartLoading:C,flag:t=!0,features:d})=>{var y;const[l,p]=o.useState(!1),[x,u]=o.useState({}),[w,j]=o.useState(!1),[_,b]=o.useState(!0),c=T(),$=async()=>{p(!l)};o.useEffect(()=>{(async()=>await c(S()))()},[]);const h=U(m=>m.cart);o.useEffect(()=>{var v;const m=(v=h==null?void 0:h.items)==null?void 0:v.find(k=>{var I;return((I=k==null?void 0:k.productId)==null?void 0:I._id)===e._id});u(m)},[S,h]);const f=async m=>{m.stopPropagation(),j(!0),t&&C(!0),await c(B({id:e._id,type:"product"})),await c(S()),j(!1),t&&C(!1)},N=async m=>{var v;m.stopPropagation(),j(!0),await c(B({id:(v=x==null?void 0:x.productId)==null?void 0:v._id,type:"product"})),await c(S()),j(!1)},g=async m=>{m.stopPropagation(),j(!0),await c(Y({itemId:x.productId._id,type:"product"})),await c(S()),j(!1)};return s.jsxs(s.Fragment,{children:[_&&s.jsx(gs,{height:260}),s.jsxs("div",{className:n.product,onClick:$,children:[s.jsx("img",{style:{display:_?"none":"block"},onLoad:()=>b(!1),className:n.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${e==null?void 0:e.imageUrl[0]}`,alt:"product"}),s.jsxs("div",{className:n.product_info,children:[s.jsx("h5",{children:e==null?void 0:e.name}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx(Z,{edit:!1,size:30,count:5,value:e==null?void 0:e.rating,color2:"#FF8A00"}),s.jsx("p",{children:e.rating}),"(",e==null?void 0:e.totalReviews,")"]}),s.jsx("p",{children:Q(e.description)}),s.jsxs("div",{className:n.d_flex,children:[s.jsxs("div",{className:n.price_cotainer,children:[s.jsxs("p",{className:n.price,children:["₹",e.price]}),s.jsxs("p",{className:n.price,children:["₹",e.offerPrice]})]}),(y=h==null?void 0:h.items)!=null&&y.find(m=>{var v;return((v=m==null?void 0:m.productId)==null?void 0:v._id)===(e==null?void 0:e._id)})?s.jsxs("button",{className:n.button,children:[s.jsx(J,{size:20,onClick:g}),s.jsx("span",{className:n.quantity,children:x==null?void 0:x.quantity}),s.jsx(K,{size:20,onClick:N})]}):s.jsx("button",{onClick:f,className:`${n.addToCartBtn}`,children:w?s.jsx("div",{className:q.img_container,children:s.jsx("img",{src:G,alt:"loader"})}):"Add"})]})]})]}),l&&s.jsx(D,{isProduct:!0,isOpen:l,handleOnclick:$,Data:e,features:d})]})},D=({isOpen:e,handleOnclick:C,Data:t,isProduct:d,features:l=[]})=>{var V;const{res:p,fetchData:x,isLoading:u}=_s(),[w,j]=o.useState([]),[_,b]=o.useState([]);o.useState([]);const[c,$]=o.useState(!0),[h,f]=o.useState(!1),[N,g]=o.useState(!1),y=H("userInfo"),m=y==null?void 0:y.id,{rating:v,ratingDistribution:k,totalReviews:I}=t||{};console.log("modal open",t),o.useEffect(()=>{const a=_.find(L=>{var W;return m===((W=L==null?void 0:L.userId)==null?void 0:W._id)});console.log("review obj",a),g(!a)},[_]);const O={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:1},desktop:{breakpoint:{max:3e3,min:1024},items:1},tablet:{breakpoint:{max:1024,min:550},items:1},mobile:{breakpoint:{max:550,min:0},items:1}},r=({next:a,previous:L})=>s.jsxs(s.Fragment,{children:[s.jsx("button",{className:`${i.carousel_button} ${i.carousel_button_left}`,onClick:()=>L(),children:s.jsx(ms,{size:35})}),s.jsx("button",{className:`${i.carousel_button} ${i.carousel_button_right}`,onClick:()=>a(),children:s.jsx(ps,{size:35})})]}),F=async()=>{try{const{data:a}=await R.get(`https://abhicares.com/api/shopping/get-package-product/${t._id}`);console.log("package products",a),j(a==null?void 0:a.data)}catch(a){console.log(a)}finally{$(!1)}},A=async()=>{x(`/shopping/get-product-review/${t._id}?type=${d?"product":"package"}`)};return o.useEffect(()=>{!d&&F(),A()},[]),o.useEffect(()=>{((p==null?void 0:p.status)===200||(p==null?void 0:p.status)===201)&&b(p==null?void 0:p.data.reviews)},[p]),s.jsx("div",{className:`${i.modal_overlay} ${e?i.modal_open:i.modal_close}`,children:s.jsxs("div",{className:i.modal_wrapper,children:[s.jsx("button",{onClick:C,className:i.modal_close,children:s.jsx(ds,{size:20})}),s.jsx("div",{className:i.modal_wrapper_overflow,children:s.jsxs("div",{className:i.modal,children:[t.imageUrl&&s.jsx(hs,{responsive:O,arrows:!1,showDots:!0,className:i.carousel,customButtonGroup:s.jsx(r,{}),children:(V=t==null?void 0:t.imageUrl)==null?void 0:V.map(a=>s.jsx("img",{className:i.carousel_img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${a}`,alt:"product"},a))}),s.jsxs("div",{className:i.modal_body,children:[s.jsxs("div",{className:i.border_bottom,children:[s.jsxs("div",{className:i.modal_header,children:[s.jsxs("div",{className:i.modal_header_left,children:[s.jsx("h3",{className:i.modal_header_left_h4,children:t.name}),s.jsxs("div",{className:i.rating,children:[s.jsx(E,{color:"gray",size:11}),s.jsxs("span",{className:i.rating_span,children:[t==null?void 0:t.rating," (",t==null?void 0:t.totalReviews,")"]})]}),s.jsx("div",{className:i.price_time_container,children:s.jsxs("div",{className:i.price_cotainer,children:[s.jsxs("span",{className:i.price,children:["₹",t.price]}),s.jsxs("span",{className:i.price,children:["₹",t.offerPrice]})]})})]}),s.jsx("div",{className:i.modal_header_right})]}),(t==null?void 0:t.description)&&s.jsx("p",{children:Q(t==null?void 0:t.description)})]}),!d&&s.jsxs("div",{className:i.products_cotainer,children:[s.jsx("h4",{children:"Products"}),w==null?void 0:w.map(a=>s.jsx(P,{product:a,flag:!1,features:l},a._id))]}),!d&&!c&&w.length===0&&s.jsx("p",{children:"No product found"}),!d&&c&&w.length===0&&s.jsx(z,{}),s.jsxs("div",{className:i.customer_reviews_section,children:[s.jsx("h4",{children:"Customer reviews"}),s.jsxs("div",{className:i.d_flex,children:[s.jsxs("div",{className:i.rating,children:[s.jsx(E,{color:"black",size:15}),s.jsx("span",{className:i.rating_span,children:v})]}),N&&s.jsx("button",{onClick:()=>f(!0),className:i.button,children:"Add Review"})]}),s.jsxs("p",{className:i.reviews,children:[I," reviews"]}),s.jsxs("div",{className:i.rating_stars_container,children:[s.jsx(M,{ratingStar:5,ratingValue:k[5],maxRating:I}),s.jsx(M,{ratingStar:4,ratingValue:k[4],maxRating:I}),s.jsx(M,{ratingStar:3,ratingValue:k[3],maxRating:I}),s.jsx(M,{ratingStar:2,ratingValue:k[2],maxRating:I}),s.jsx(M,{ratingStar:1,ratingValue:k[1],maxRating:I})]}),s.jsxs("div",{className:i.customer_reviews_container,children:[!u&&_.length===0&&s.jsx("p",{children:"No reviews found"}),u&&_.length===0&&s.jsx(z,{}),_==null?void 0:_.map(a=>s.jsx(we,{review:a,getAllReviews:A},a._id))]}),s.jsxs("div",{className:i.features_container,children:[s.jsx("h4",{children:"We Offer"}),(l==null?void 0:l.length)===0&&s.jsx("p",{children:"No features found"}),l==null?void 0:l.map(a=>s.jsxs("div",{className:i.feature,children:[s.jsx("div",{className:i.feature_img,children:s.jsx("img",{src:`https://storage.googleapis.com/abhicares-backend-bucket/${a==null?void 0:a.image}`,alt:"feature"})}),s.jsxs("div",{className:i.feature_content,children:[s.jsx("h5",{children:a==null?void 0:a.title}),s.jsx("p",{children:a==null?void 0:a.description})]})]}))]})]}),h&&s.jsx(X,{isReviewModalOpen:h,setIsReviewModalOpen:f,id:t._id,getAllReviewsOfUser:A})]})]})})]})})},ke=({singlePackage:e,serviceId:C,setIsCartLoading:t,features:d})=>{var N;const l=T(),[p,x]=o.useState(!1),[u,w]=o.useState({}),[j,_]=o.useState(!1);o.useEffect(()=>{(async()=>await l(S()))()},[]);const b=U(g=>g.cart);o.useEffect(()=>{var y;const g=(y=b==null?void 0:b.items)==null?void 0:y.find(m=>{var v;return((v=m==null?void 0:m.packageId)==null?void 0:v._id)===e._id});w(g)},[S,b]);const c=async()=>{x(!p)};console.log("singlepackage",e);const $=async()=>{_(!0),t(!0),await l(B({id:e._id,type:"package"})),await l(S()),_(!1),t(!1)},h=async()=>{var g;await l(B({id:(g=u==null?void 0:u.packageId)==null?void 0:g._id,type:"package"})),await l(S())},f=async()=>{await l(Y({itemId:u.packageId._id,type:"package"})),await l(S())};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:n.sub_service,children:[s.jsxs("button",{className:n.badge,style:{marginBottom:"20px"},children:[s.jsx(as,{color:"#12ACAC"}),s.jsx("span",{className:n.badge_span,children:"Packages"})]}),s.jsxs("div",{className:n.info_container,children:[s.jsxs("div",{className:n.info_container_left,children:[s.jsx("h5",{className:n.sub_service_h4,children:e.name}),s.jsx("div",{className:n.booking}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx(Z,{edit:!1,size:30,count:5,value:e==null?void 0:e.rating,color2:"#FF8A00"}),e.rating,"(",e==null?void 0:e.totalReviews,")"]}),s.jsx("p",{className:n.price_time_container,children:s.jsxs("div",{className:n.price_cotainer,children:[s.jsxs("span",{className:n.price,children:["₹",e.price]}),s.jsxs("span",{className:n.price,children:["₹",e.offerPrice]})]})})]}),s.jsx("div",{children:(N=b==null?void 0:b.items)!=null&&N.find(g=>{var y;return((y=g==null?void 0:g.packageId)==null?void 0:y._id)===(e==null?void 0:e._id)})?s.jsxs("button",{className:n.button,children:[s.jsx(J,{size:20,onClick:f}),s.jsx("span",{className:n.quantity,children:u==null?void 0:u.quantity}),s.jsx(K,{size:20,onClick:h})]}):s.jsx("button",{onClick:$,className:`${n.addToCartBtn}`,children:j?s.jsx("div",{className:q.img_container,children:s.jsx("img",{src:G,alt:"loader"})}):"Add"})})]}),s.jsx("button",{onClick:c,className:n.package_button,children:"View details"})]}),p&&s.jsx(D,{isProduct:!1,isOpen:p,handleOnclick:c,Data:e,serviceId:C,features:d})]})},Xe=()=>{var v,k,I,O;const[e,C]=o.useState([]),[t,d]=o.useState([]),[l,p]=o.useState(!0),[x,u]=o.useState(!0),[w,j]=o.useState(!1),[_,b]=o.useState({title:"",description:""}),c=U(r=>r.cart),$=T(),h=es(),{state:f}=is(),N=ts(),g=async()=>{try{const{data:r}=await R.get(`https://abhicares.com/api/content/get-seo/${N.serviceId}`),{seoTitle:F,seoDescription:A}=r==null?void 0:r.seo;b({title:F,description:A})}catch(r){console.log(r)}},y=async()=>{try{const{data:r}=await R.get(`https://abhicares.com/api/shopping/get-all-product/${N.serviceId}`);console.log("services",r),C(r.data)}catch(r){console.log(r)}finally{p(!1)}},m=async()=>{try{const{data:r}=await R.get(`https://abhicares.com/api/shopping/get-service-package/${N==null?void 0:N.serviceId}`);console.log("package",r),d(r.data)}catch(r){console.log(r)}finally{u(!1)}};return o.useEffect(()=>{y(),m(),g(),(async()=>await $(S()))()},[]),console.log("cart",c),s.jsx(ns,{children:s.jsxs(vs,{children:[s.jsxs(cs,{children:[s.jsx("title",{children:_.title}),s.jsx("meta",{name:"description",content:_.description})]}),s.jsx("section",{className:n.product_page,children:s.jsxs("div",{className:n.container,children:[s.jsx("h1",{className:n.heading,children:f==null?void 0:f.name}),s.jsx("div",{className:n.booking}),s.jsxs("div",{className:n.wrapper,children:[s.jsxs("div",{className:n.selected_service,children:[s.jsxs("div",{children:[s.jsx("h2",{className:n.selected_service_h2,children:"Bestseller Packages"}),s.jsxs("div",{className:n.sub_services_container,children:[!x&&(t==null?void 0:t.length)===0&&s.jsx("p",{children:"No packages found"}),x&&(t==null?void 0:t.length)===0&&s.jsx(z,{}),t==null?void 0:t.map(r=>s.jsx(ke,{singlePackage:r,serviceId:N==null?void 0:N.serviceId,setIsCartLoading:j,features:f==null?void 0:f.features},r==null?void 0:r._id))]})]}),s.jsxs("div",{className:n.products_cotainer,children:[s.jsx("h2",{children:"Services"}),!l&&(e==null?void 0:e.length)===0&&s.jsx("p",{children:"No products found"}),l&&(e==null?void 0:e.length)===0&&s.jsx(z,{}),e==null?void 0:e.map(r=>s.jsx(P,{product:r,setIsCartLoading:j,features:f==null?void 0:f.features}))]})]}),((v=c==null?void 0:c.items)==null?void 0:v.length)!==0&&s.jsxs("div",{className:n.sm_cart,children:[s.jsxs("span",{className:n.sm_cart_span,children:["₹",c.totalPrice||0]}),s.jsx("button",{onClick:()=>h("/checkout"),className:`${n.button} ${n.view_cart_button}`,children:"View Cart"})]}),s.jsx("div",{className:`${n.right_section} ${n.max_lg_hidden}`,children:s.jsxs("div",{className:n.cart_detail_box,children:[((k=c==null?void 0:c.items)==null?void 0:k.length)!==0&&s.jsxs("button",{onClick:()=>h("/checkout"),className:`${n.button} ${n.view_cart_button}`,children:[s.jsxs("span",{children:["₹",c.totalPrice]}),s.jsx("span",{children:w?s.jsxs("div",{className:q.img_container,children:[s.jsx("img",{src:G,alt:"loader"}),"Loading"]}):"View Cart"})]}),(I=c==null?void 0:c.items)==null?void 0:I.map(r=>s.jsx(os,{item:r},r._id)),((O=c==null?void 0:c.items)==null?void 0:O.length)===0&&s.jsx("p",{children:"No items in your cart"})]})})]})]})})]})})};export{Xe as default};
