import{r as l,e as M,j as e,f,_ as C,o as q}from"./index-DcmPn4CU.js";import{c as r,W as B}from"./Wrapper-DJK2U0ns.js";import{R as y}from"./index.esm-CmtCPrD7.js";import"./index-D96K2ggI.js";/* empty css                   */import{u as D}from"./useAuthorization-CuiRZqkS.js";import{F as V}from"./index.esm-CeDS8YIT.js";import{a as G}from"./LogoutModal-Di1XuGXS.js";import{D as H}from"./DeleteModal-CD9SUXxA.js";import{L as A}from"./Loader-UGYhpWDA.js";import{b as J}from"./index.esm-7S8pM4Fp.js";import"./index-CyNR1zuL.js";import{h as K}from"./jspdf-html2canvas.min-Ds1XyINr.js";import"./logo -C1Nz5jdc.js";import"./iconBase-BJ2zDtiE.js";const Q="_wrapper_1s75l_1",X="_modal_1s75l_27",Y="_heading_container_1s75l_47",Z="_form_1s75l_59",ee="_input_container_1s75l_73",se="_input_1s75l_73",ne="_button_wrapper_1s75l_105",te="_button_1s75l_105",p={wrapper:Q,modal:X,heading_container:Y,form:Z,input_container:ee,input:se,button_wrapper:ne,button:te},U=({setIsModalOpen:d,user:n="",getAllUsers:o})=>{const{checkAuthorization:h}=D(),[a,_]=l.useState({name:(n==null?void 0:n.name)||"",phone:(n==null?void 0:n.phone)||"",status:(n==null?void 0:n.status)||!0}),u=i=>{const{name:c,value:x}=i.target;_({...a,[c]:x})};M();const s=async i=>{if(i.preventDefault(),!a.name||!a.phone||!a.status){alert("alert");return}if(n)try{const{data:c}=await f.patch(`https://abhicares.com/api/admin/update-user/${n._id}`,{...a},{withCredentials:!0});console.log(c),C.success("User updated successfully"),o(),d(!1)}catch(c){console.log(c),d(!1),h(c)}else try{const{data:c}=await f.post("https://abhicares.com/api/admin/create-user",{...a},{withCredentials:!0});console.log(c),C.success("User added successfully"),o(),d(!1)}catch(c){console.log(c),d(!1),h(c)}};return e.jsx("div",{className:p.wrapper,children:e.jsxs("div",{className:p.modal,children:[e.jsxs("div",{className:p.heading_container,children:[e.jsxs("h4",{children:[n?"Update":"Add"," User"]}),e.jsx("div",{className:p.d_flex,children:e.jsx(y,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:s,className:p.form,children:[e.jsxs("div",{className:p.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:p.input,onChange:u,value:a.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:p.input_container,children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{className:p.input,onChange:u,value:a.phone,type:"number",name:"phone",id:"phone"})]}),e.jsxs("div",{className:p.input_container,children:[e.jsx("label",{htmlFor:"status",children:"Status"}),e.jsxs("select",{onChange:u,value:a.status,className:p.input,name:"status",id:"status",children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"InActive"})]})]}),e.jsx("div",{className:p.button_wrapper,children:e.jsx("button",{className:p.button,children:n?"Update":"Add"})})]})]})})},ae="_wrapper_1c8xw_1",oe="_modal_1c8xw_27",ce="_heading_container_1c8xw_47",re="_contianer_1c8xw_59",le="_mt_1c8xw_85",ie="_btn_1c8xw_95",N={wrapper:ae,modal:oe,heading_container:ce,contianer:re,mt:le,btn:ie},de="_wrapper_1uuh7_1",he="_modal_1uuh7_27",pe="_heading_container_1uuh7_47",_e="_form_1uuh7_59",ue="_input_container_1uuh7_73",me="_input_1uuh7_73",xe="_button_wrapper_1uuh7_105",je="_button_1uuh7_105",ge="_addresses_container_1uuh7_131",fe="_address_1uuh7_131",g={wrapper:de,modal:he,heading_container:pe,form:_e,input_container:ue,input:me,button_wrapper:xe,button:je,addresses_container:ge,address:fe},be=({setIsModalOpen:d,userId:n})=>{const[o,h]=l.useState([]),[a,_]=l.useState(!0),u=async()=>{try{const{data:s}=await f.get(`https://abhicares.com/api/admin/get-all-addresses/${n}`,{withCredentials:!0});h(s.addresses),console.log("address",s),_(!1)}catch(s){_(!1),console.log(s)}};return l.useEffect(()=>{u()},[]),e.jsx("div",{className:g.wrapper,children:e.jsxs("div",{className:g.modal,children:[e.jsxs("div",{className:g.heading_container,children:[e.jsx("h4",{children:"User Addresses"}),e.jsx("div",{className:g.d_flex,children:e.jsx(y,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),e.jsxs("div",{className:g.addresses_container,children:[!a&&(o==null?void 0:o.length)===0&&e.jsx("p",{children:"No address found"}),a&&(o==null?void 0:o.length)===0&&e.jsx(A,{}),o&&o.map(s=>e.jsx("div",{className:g.address,children:e.jsxs("div",{className:g.partner_left,children:[e.jsxs("p",{children:[e.jsx("b",{children:"Address Line:"})," ",s.addressLine]}),e.jsxs("p",{children:[e.jsx("b",{children:"Landmark:"})," ",s.landmark]}),e.jsxs("p",{children:[e.jsx("b",{children:"City:"})," ",s.city]}),e.jsxs("p",{children:[e.jsx("b",{children:"Pincode:"})," ",s.pincode]}),e.jsxs("p",{children:[e.jsx("b",{children:"Default Address:"})," ",`${s.defaultAddress}`]}),e.jsxs("p",{children:[e.jsx("b",{children:"Co-ordinates:"})," ",`${s.location.coordinates[0]}, ${s.location.coordinates[1]}`]})]})}))]})]})})},Ne=({setIsUserInfoModalOpen:d,user:n})=>{console.log(n);const[o,h]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:N.wrapper,children:e.jsxs("div",{className:N.modal,children:[e.jsxs("div",{className:N.heading_container,children:[e.jsx("h4",{children:"User Info"}),e.jsxs("div",{className:N.d_flex,children:[e.jsx("button",{onClick:()=>h(!0),className:N.btn,children:"View all address"}),e.jsx(y,{onClick:()=>d(!1),cursor:"pointer",size:26})]})]}),e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsxs("p",{children:[e.jsx("b",{children:"Name:"})," ",n==null?void 0:n.name]}),e.jsxs("p",{children:[e.jsx("b",{children:"Phone:"})," ",n==null?void 0:n.phone]})]})]})}),o&&e.jsx(be,{userId:n._id,setIsModalOpen:h})]})},we="_wrapper_ig0nd_1",ve="_modal_ig0nd_27",ye="_heading_container_ig0nd_45",$e="_contianer_ig0nd_61",Ce="_mt_ig0nd_87",Ae="_btn_container_ig0nd_95",Ie="_button_ig0nd_109",Se="_table_wrapper_ig0nd_125",Ue="_table_ig0nd_125",m={wrapper:we,modal:ve,heading_container:ye,contianer:$e,mt:Ce,btn_container:Ae,button:Ie,table_wrapper:Se,table:Ue},Me=({setIsModalOpen:d})=>{const[n,o]=l.useState([]),[h,a]=l.useState(!0),_=async()=>{try{const{data:s}=await f.get("https://abhicares.com/api/admin/get-users-data",{withCredentials:!0});console.log("all users",s),o(s==null?void 0:s.users)}catch(s){console.log(s)}finally{a(!1)}};l.useEffect(()=>{_()},[]);const u=()=>{K(document.querySelector("#table"),{jsPDF:{format:"a4"},imageType:"image/jpeg",output:"./pdf/generate.pdf"})};return e.jsx("div",{className:m.wrapper,children:e.jsxs("div",{className:m.modal,children:[e.jsxs("div",{className:m.heading_container,children:[e.jsx("h4",{children:"All Users"}),e.jsx("div",{className:m.d_flex,children:e.jsx(y,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),!h&&(n==null?void 0:n.length)===0&&e.jsx("p",{style:{padding:"20px"},children:"No users found"}),e.jsx("div",{style:{marginBottom:"20px"},children:h&&(n==null?void 0:n.length)===0&&e.jsx(A,{})}),(n==null?void 0:n.length)>0&&e.jsxs("div",{className:r["report-body"],children:[e.jsx("div",{id:"table",className:m.table_wrapper,children:e.jsxs("table",{border:"2px",className:m.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Locality"})]})}),e.jsx("tbody",{children:n.map((s,i)=>{var c,x,w,b;return e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px",textAlign:"left",paddingInline:"10px"},children:(c=s==null?void 0:s.userInfo)==null?void 0:c.name}),e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:(x=s==null?void 0:s.userInfo)==null?void 0:x.phone}),s!=null&&s.add?e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:`${(w=s==null?void 0:s.add)==null?void 0:w.city}, ${(b=s==null?void 0:s.add)==null?void 0:b.pincode}`}):e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:"No address found."})]},i)})})]})}),e.jsx("div",{className:m.btn_container,children:e.jsx("button",{className:m.button,onClick:u,children:"Download"})})]})]})})},He=()=>{const[d,n]=l.useState(!1),[o,h]=l.useState(!1),[a,_]=l.useState(!1),[u,s]=l.useState({}),[i,c]=l.useState([]),[x,w]=l.useState(!0),[b,I]=l.useState(!1),[k,S]=l.useState(!1);M();const{checkAuthorization:O}=D();q();const v=async()=>{try{const{data:t}=await f.get("https://abhicares.com/api/admin/get-all-user",{withCredentials:!0});console.log("all users",t),c(t.data)}catch(t){console.log(t)}finally{w(!1)}};l.useEffect(()=>{v()},[]);const L=t=>{s(t),h(!a)},z=t=>{s(t),I(!b)},F=t=>{s(t),_(!a)},E=async()=>{try{const{data:t}=await f.delete(`https://abhicares.com/api/admin/delete-user/${u}`,{withCredentials:!0});console.log(t),C.success("User deleted successfully"),v(),_(!a)}catch(t){console.log(t),_(!1),O(t)}},P=async t=>{const $=t.target.value;try{const{data:j}=await f.get(`https://abhicares.com/api/admin/search-user?search=${$}`,{withCredentials:!0});c(j.data)}catch(j){console.log(j)}};function T(t,$){let j=null;return function(W){j&&clearTimeout(j),j=setTimeout(()=>{t(W)},$)}}const R=()=>{S(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsxs("div",{className:r["report-container"],children:[e.jsxs("div",{className:r["report-header"],children:[e.jsx("h1",{className:r["recent-Articles"],children:"Customers"}),e.jsxs("div",{className:r.d_flex,children:[e.jsx("button",{className:r.btn,onClick:R,children:"Download"}),e.jsx("input",{onChange:T(P,1e3),className:r.input,type:"text",placeholder:"Search customers"})]})]}),e.jsxs("div",{className:r["report-body"],children:[e.jsxs("div",{className:r["report-topic-heading"],children:[e.jsx("h3",{className:r["t-op"],children:"User Name"}),e.jsx("h3",{className:r["t-op"],children:"Contact Number"}),e.jsx("h3",{className:r["t-op"],children:"Update/Delete"})]}),e.jsxs("div",{className:r.items,children:[!x&&(i==null?void 0:i.length)===0&&e.jsx("p",{children:"No users found"}),x&&(i==null?void 0:i.length)===0&&e.jsx(A,{}),i==null?void 0:i.map(t=>e.jsxs("div",{className:r.item1,children:[e.jsx("h3",{className:r["t-op-nextlvl"],children:t.name}),e.jsx("h3",{className:r["t-op-nextlvl"],children:t.phone}),e.jsxs("h3",{className:`${r["t-op-nextlvl"]}`,children:[e.jsx(J,{onClick:()=>z(t),cursor:"pointer",size:20}),e.jsx(V,{onClick:()=>L(t),cursor:"pointer",className:"ml-2",size:20}),e.jsx(G,{onClick:()=>F(t._id),cursor:"pointer",size:22,color:"red"})]})]},t._id))]})]})]})}),b&&e.jsx(Ne,{setIsUserInfoModalOpen:I,user:u}),d&&e.jsx(U,{setIsModalOpen:n,getAllUsers:v}),o&&e.jsx(U,{setIsModalOpen:h,user:u,getAllUsers:v}),a&&e.jsx(H,{setState:_,handleDelete:E}),k&&e.jsx(Me,{setIsModalOpen:S})]})};export{He as default};
