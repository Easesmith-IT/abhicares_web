import{j as s,r as a,_ as js,u as ts}from"./index-I-QjRnx0.js";import{W as fs}from"./Wrapper-BY0MUZnD.js";import{c as p}from"./Shared.module-DD54I-nI.js";import{c as m,s as d,R as gs,C as _s,W as Ns}from"./index.esm-DXZPNEM8.js";import{L as B}from"./Loader-DJYIHqme.js";import{R as F}from"./index.esm-MEfTCSon.js";import"./index-7eC6c092.js";import{f as is}from"./index-CdPvp2KC.js";import{u as $}from"./usePostApiReq-hUuV07yT.js";import{u as S}from"./index.esm-C3Z8P0YS.js";/* empty css                   */import"./logo -C1Nz5jdc.js";import"./useDispatch-PMR2IWSw.js";import"./iconBase-BpojMoAv.js";import"./useAuthorization-Ia5IpIJC.js";import"./usePatchApiReq-BvTl6UI0.js";const vs="_wrapper_62yar_1",bs="_modal_62yar_27",ys="_heading_container_62yar_47",Is="_contianer_62yar_59",Cs="_mt_62yar_85",Ds="_item_62yar_93",ks="_img_62yar_119",k={wrapper:vs,modal:bs,heading_container:ys,contianer:Is,mt:Cs,item:Ds,img:ks},cs=({setSellerOrderInfoModal:h,sellerOrder:n})=>{var o,r,N,i,g,_,c;if(console.log("seller-order",n),!n)return null;const x=!!n.package;return s.jsx("div",{className:k.wrapper,children:s.jsxs("div",{className:k.modal,children:[s.jsxs("div",{className:k.heading_container,children:[s.jsx("h4",{children:"Seller Order Info"}),s.jsx("div",{className:k.d_flex,children:s.jsx(F,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),s.jsxs("div",{className:k.contianer,children:[s.jsxs("p",{children:[s.jsx("b",{children:"Order Id:"})," ",n==null?void 0:n.orderId]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Date:"})," ",is(new Date(n.bookingDate),"dd-MM-yyyy")]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Time:"})," ",n==null?void 0:n.bookingTime]}),s.jsxs("p",{children:[s.jsx("b",{children:"Order Total:"})," ₹",n==null?void 0:n.orderValue]}),s.jsxs("p",{children:[s.jsx("b",{children:"Status: "}),n==null?void 0:n.status]})]}),s.jsx("h5",{children:x?"Package":"Product"}),s.jsxs("div",{className:k.item,children:[s.jsxs("div",{children:[s.jsx("img",{className:k.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${x?(o=n==null?void 0:n.package)==null?void 0:o.imageUrl[0]:(r=n==null?void 0:n.product)==null?void 0:r.imageUrl[0]}`,alt:"product"}),s.jsxs("div",{children:[s.jsx("h6",{children:x?"Package":"Product"}),s.jsx("p",{children:n.package?"Package":"Product"})]})]}),s.jsxs("p",{children:["Qty: ",n.quantity]}),s.jsxs("p",{children:["₹",x?n.package.offerPrice:n.product.offerPrice]})]}),s.jsxs("div",{style:{marginTop:"10px"},children:[s.jsx("h5",{children:"User Info"}),s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",(N=n==null?void 0:n.userId)==null?void 0:N.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone:"})," ",(i=n==null?void 0:n.userId)==null?void 0:i.phone]}),s.jsx("p",{children:s.jsx("b",{children:"Address Line:"})}),s.jsx("p",{children:(g=n==null?void 0:n.userAddress)==null?void 0:g.addressLine}),s.jsxs("p",{children:[s.jsx("b",{children:"Landmark:"})," ",(_=n==null?void 0:n.userAddress)==null?void 0:_.landmark]}),s.jsxs("p",{children:[s.jsx("b",{children:"Pincode:"})," ",(c=n==null?void 0:n.userAddress)==null?void 0:c.pincode]})]})]})})},As=({setIsUpdateModalOpen:h,getCashOutRequests:n,walletId:x})=>{console.log("walletId",x);const[o,r]=a.useState({amount:"",description:"",paymentId:""}),N=C=>{const{name:v,value:t}=C.target;r({...o,[v]:t})},{res:i,fetchData:g,isLoading:_}=$(),c=async C=>{if(C.preventDefault(),!o.amount){js.error("Amount is required");return}g("/admin/add-seller-cashout",{sellerWalletId:x,value:o.amount,payId:o.paymentId,description:o.description})};return a.useEffect(()=>{((i==null?void 0:i.status)===200||(i==null?void 0:i.status)===201)&&(h(!1),n(x))},[i]),s.jsx("div",{className:m.wrapper,children:s.jsxs("div",{className:m.modal,children:[s.jsxs("div",{className:m.heading_container,children:[s.jsx("h4",{children:"Add CashOut Request"}),s.jsx("div",{className:m.d_flex,children:s.jsx(F,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),s.jsxs("form",{onSubmit:c,className:m.form,children:[s.jsxs("div",{className:m.input_container,children:[s.jsx("label",{htmlFor:"amount",children:"Amount"}),s.jsx("input",{className:m.input,onChange:N,value:o.amount,type:"number",name:"amount",id:"amount"})]}),s.jsxs("div",{className:m.input_container,children:[s.jsx("label",{htmlFor:"description",children:"Description"}),s.jsx("textarea",{className:m.input,onChange:N,value:o.description,name:"description",id:"description"})]}),s.jsxs("div",{className:m.input_container,children:[s.jsx("label",{htmlFor:"paymentId",children:"Payment Id"}),s.jsx("input",{className:m.input,onChange:N,value:o.paymentId,type:"text",name:"paymentId",id:"paymentId"})]}),s.jsx("div",{className:m.button_wrapper,children:s.jsx("button",{disabled:_,className:m.button,children:_?"Adding...":"Add"})})]})]})})},Ss="_wrapper_1u1d0_1",Ps="_modal_1u1d0_27",ws="_heading_container_1u1d0_47",Es="_select_1u1d0_59",$s="_table_1u1d0_73",Ms="_button_1u1d0_81",Ls="_status_1u1d0_99",Vs="_tran_contianer_1u1d0_113",qs="_d_flex_1u1d0_131",Ws="_items_1u1d0_141",j={wrapper:Ss,modal:Ps,heading_container:ws,select:Es,table:$s,button:Ms,status:Ls,tran_contianer:Vs,d_flex:qs,items:Ws},Bs=({setIsSellerAssignedModalOpen:h})=>{const{res:n,fetchData:x,isLoading:o}=$(),{res:r,fetchData:N,isLoading:i}=S(),[g,_]=a.useState([]),[c,C]=a.useState(""),v=ts(),[t,M]=a.useState({startDate:"",endDate:""}),[P,f]=a.useState({}),[L,V]=a.useState(!1),e=u=>{f(u),V(!0)},w=u=>{const{name:y,value:q}=u.target;M({...t,[y]:q})},D=async()=>{N(`/admin/get-seller-order-list/${v==null?void 0:v.partnerId}?startDate=${t==null?void 0:t.startDate}&endDate=${t==null?void 0:t.endDate}`)};a.useEffect(()=>{D()},[t==null?void 0:t.startDate,t==null?void 0:t.endDate]),a.useEffect(()=>{((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&(console.log("getSellerOrdersListRes",r),_(r==null?void 0:r.data.sellerOrders))},[r]);const E=async u=>{const y=u.target.value;if(C(y),y===""){D();return}x(`/admin/get-seller-order-by-status/${v.partnerId}`,{status:y})};return a.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&_(n==null?void 0:n.data.sellerOrders)},[n]),s.jsxs("div",{className:j.wrapper,children:[s.jsxs("div",{className:j.modal,children:[s.jsxs("div",{className:j.heading_container,children:[s.jsx("h4",{children:"Partner Assigned Orders"}),s.jsxs("div",{className:j.d_flex,children:[s.jsxs("div",{style:{display:"flex",gap:"20px"},children:[s.jsxs("div",{children:[s.jsx("p",{children:"Start Date"}),s.jsx("input",{type:"date",name:"startDate",value:t.startDate,onChange:w,className:j.filter_input})]}),s.jsxs("div",{children:[s.jsx("p",{children:"End Date"}),s.jsx("input",{type:"date",name:"endDate",value:t.endDate,onChange:w,className:j.filter_input})]}),s.jsx("div",{style:{display:"flex",alignItems:"end"},children:s.jsxs("select",{onChange:E,value:c,className:j.select,name:"status",id:"status",children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"alloted",children:"Alloted"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]}),s.jsx(F,{onClick:()=>h(!1),cursor:"pointer",size:26})]})]}),s.jsxs("div",{className:j.table,children:[s.jsxs("div",{className:j.items,children:[s.jsx("h5",{children:"Booking Id"}),s.jsx("h5",{children:"Order Value"}),s.jsx("h5",{children:"Status"}),s.jsx("h5",{children:"Details"})]}),(i||o)&&s.jsx(B,{}),!i&&!o&&g.length===0&&s.jsx("p",{children:"No bookings found"}),s.jsx("div",{className:j.items_container,children:g==null?void 0:g.map(u=>s.jsxs("div",{className:j.items,children:[s.jsx("p",{children:u.bookingId}),s.jsx("p",{children:u.orderValue}),s.jsx("div",{children:s.jsx("span",{className:`${j.status}`,children:u.status})}),s.jsx("button",{onClick:()=>e(u),className:j.button,style:{color:"#2599ff"},children:"View Details"})]},u._id))})]})]}),L&&s.jsx(cs,{setSellerOrderInfoModal:V,sellerOrder:P})]})},ne=()=>{var K,X,Y,Z,R,O,ss,es,ns;const{res:h,fetchData:n,isLoading:x}=$(),{res:o,fetchData:r,isLoading:N}=$(),{res:i,fetchData:g,isLoading:_}=S(),{res:c,fetchData:C,isLoading:v}=S(),{res:t,fetchData:M,isLoading:P}=S(),{res:f,fetchData:L,isLoading:V}=S(),[e,w]=a.useState(""),[D,E]=a.useState([]);a.useState("");const[u,y]=a.useState(""),[q,ds]=a.useState({}),[os,T]=a.useState(!1),[ls,z]=a.useState(!1),[rs,H]=a.useState(!1),[b,hs]=a.useState(""),[A,us]=a.useState([]),[U,G]=a.useState(!1),I=ts();console.log("state",e),console.log("partnerstatus",u),a.useEffect(()=>{y(e==null?void 0:e.status)},[e]);const xs=async()=>{g(`/admin/get-seller-order-list/${I.partnerId}`)};a.useEffect(()=>{((i==null?void 0:i.status)===200||(i==null?void 0:i.status)===201)&&(console.log("getSellerOrdersListRes",i),E(i==null?void 0:i.data.sellerOrders))},[i]);const W=async()=>{C(`/admin/get-seller-wallet/${I==null?void 0:I.partnerId}`)};a.useEffect(()=>{((c==null?void 0:c.status)===200||(c==null?void 0:c.status)===201)&&(console.log("getWalletRes",c),c!=null&&c.data.wallet._id&&(J(c==null?void 0:c.data.wallet._id),hs(c==null?void 0:c.data.wallet)))},[c]);const J=async l=>{M(`/admin/get-seller-wallet-recent-cashout-requests/${l}`)};a.useEffect(()=>{xs(),W()},[]),a.useEffect(()=>{((t==null?void 0:t.status)===200||(t==null?void 0:t.status)===201)&&(console.log("getRequestsRes",t),us(t==null?void 0:t.data.cashouts))},[t]),a.useEffect(()=>{((h==null?void 0:h.status)===200||(h==null?void 0:h.status)===201)&&E(h==null?void 0:h.data.sellerOrders)},[h]);const ps=l=>{ds(l),T(!0)},Q=async()=>{L(`/admin/get-seller?sellerId=${I==null?void 0:I.partnerId}`)};a.useEffect(()=>{Q()},[]),a.useEffect(()=>{((f==null?void 0:f.status)===200||(f==null?void 0:f.status)===201)&&w(f==null?void 0:f.data.data)},[f]);const ms=async l=>{r("/admin/update-partner-status",{sellerId:I.partnerId,status:u})};return a.useEffect(()=>{u&&ms()},[u]),a.useEffect(()=>{((o==null?void 0:o.status)===200||(o==null?void 0:o.status)===201)&&Q()},[o]),s.jsxs(s.Fragment,{children:[s.jsx(fs,{children:s.jsxs("div",{children:[s.jsx("h2",{className:d.h2,children:"Partner Info"}),s.jsx("div",{children:s.jsxs("div",{className:d.contianer,children:[s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",e==null?void 0:e.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Joined Date:"})," ",(e==null?void 0:e.createdAt)&&is(new Date(e==null?void 0:e.createdAt),"dd/MM/yyyy")]}),s.jsxs("p",{children:[s.jsx("b",{children:"Gst Number:"})," ",e==null?void 0:e.gstNumber]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone"}),": ",e==null?void 0:e.phone]}),s.jsxs("p",{children:[s.jsx("b",{children:"Legal Name:"})," ",e==null?void 0:e.legalName]}),s.jsxs("p",{children:[s.jsx("b",{children:"Status:"})," ",s.jsx("span",{className:`${p.status} ${e.status==="APPROVED"?d.active:d.inactive}`,children:e.status}),s.jsxs("select",{onChange:l=>y(l.target.value),value:u,className:d.select,name:"partnerstatus",id:"partnerstatus",children:[s.jsx("option",{value:"IN-REVIEW",children:"In Review"}),s.jsx("option",{value:"APPROVED",children:"Approved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"}),s.jsx("option",{value:"HOLD",children:"Hold"})]})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Address:"})," ",`${(K=e==null?void 0:e.address)==null?void 0:K.addressLine}, ${(X=e==null?void 0:e.address)==null?void 0:X.city}, ${(Y=e==null?void 0:e.address)==null?void 0:Y.state}, ${(Z=e==null?void 0:e.address)==null?void 0:Z.pincode}`]}),s.jsxs("p",{className:p.mt,children:[s.jsx("b",{children:"Contact Person Email:"})," ",s.jsx("span",{style:{textDecoration:"underline"},children:(R=e==null?void 0:e.contactPerson)==null?void 0:R.email})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Contact Person Name:"})," ",(O=e==null?void 0:e.contactPerson)==null?void 0:O.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Contact Person Phone:"})," ",(ss=e==null?void 0:e.contactPerson)==null?void 0:ss.phone]}),s.jsxs("p",{children:[s.jsx("b",{children:"Category"}),": ",(es=e==null?void 0:e.categoryId)==null?void 0:es.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Online/Offline"}),": ",s.jsx("span",{style:{padding:"3px 20px",backgroundColor:e!=null&&e.online?"green":"red",color:"white",width:"100px",borderRadius:"5px",display:"inline-block",textAlign:"center"},children:e!=null&&e.online?"Online":"Offline"})]}),s.jsxs("p",{className:d.service_container,children:[s.jsx("b",{children:"Services"}),": ",(ns=e==null?void 0:e.services)==null?void 0:ns.map(l=>{var as;return s.jsx("span",{className:d.status,children:(as=l==null?void 0:l.serviceId)==null?void 0:as.name})})]})]})}),s.jsxs("div",{className:d.flex,style:{marginBottom:"30px"},children:[s.jsxs("div",{className:d.reportContainer,children:[s.jsxs("div",{className:p["report-header"],children:[s.jsx("h1",{className:p["recent-Articles"],children:"Partner Assigned Orders"}),s.jsx("div",{children:s.jsx("button",{onClick:()=>G(!0),style:{background:"black",color:"white",padding:"3px 10px"},children:"View All"})})]}),s.jsxs("div",{className:d["report-body"],children:[s.jsxs("div",{className:d["report-topic-heading"],children:[s.jsx("h3",{className:p["t-op"],style:{width:"180px"},children:"Booking Id"}),s.jsx("h3",{className:p["t-op"],style:{width:"110px"},children:"Order Value"}),s.jsx("h3",{className:p["t-op"],children:"Status"}),s.jsx("h3",{className:p["t-op"],children:"Details"})]}),(_||x)&&s.jsx(B,{}),s.jsxs("div",{className:p.items,children:[!_&&!x&&D.length===0&&s.jsx("p",{children:"No Partner order found"}),D==null?void 0:D.map(l=>s.jsxs("div",{className:d.item1,children:[s.jsx("h3",{className:p["t-op-nextlvl"],style:{width:"180px"},children:l.bookingId}),s.jsx("h3",{className:p["t-op-nextlvl"],style:{width:"110px",textAlign:"center"},children:l.orderValue}),s.jsx("h3",{className:`${p["t-op-nextlvl"]} ${d.status}`,children:l.status}),s.jsx("button",{onClick:()=>ps(l),className:p.button,style:{color:"#2599ff"},children:"View Details"})]},l._id))]})]})]}),s.jsxs("div",{className:d.reportContainer,children:[s.jsxs("div",{className:d.d_flex,children:[s.jsxs("div",{className:d.left,children:[s.jsxs("h3",{className:d.h3,children:[s.jsx(gs,{size:50})," Wallet"]}),s.jsxs("div",{className:d.d_flex,children:[s.jsx("h4",{children:"Balance"}),s.jsxs("p",{style:{marginLeft:"10px"},children:["₹",(b==null?void 0:b.balance)||0]})]})]}),s.jsx("div",{className:d.right,children:s.jsxs("div",{children:[s.jsx("button",{onClick:()=>z(!0),className:d.button,children:"View Wallet History"}),s.jsx("button",{onClick:()=>H(!0),className:d.button,style:{color:"black"},children:"Add Cashout"})]})})]}),s.jsx("button",{className:d.cash_btn,children:"Cashout Request"}),s.jsxs("div",{className:d.tran_contianer,children:[(v||P)&&A.length===0&&s.jsx(B,{}),!v&&!P&&A.length===0&&s.jsx("p",{children:"No cashOut Requests found"}),A==null?void 0:A.map(l=>s.jsx(_s,{item:l,getSellerWallet:W},l._id))]})]})]})]})}),os&&s.jsx(cs,{setSellerOrderInfoModal:T,sellerOrder:q}),U&&s.jsx(Bs,{isSellerAssignedModalOpen:U,setIsSellerAssignedModalOpen:G}),ls&&s.jsx(Ns,{setIsViewWalletModalOpen:z,getSellerWallet:W,id:b==null?void 0:b._id}),rs&&s.jsx(As,{getCashOutRequests:J,setIsUpdateModalOpen:H,walletId:b==null?void 0:b._id})]})};export{ne as default};
