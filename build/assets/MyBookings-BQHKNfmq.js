import{r as _,j as s,e as v,h as b}from"./index-BgkP9pz8.js";import{u,d as y}from"./index.esm-DnL9X2Ej.js";import{I as k}from"./InvoiceModal-BuhVT5Lt.js";import{f as N}from"./index-DtcRJE1u.js";import{L as w}from"./Loader-DZZMpz-K.js";import{W as $}from"./WebsiteWrapper-BMeQVkuw.js";import"./iconBase-BAuAS9aP.js";import"./index.esm-DtjPb8x4.js";import"./jspdf-html2canvas.min-C5oKej-N.js";import"./index-BDlzfcse.js";import"./rolling-white-BBE_8u84.js";import"./Button-B0yvQna8.js";import"./index.esm-CSXRu6IF.js";const I="_my_bookings_1y6ji_1",M="_img_1y6ji_15",z="_table_1y6ji_31",E="_bookings_container_1y6ji_73",j={my_bookings:I,img:M,table:z,bookings_container:E},O="_order_37wz4_1",C="_order_top_37wz4_19",D="_img_37wz4_49",L="_info_37wz4_63",S="_info_row_37wz4_71",A="_order_bottom_37wz4_93",q="_progress_37wz4_107",B="_d_flex_37wz4_147",V="_p_37wz4_107",f={order:O,order_top:C,img:D,info:L,info_row:S,order_bottom:A,progress:q,d_flex:B,p:V},W="_modal_overlay_h3fvf_1",F="_modal_h3fvf_1",Q="_heading_container_h3fvf_49",G="_button_h3fvf_61",T="_p_container_h3fvf_81",H="_progress_h3fvf_89",J="_d_flex_h3fvf_131",K="_product_contaner_h3fvf_141",U="_product_h3fvf_141",X="_img_h3fvf_173",Y="_info_h3fvf_183",Z="_p_h3fvf_81",a={modal_overlay:W,modal:F,heading_container:Q,button:G,p_container:T,progress:H,d_flex:J,product_contaner:K,product:U,img:X,info:Y,p:Z},P=({setIsInfoModalOpen:o,order:t})=>{var p;const{res:n,fetchData:e,isLoading:h}=u();console.log(t._id);const[l,i]=_.useState({}),[m,r]=_.useState(!1),d=async()=>{e(`/shopping/get-product-invoice/${t._id}`)};return _.useEffect(()=>{d()},[]),_.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&i(n==null?void 0:n.data.data)},[n]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:a.modal_overlay,children:s.jsxs("div",{className:a.modal,children:[s.jsxs("div",{className:a.heading_container,children:[s.jsx("h2",{children:"Booking Info"}),s.jsx(y,{onClick:()=>o(!1),size:22,cursor:"pointer"})]}),s.jsxs("div",{className:a.heading_container,children:[s.jsx("h3",{children:"Order1"}),s.jsx("button",{onClick:()=>r(!0),className:a.button,children:"View Invoice"})]}),s.jsx("div",{className:a.p_container,children:s.jsx("p",{className:a.qty,children:"Qty: 1"})}),s.jsx("h3",{children:"Products"}),s.jsx("div",{className:a.product_contaner,children:(p=t==null?void 0:t.products)==null?void 0:p.map(c=>{var g,x;return s.jsxs("div",{className:a.product,children:[s.jsx("img",{className:a.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${c.product.imageUrl[0]}`,alt:""}),s.jsxs("div",{className:a.info,children:[s.jsx("h4",{children:(g=c==null?void 0:c.product)==null?void 0:g.name}),s.jsxs("p",{children:["Qty: ",c==null?void 0:c.quantity]}),s.jsxs("p",{children:["₹",(x=c==null?void 0:c.product)==null?void 0:x.offerPrice]})]})]},c._id)})}),s.jsx("h4",{children:"Track Order"}),s.jsxs("div",{children:[s.jsx("div",{className:a.progress}),s.jsxs("div",{className:a.d_flex,children:[s.jsx("p",{}),s.jsx("p",{children:"Out for delivary"}),s.jsx("p",{children:"Delivered"})]})]}),s.jsx("hr",{})]})}),m&&s.jsx(k,{setIsInvoiceModalOpen:r})]})},R=({order:o,index:t})=>{console.log("single order",o);const n=v(),[e,h]=_.useState(!1),l=()=>{n(`/my_bookings/${o._id}`,{state:o}),h(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{onClick:l,className:f.order,children:[s.jsxs("div",{className:f.order_top,children:[s.jsx("div",{children:o.items.map((i,m)=>{var r,d,p;return s.jsx("img",{className:f.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${(r=i==null?void 0:i.product)!=null&&r.imageUrl[0]?(d=i==null?void 0:i.product)==null?void 0:d.imageUrl[0]:(p=i==null?void 0:i.package)==null?void 0:p.imageUrl[0]}`,alt:""},m)})}),s.jsxs("div",{className:f.info,children:[s.jsxs("p",{style:{color:"grey"},children:["#",o.orderId]}),s.jsxs("div",{className:f.info_row,children:[s.jsxs("p",{children:["Date : ",N(new Date(o.createdAt),"dd-MM-yyyy")]}),s.jsxs("p",{children:["Order Value : ₹",o.orderValue]})]})]})]}),s.jsx("hr",{}),s.jsxs("div",{className:f.order_bottom,children:[s.jsx("p",{children:"Order Status :"}),s.jsx("div",{children:o==null?void 0:o.status})]})]}),e&&s.jsx(P,{setIsInfoModalOpen:h,order:o})]})},hs=()=>{const{res:o,fetchData:t,isLoading:n}=u(),[e,h]=_.useState([]);v();const l=b("userInfo"),i=l==null?void 0:l.id,m=async()=>{t(`/shopping/get-user-orders?userId=${i}`)};return _.useEffect(()=>{m()},[]),_.useEffect(()=>{((o==null?void 0:o.status)===200||(o==null?void 0:o.status)===201)&&h(o==null?void 0:o.data.data)},[o]),s.jsx($,{children:s.jsxs("section",{className:j.my_bookings,children:[s.jsx("h1",{children:"MyBookings"}),!n&&(e==null?void 0:e.length)===0&&s.jsx("p",{children:"No bookings found"}),n&&(e==null?void 0:e.length)===0&&s.jsx(w,{}),s.jsx("div",{className:j.bookings_container,children:e==null?void 0:e.map((r,d)=>s.jsx(R,{index:d,order:r},r._id))})]})})};export{hs as default};
