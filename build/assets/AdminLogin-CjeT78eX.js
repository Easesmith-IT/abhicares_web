import{e as x,i as y,r as a,l as j,j as e,L as v,f as w,v as N,_ as A}from"./index-DcmPn4CU.js";import{l as S}from"./logo -C1Nz5jdc.js";const R=()=>{const n=x(),m=y(),r=a.useRef(),i=a.useRef(),{isAdminAuthenticated:o}=j(t=>t.user);a.useEffect(()=>{o&&n("/admin/dashboard")},[o]);const u=async t=>{var l,d;t.preventDefault(),console.log("inside ");const f=r.current.value,h=i.current.value;try{const s=await w.post("https://abhicares.com/api/admin/login-Admin",{adminId:f,password:h},{withCredentials:!0});if(localStorage.setItem("perm",JSON.stringify(s.data.perm)),s!=null&&s.data){m(N({isAdminAuthenticated:!0}));const p=["dashboard","banners","orders","bookings","services","partners","customers","offers","availableCities","payments","enquiry","helpCenter","settings"];alert("Logged in successfully"),localStorage.setItem("admin-status",!0);const g=p.find(b=>{var c;return((c=s==null?void 0:s.data)==null?void 0:c.perm[b])!=="none"});n(`/admin/${g}`)}}catch(s){console.log(s),A.error((d=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:d.message)}};return e.jsx("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("form",{onSubmit:t=>u(t),style:{padding:"45px",width:"50%",margin:"0 auto"},className:"shadow-lg p-3 mb-5 bg-body-tertiary rounded",children:[e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx(v,{to:"/",children:e.jsx("img",{src:S,alt:"logo",width:200})})}),e.jsx("h3",{className:"d-flex justify-content-center align-items-center my-4",children:"Admin Login"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{for:"username",className:"form-label",children:"Admin Id"}),e.jsx("input",{type:"text",className:"form-control","aria-describedby":"emailHelp",ref:r})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{for:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",id:"password",ref:i})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})};export{R as default};
