import{r as a,j as e,_ as j,e as y}from"./index-DpM_z6IC.js";import{W as I}from"./WebsiteWrapper-Dgd-_MuQ.js";import{S as x}from"./index-CXuegMY1.js";import{A as k,b as O,a as D,y as U}from"./LogoutModal-rCWBQ8ER.js";import{A as S}from"./AddAddressModal-D9xoSydn.js";import{D as $}from"./DeleteModal-DxluFYvk.js";import{B as g}from"./Box-DDah0nxM.js";import{B}from"./Button-BUWlVHle.js";import"./rolling-white-BBE_8u84.js";import"./index.esm-CLAeUnhN.js";import"./iconBase-BW6_ZAh3.js";import"./index.esm-BN_l1XpR.js";import"./usegelocation-Rx6cwE4V.js";const P="_my_profile_149bl_1",T="_profile_top_149bl_15",z="_profile_info_149bl_29",L="_img_149bl_47",F="_profile_info_right_149bl_71",J="_profileDetails_149bl_75",W="_referralDetails_149bl_89",q="_bold_149bl_105",G="_input_box_149bl_113",K="_d_flex_149bl_135",R="_btn_149bl_151",H="_referral_code_wrapper_149bl_171",Y="_address_container_149bl_189",Q="_address_149bl_189",l={my_profile:P,profile_top:T,profile_info:z,img:L,profile_info_right:F,profileDetails:J,referralDetails:W,bold:q,input_box:G,d_flex:K,btn:R,referral_code_wrapper:H,address_container:Y,address:Q},V="_modal_overlay_136uf_1",X="_modal_open_136uf_21",Z="_modal_close_136uf_33",ee="_modal_wrapper_136uf_41",se="_modal_136uf_1",le="_p_136uf_103",te="_mt_136uf_113",ie="_input_box_136uf_121",oe="_input_136uf_121",ne="_button_136uf_155",o={modal_overlay:V,modal_open:X,modal_close:Z,modal_wrapper:ee,modal:se,p:le,mt:te,input_box:ie,input:oe,button:ne},ae=({isAddEmailModalOpen:s,setIsAddEmailModalOpen:m,getProfileDetails:n})=>{const[c,p]=a.useState(""),h=d=>{const{name:i,value:b}=d.target;p(b)},r=async d=>{if(d.preventDefault(),!c){j.error("Please enter email address");return}try{const{data:i}=await y.post("https://abhicares.com/api/shopping/update-email",{email:c},{withCredentials:!0});console.log(i),j.success("Email added successfully"),m(!1),n()}catch(i){console.log(i)}};return e.jsx("div",{className:`${o.modal_overlay} ${s?o.modal_open:o.modal_close}`,children:e.jsxs("div",{className:o.modal_wrapper,children:[e.jsx("button",{onClick:()=>m(!1),className:o.modal_close,children:e.jsx(k,{size:20})}),e.jsx("div",{className:o.modal,children:e.jsxs("form",{onSubmit:r,children:[e.jsx("p",{className:o.p,children:"Add Email"}),e.jsxs("div",{className:o.mt,children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("div",{className:o.input_box,children:e.jsx("input",{className:o.input,onChange:h,value:c,type:"email",name:"email",id:"email",placeholder:"Enter email"})})]}),e.jsx("button",{type:"submit",className:o.button,children:"Add"})]})})]})})},re=({address:s,index:m,getProfileDetails:n})=>{const[c,p]=a.useState(!1),[h,r]=a.useState(!1),d=async()=>{try{const i=await y.delete(`https://abhicares.com/api/shopping/delete-user-address/${s._id}`,{withCredentials:!0});j.success("Address deleted successfully"),console.log(i.data),r(!1),n()}catch(i){console.log(i)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l.address,children:[e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h5",{children:["Address ",m+1]}),e.jsxs(g,{sx:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx(O,{onClick:()=>p(!0),cursor:"pointer",size:20}),e.jsx(D,{onClick:()=>r(!0),cursor:"pointer",size:20})]})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Address Line:"})," ",s==null?void 0:s.addressLine]}),e.jsxs("div",{children:[e.jsx("b",{children:"Landmark:"})," ",s==null?void 0:s.landmark]}),e.jsxs("div",{children:[e.jsx("b",{children:"City:"})," ",s==null?void 0:s.city]}),e.jsxs("div",{children:[e.jsx("b",{children:"Pincode:"})," ",s==null?void 0:s.pincode]}),e.jsxs("div",{children:[e.jsx("b",{children:"Default Address:"})," ",s!=null&&s.defaultAddress?"Yes":"No"]})]}),h&&e.jsx($,{handleDelete:d,setState:r}),c&&e.jsx(S,{isOpen:c,setIsAddAddressModalOpen:p,Data:s,getAllAddress:n})]})},ve=()=>{const[s,m]=a.useState(""),[n,c]=a.useState([]),[p,h]=a.useState(!1),[r,d]=a.useState(!0),[i,b]=a.useState(""),[v,A]=a.useState(!1),f=async()=>{var _,u,N,C,w,M;try{d(!0);const t=await y.get("https://abhicares.com/api/shopping/user-info",{withCredentials:!0});console.log("profile details",t==null?void 0:t.data),(t==null?void 0:t.status)===200&&(m((u=(_=t==null?void 0:t.data)==null?void 0:_.userInfo)==null?void 0:u.user),c((C=(N=t==null?void 0:t.data)==null?void 0:N.userInfo)==null?void 0:C.userAddresses),b((M=(w=t==null?void 0:t.data)==null?void 0:w.userInfo)==null?void 0:M.userRefDoc))}catch(t){console.log(t)}finally{d(!1)}};a.useEffect(()=>{f()},[]);const E=()=>{navigator.clipboard.writeText(s.referralCode),j.success("Copied")};return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsxs("section",{className:l.my_profile,children:[e.jsx("h1",{children:"My Profile"}),e.jsxs("div",{className:l.profile_top,children:[s&&e.jsxs("div",{className:l.profile_info,children:[e.jsx("div",{className:l.img,children:e.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSTMi19cT0JI7Ghldmzz5fJkJy0HFeBicKKug&usqp=CAU",alt:"profile"})}),e.jsx("div",{className:l.profile_info_right,children:e.jsxs("div",{className:l.d_flex,children:[e.jsxs("div",{children:[e.jsx("h5",{children:s==null?void 0:s.name}),e.jsxs("div",{className:l.profileDetails,children:[(s==null?void 0:s.email)&&e.jsxs("p",{children:[e.jsx("b",{className:l.bold,children:"Email :"})," ",s==null?void 0:s.email]}),e.jsxs("p",{children:[e.jsx("b",{className:l.bold,children:"Phone :"})," ",s==null?void 0:s.phone]})]}),i&&e.jsxs("div",{className:l.referralDetails,children:[e.jsxs("p",{children:[e.jsx("b",{className:l.bold,children:"Referral Credits :"})," â‚¹",i==null?void 0:i.referralCredits]}),e.jsxs("p",{children:[e.jsx("b",{className:l.bold,children:"No of Users Applied Coupon :"})," ",i==null?void 0:i.noOfUsersAppliedCoupon]})]})]}),e.jsxs("div",{children:[!(s!=null&&s.email)&&e.jsx("button",{className:l.btn,onClick:()=>h(!0),children:"Add Email"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"10px"},children:[e.jsx("h6",{children:"Referral Code:"}),e.jsxs("div",{className:l.referral_code_wrapper,children:[e.jsx("p",{style:{marginBottom:"0"},children:s==null?void 0:s.referralCode}),e.jsx(U,{onClick:E,cursor:"pointer"})]})]})]})]})})]}),!s&&r&&e.jsxs("div",{className:l.profile_info,children:[e.jsx(x,{circle:!0,width:60,height:60,count:1}),e.jsxs("div",{className:l.profile_info_right,children:[e.jsx(x,{width:140,height:20,count:1}),e.jsx(x,{width:"40%",height:20,count:1})]})]}),e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{marginTop:"20px"},children:"Adresses"}),e.jsx(B,{onClick:()=>A(!0),children:"Add Address"})]}),e.jsxs("div",{className:l.address_container,children:[n.length===0&&r&&e.jsxs("div",{className:l.address,children:[e.jsx(x,{width:"90%",height:20,count:1}),e.jsx(x,{width:"90%",height:20,count:1})]}),n.length===0&&!r&&e.jsx("p",{children:"No address found"}),n==null?void 0:n.map((_,u)=>e.jsx(re,{address:_,index:u,getProfileDetails:f},_==null?void 0:_._id))]})]})]})}),p&&e.jsx(ae,{isAddEmailModalOpen:p,setIsAddEmailModalOpen:h,getProfileDetails:f}),v&&e.jsx(S,{setIsAddAddressModalOpen:A,isOpen:v,getAllAddress:f})]})};export{ve as default};
