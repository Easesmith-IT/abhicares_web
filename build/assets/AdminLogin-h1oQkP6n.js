import{e as x,r as a,k as y,j as e,L as j,f as w,q as N,_ as v}from"./index-I-QjRnx0.js";import{l as A}from"./logo -C1Nz5jdc.js";import{u as S}from"./useDispatch-PMR2IWSw.js";const C=()=>{const r=x(),m=S(),n=a.useRef(),i=a.useRef(),{isAdminAuthenticated:o}=y(t=>t.user);a.useEffect(()=>{o&&r("/admin/dashboard")},[o]);const u=async t=>{var d,l;t.preventDefault(),console.log("inside ");const f=n.current.value,h=i.current.value;try{const s=await w.post("https://abhicares.com/api/admin/login-Admin",{adminId:f,password:h},{withCredentials:!0});if(localStorage.setItem("perm",JSON.stringify(s.data.perm)),s!=null&&s.data){m(N({isAdminAuthenticated:!0}));const p=["dashboard","banners","orders","bookings","services","partners","customers","offers","availableCities","payments","enquiry","helpCenter","settings"];alert("Logged in successfully"),localStorage.setItem("admin-status",!0);const g=p.find(b=>{var c;return((c=s==null?void 0:s.data)==null?void 0:c.perm[b])!=="none"});r(`/admin/${g}`)}}catch(s){console.log(s),v.error((l=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:l.message)}};return e.jsx("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("form",{onSubmit:t=>u(t),style:{padding:"45px",width:"50%",margin:"0 auto"},className:"shadow-lg p-3 mb-5 bg-body-tertiary rounded",children:[e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx(j,{to:"/",children:e.jsx("img",{src:A,alt:"logo",width:200})})}),e.jsx("h3",{className:"d-flex justify-content-center align-items-center my-4",children:"Admin Login"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{for:"username",className:"form-label",children:"Admin Id"}),e.jsx("input",{type:"text",className:"form-control","aria-describedby":"emailHelp",ref:n})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{for:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",id:"password",ref:i})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})};export{C as default};
