import{r as t,_ as U,j as e,e as oe,u as ke}from"./index-BgkP9pz8.js";import{p as de}from"./index-BDlzfcse.js";import{W as ze,c as T}from"./Wrapper-DS_6NVVl.js";import{A as xe}from"./add-icon-nobg-CDiYK8IX.js";import{R as Z}from"./index.esm-BP34_6mW.js";import{R as Ee}from"./index-COgJYnRU.js";/* empty css                   */import{u as ne}from"./useAuthorization-tWnY0z3a.js";import{f as me,i as Be,a as pe,u as le}from"./index.esm-DnL9X2Ej.js";import{l as ye}from"./rolling-white-BBE_8u84.js";import{u as he}from"./usePatchApiReq-DS05ZUpu.js";import{u as ae}from"./usePostApiReq-Y-Z3zkKe.js";import{D as ue}from"./DeleteModal-JeY62UYi.js";import{L as je}from"./Loader-DZZMpz-K.js";import{c as C}from"./ProductInfoModal.module-DFnnMkat.js";import{C as Ge}from"./index-DtnFLEiy.js";import{I as Je,a as Te,b as We}from"./index.esm-CSXRu6IF.js";import{F as ve}from"./index.esm-BFuDLeVr.js";import{u as be}from"./useDeleteApiReq-BaGwvOuV.js";import"./logo -C1Nz5jdc.js";import"./iconBase-BAuAS9aP.js";const Qe="_wrapper_12osz_1",He="_modal_12osz_27",Ke="_heading_container_12osz_47",Ve="_form_12osz_59",Xe="_input_container_12osz_73",Ye="_input_12osz_73",Ze="_button_wrapper_12osz_105",Re="_button_12osz_105",es="_loader_12osz_131",ss="_img_cotainer_12osz_141",ns="_icon_12osz_161",S={wrapper:Qe,modal:He,heading_container:Ke,form:Ve,input_container:Xe,input:Ye,button_wrapper:Ze,button:Re,loader:es,img_cotainer:ss,icon:ns},Ie=({setIsModalOpen:x,serviceId:o,product:l="",getAllProducts:m})=>{var E,X;const{res:a,fetchData:v,isLoading:r}=ae();ne();const[D,h]=t.useState((l==null?void 0:l.description)||""),b=()=>Math.floor(Math.random()*90)+10,n=(E=l==null?void 0:l.imageUrl)==null?void 0:E.map(w=>({img:`https://storage.googleapis.com/abhicares-backend-bucket/${w}`,id:b()})),[i,u]=t.useState({name:(l==null?void 0:l.name)||"",price:(l==null?void 0:l.price)||"",offerPrice:(l==null?void 0:l.offerPrice)||"",img:(l==null?void 0:l.imageUrl)||[],previewImages:n||[],uploadedImages:[]}),[y,Q]=t.useState(!l),k=t.useRef(null),[L,F]=t.useState(!1);console.log("prev state",i.previewImages),console.log("state",i);const z=w=>{w.preventDefault(),Q(()=>!0),console.log("img length",i.img.length===3);const p=Array.from(w.target.files);if(p.length>3){U.error("Cannot upload files more than 3"),w.target.value=null;return}const q=A=>new Promise(J=>{const s=new FileReader;s.readAsDataURL(A),s.addEventListener("load",function(){J({img:this.result,id:b()})})});Promise.all(p.map(A=>q(A))).then(A=>{const J=p.length,s=[...i==null?void 0:i.img],c=[...i==null?void 0:i.previewImages];s.splice(0,J),c.splice(0,J);const $=p.map((N,B)=>({img:N,id:A[B].id}));u(N=>({...N,previewImages:[...c,...A],img:s,uploadedImages:$}))})},G=w=>{const{name:p,value:q}=w.target;u({...i,[p]:q})},_=(w,p)=>{console.log("id",p);let q=[...i.img].filter((s,c)=>c!==w),A=[...i.previewImages].filter(s=>s.id!==p),J=[...i.uploadedImages].filter(s=>s.id!==p);console.log("prev",A),console.log("db",q),k.current&&A.length===0&&(k.current.value=null),u({...i,img:q,previewImages:A,uploadedImages:J})},{res:O,fetchData:R}=he(),ee=async w=>{if(w.preventDefault(),!i.name||!i.price||!i.offerPrice||!D){U.error("All the fields are required");return}F(!0);const p=new FormData;p.append("name",i.name),p.append("price",i.price),p.append("offerPrice",i.offerPrice),p.append("serviceId",o);for(const q of i.uploadedImages)p.append("img",q.img);p.append("imageUrl",JSON.stringify(i.img)),p.append("description",D),l?await R(`/admin/update-product/${l._id}`,p):v("/admin/create-product",p)};return t.useEffect(()=>{((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&(U.success("Product added successfully"),m(),x(!1))},[a]),t.useEffect(()=>{((O==null?void 0:O.status)===200||(O==null?void 0:O.status)===201)&&(U.success("Product updated successfully"),m(),x(!1))},[O]),e.jsx("div",{className:S.wrapper,children:e.jsxs("div",{className:S.modal,children:[e.jsxs("div",{className:S.heading_container,children:[e.jsxs("h4",{children:[l?"Update":"Add"," Product"]}),e.jsx("div",{className:S.d_flex,children:e.jsx(Z,{onClick:()=>x(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:ee,className:S.form,children:[e.jsxs("div",{className:S.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:S.input,onChange:G,value:i.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:S.input_container,children:[e.jsx("label",{htmlFor:"price",children:"Price"}),e.jsx("input",{className:S.input,onChange:G,value:i.price,type:"number",name:"price",id:"price"})]}),e.jsxs("div",{className:S.input_container,children:[e.jsx("label",{htmlFor:"offerPrice",children:"Offer Price"}),e.jsx("input",{className:S.input,onChange:G,value:i.offerPrice,type:"number",name:"offerPrice",id:"offerPrice"})]}),e.jsxs("div",{className:S.input_container,children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx(Ee,{theme:"snow",value:D,onChange:h})]}),e.jsxs("div",{className:S.input_container,children:[e.jsx("label",{htmlFor:"img",children:"Image"}),e.jsx("input",{ref:k,onChange:z,multiple:!0,type:"file",name:"img",id:"img"})]}),e.jsx("div",{className:S.img_cotainer,children:(X=i==null?void 0:i.previewImages)==null?void 0:X.map((w,p)=>e.jsxs("div",{children:[e.jsx("img",{width:190,height:150,src:w.img,alt:"product"},p),e.jsx(me,{onClick:()=>_(p,w.id),className:S.icon})]},p))}),e.jsx("div",{className:S.button_wrapper,children:e.jsx("button",{className:S.button,children:r?e.jsx("img",{className:S.loader,src:ye,alt:"loader"}):l?"Update":"Add"})})]})]})})},Ne=({setIsInfoModalOpen:x,product:o,isPackage:l})=>{var v;const m={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:1},desktop:{breakpoint:{max:3e3,min:1024},items:1},tablet:{breakpoint:{max:1024,min:550},items:1},mobile:{breakpoint:{max:550,min:0},items:1}},a=({next:r,previous:D})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${C.carousel_button} ${C.carousel_button_left}`,onClick:()=>D(),children:e.jsx(Je,{size:35})}),e.jsx("button",{className:`${C.carousel_button} ${C.carousel_button_right}`,onClick:()=>r(),children:e.jsx(Te,{size:35})})]});return e.jsx("div",{className:C.wrapper,children:e.jsxs("div",{className:C.modal,children:[e.jsxs("div",{className:C.heading_container,children:[e.jsxs("h4",{children:[l?"Package":"Product"," Info"]}),e.jsx("div",{className:C.d_flex,children:e.jsx(Z,{onClick:()=>x(!1),cursor:"pointer",size:26})})]}),e.jsx(Ge,{responsive:m,arrows:!1,showDots:!0,className:C.carousel,customButtonGroup:e.jsx(a,{}),children:(v=o==null?void 0:o.imageUrl)==null?void 0:v.map(r=>e.jsx("img",{className:C.carousel_img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${r}`,alt:l?"Package":"Product"},r))}),e.jsxs("div",{className:C.contianer,children:[e.jsx("h5",{children:o==null?void 0:o.name}),(o==null?void 0:o.description)&&e.jsx("p",{children:de(o==null?void 0:o.description)}),e.jsxs("div",{children:[e.jsxs("span",{children:["₹",o==null?void 0:o.price]}),e.jsxs("span",{children:["₹",o==null?void 0:o.offerPrice]})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:C.h3,children:"Products"}),e.jsx("div",{className:C.products_cotainer,children:o.products.map(r=>{var D,h,b,n,i;return e.jsxs("div",{className:C.product,children:[e.jsx("img",{className:C.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${(D=r==null?void 0:r.productId)==null?void 0:D.imageUrl[0]}`,alt:"product"}),e.jsxs("div",{className:C.product_info,children:[e.jsx("h5",{children:(h=r==null?void 0:r.productId)==null?void 0:h.name}),e.jsx("p",{children:de((b=r==null?void 0:r.productId)==null?void 0:b.description)}),e.jsx("div",{className:C.d_flex,children:e.jsxs("div",{className:C.price_cotainer,children:[e.jsxs("p",{className:C.price,children:["₹",(n=r==null?void 0:r.productId)==null?void 0:n.price]}),e.jsxs("p",{className:C.price,children:["₹",(i=r==null?void 0:r.productId)==null?void 0:i.offerPrice]})]})})]})]})})})]})]})})},as="_service_info_12cr3_1",ts="_button_12cr3_5",is="_heading_container_12cr3_35",os="_service_info_wrapper_12cr3_47",rs="_img_wrapper_12cr3_67",cs="_icon_12cr3_77",K={service_info:as,button:ts,heading_container:is,service_info_wrapper:os,img_wrapper:rs,icon:cs},ls="_wrapper_1s75l_1",ds="_modal_1s75l_27",ms="_heading_container_1s75l_47",ps="_form_1s75l_59",us="_input_container_1s75l_73",hs="_input_1s75l_73",_s="_button_wrapper_1s75l_105",fs="_button_1s75l_105",H={wrapper:ls,modal:ds,heading_container:ms,form:ps,input_container:us,input:hs,button_wrapper:_s,button:fs},gs=({setIsModalOpen:x,serviceId:o,getServiceDetails:l})=>{const{res:m,fetchData:a,isLoading:v}=ae();ne();const[r,D]=t.useState({icon:"",iconPrev:""});t.useState(!1);const h=t.useRef(null),b=i=>{i.preventDefault();const u=i.target.files[0],y=new FileReader;y.readAsDataURL(u),y.addEventListener("load",function(){D({...r,icon:u,iconPrev:this.result})})},n=async i=>{if(i.preventDefault(),!r.icon){U.error("Choose icon");return}const u=new FormData;u.append("img",r.icon),a(`/admin/upload-service-icon/${o}`,u)};return t.useEffect(()=>{((m==null?void 0:m.status)===200||(m==null?void 0:m.status)===201)&&(U.success("Icon added successfully"),x(!1),l())},[m]),e.jsx("div",{className:H.wrapper,children:e.jsxs("div",{className:H.modal,children:[e.jsxs("div",{className:H.heading_container,children:[e.jsx("h4",{children:"Upload Icon"}),e.jsx("div",{className:H.d_flex,children:e.jsx(Z,{onClick:()=>x(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:n,className:H.form,children:[e.jsxs("div",{className:H.input_container,children:[e.jsx("label",{htmlFor:"icon",children:"Icon"}),e.jsx("input",{ref:h,onChange:b,type:"file",name:"icon",id:"icon"}),r.iconPrev&&e.jsx("div",{className:H.img_container,children:e.jsx("img",{width:200,height:150,src:r.iconPrev,alt:"feature"})}),!r.iconPrev&&r.icon&&e.jsx("div",{className:H.img_container,children:e.jsx("img",{width:200,height:150,src:`https://storage.googleapis.com/abhicares-backend-bucket/${r.icon}`,alt:"feature"})})]}),e.jsx("div",{className:H.button_wrapper,children:e.jsx("button",{className:H.button,children:v?"Uploading...":"Upload"})})]})]})})},xs="_wrapper_wqmyh_1",js="_modal_wqmyh_27",vs="_heading_container_wqmyh_47",bs="_form_wqmyh_59",Is="_input_container_wqmyh_73",Ns="_input_wqmyh_73",ws="_d_flex_wqmyh_107",$s="_multi_select_wqmyh_119",ys="_button_wrapper_wqmyh_151",Cs="_button_wqmyh_151",Fs="_loader_wqmyh_177",Ds="_img_cotainer_wqmyh_187",Ms="_icon_wqmyh_207",Ss="_product_container_wqmyh_225",As="_product_wqmyh_225",j={wrapper:xs,modal:js,heading_container:vs,form:bs,input_container:Is,input:Ns,d_flex:ws,multi_select:$s,button_wrapper:ys,button:Cs,loader:Fs,img_cotainer:Ds,icon:Ms,product_container:Ss,product:As},we=({setIsModalOpen:x,serviceId:o,getAllPackage:l,allProducts:m,selectedPackage:a})=>{var p,q,A,J;const{res:v,fetchData:r,isLoading:D}=ae();oe(),ne();const h=()=>Math.floor(Math.random()*90)+10,b=(p=a==null?void 0:a.imageUrl)==null?void 0:p.map(s=>({img:`https://storage.googleapis.com/abhicares-backend-bucket/${s}`,id:h()})),[n,i]=t.useState({name:(a==null?void 0:a.name)||"",price:(a==null?void 0:a.price)||"",description:(a==null?void 0:a.description)||"",offerPrice:(a==null?void 0:a.offerPrice)||"",img:(a==null?void 0:a.imageUrl)||[],products:(a==null?void 0:a.products)||[],previewImages:b||[],uploadedImages:[]}),[u,y]=t.useState(!1),[Q,k]=t.useState(!a),L=t.useRef(null),[F,z]=t.useState(!1),G=s=>{s.preventDefault(),k(()=>!0);const c=Array.from(s.target.files);if(c.length>3){U.error("Cannot upload files more than 3"),s.target.value=null;return}const $=N=>new Promise(B=>{const M=new FileReader;M.readAsDataURL(N),M.addEventListener("load",function(){B({img:this.result,id:h()})})});Promise.all(c.map(N=>$(N))).then(N=>{const B=c.length,M=[...n==null?void 0:n.img],Y=[...n==null?void 0:n.previewImages];M.splice(0,B),Y.splice(0,B);const se=c.map((V,re)=>({img:V,id:N[re].id}));i(V=>({...V,previewImages:[...Y,...N],img:M,uploadedImages:se}))})},_=s=>{const{name:c,value:$}=s.target;i({...n,[c]:$})},O=(s,c)=>{console.log("id",c);let $=[...n.img].filter((M,Y)=>Y!==s),N=[...n.previewImages].filter(M=>M.id!==c),B=[...n.uploadedImages].filter(M=>M.id!==c);console.log("prev",N),console.log("db",$),L.current&&N.length===0&&(L.current.value=null),i({...n,img:$,previewImages:N,uploadedImages:B})},R=(s,c)=>{const{value:$,checked:N}=s.target;if(N)i({...n,products:[...n.products,{productId:$,name:c}]});else{const B=n.products.filter(M=>M.productId!==$);i({...n,products:B})}},ee=s=>{console.log("id",s);const c=n.products.filter($=>$.productId._id!==s);i({...n,products:c})},{res:E,fetchData:X}=he(),w=async s=>{if(s.preventDefault(),!n.name||!n.price||!n.offerPrice||n.products.length===0){U.error("All the fields are required");return}z(!0);const c=new FormData;c.append("name",n.name),c.append("price",n.price),c.append("offerPrice",n.offerPrice),c.append("description",n.description),c.append("serviceId",o),c.append("products",JSON.stringify(n.products));for(const $ of n.uploadedImages)c.append("img",$.img);c.append("imageUrl",JSON.stringify(n.img)),a?await X(`/admin/update-package/${a._id}`,c):r("/admin/create-package",c)};return t.useEffect(()=>{((v==null?void 0:v.status)===200||(v==null?void 0:v.status)===201)&&(U.success("Package added successfully"),l(),x(!1))},[v]),console.log("package",n),t.useEffect(()=>{((E==null?void 0:E.status)===200||(E==null?void 0:E.status)===201)&&(U.success("Package updated successfully"),l(),x(!1))},[E]),e.jsx("div",{className:j.wrapper,children:e.jsxs("div",{className:j.modal,children:[e.jsxs("div",{className:j.heading_container,children:[e.jsxs("h4",{children:[a?"Update":"Add"," Package"]}),e.jsx("div",{className:j.d_flex,children:e.jsx(Z,{onClick:()=>x(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:w,className:j.form,children:[e.jsxs("div",{className:j.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:j.input,onChange:_,value:n.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:j.input_container,children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{style:{resize:"none"},className:j.input,onChange:_,value:n.description,name:"description",id:"description"})]}),e.jsxs("div",{className:j.input_container,children:[e.jsx("label",{htmlFor:"price",children:"Price"}),e.jsx("input",{className:j.input,onChange:_,value:n.price,type:"number",name:"price",id:"price"})]}),e.jsxs("div",{className:j.input_container,children:[e.jsx("label",{htmlFor:"offerPrice",children:"Offer Price"}),e.jsx("input",{className:j.input,onChange:_,value:n.offerPrice,type:"number",name:"offerPrice",id:"offerPrice"})]}),e.jsxs("div",{className:j.input_container,children:[e.jsx("label",{htmlFor:"Products",children:"Products"}),e.jsxs("div",{onClick:()=>y(!u),className:`${j.input} ${j.d_flex}`,children:["select product",e.jsx(We,{})]}),u&&e.jsx("div",{className:j.multi_select,children:m==null?void 0:m.map(s=>e.jsxs("div",{className:j.d_flex,children:[e.jsx("label",{htmlFor:s.name,children:s.name}),e.jsx("input",{checked:n.products.some(c=>c.productId===s._id),onChange:c=>R(c,s==null?void 0:s.name),type:"checkbox",value:s._id,name:s.name,id:s.name})]},s._id))}),e.jsx("div",{className:j.product_container,children:((q=n==null?void 0:n.products)==null?void 0:q.length)>0&&((A=n==null?void 0:n.products)==null?void 0:A.map(s=>{var c;return e.jsxs("span",{className:j.product,children:[s!=null&&s.name?s==null?void 0:s.name:(c=s==null?void 0:s.productId)==null?void 0:c.name,e.jsx(me,{cursor:"pointer",size:20,onClick:()=>{var $;return ee(($=s==null?void 0:s.productId)==null?void 0:$._id)}})]},s==null?void 0:s.name)}))})]}),e.jsxs("div",{className:j.input_container,children:[e.jsx("label",{htmlFor:"img",children:"Image"}),e.jsx("input",{ref:L,onChange:G,multiple:!0,type:"file",name:"img",id:"img"})]}),e.jsx("div",{className:j.img_cotainer,children:(J=n==null?void 0:n.previewImages)==null?void 0:J.map((s,c)=>e.jsxs("div",{children:[e.jsx("img",{width:190,height:150,src:s.img,alt:"package"},c),e.jsx(me,{onClick:()=>O(c,s.id),className:j.icon})]},c))}),e.jsx("div",{className:j.button_wrapper,children:e.jsx("button",{className:j.button,children:D?e.jsx("img",{className:j.loader,src:ye,alt:"loader"}):a?"Update":"Add"})})]})]})})},Os="_wrapper_1q4wh_1",Us="_modal_1q4wh_27",Ls="_heading_container_1q4wh_47",qs="_d_flex_1q4wh_59",Ps="_features_1q4wh_71",ks="_feature_1q4wh_71",zs="_feature_wrapper_1q4wh_103",Es="_feature_img_1q4wh_117",Bs="_feature_content_1q4wh_141",Gs="_icons_cotainer_1q4wh_151",Js="_button_1q4wh_163",W={wrapper:Os,modal:Us,heading_container:Ls,d_flex:qs,features:Ps,feature:ks,feature_wrapper:zs,feature_img:Es,feature_content:Bs,icons_cotainer:Gs,button:Js},Ts="_wrapper_6v0i8_1",Ws="_modal_6v0i8_27",Qs="_heading_container_6v0i8_47",Hs="_form_6v0i8_59",Ks="_input_container_6v0i8_73",Vs="_input_6v0i8_73",Xs="_button_wrapper_6v0i8_105",Ys="_button_6v0i8_105",P={wrapper:Ts,modal:Ws,heading_container:Qs,form:Hs,input_container:Ks,input:Vs,button_wrapper:Xs,button:Ys},$e=({setIsModalOpen:x,feature:o,getServiceDetails:l,serviceId:m,index:a})=>{const{res:v,fetchData:r,isLoading:D}=ae();console.log("index",a),oe(),ne();const[h,b]=t.useState({name:(o==null?void 0:o.title)||"",description:(o==null?void 0:o.description)||"",img:(o==null?void 0:o.image)||"",previewImage:""});t.useState(!o);const n=t.useRef(null),i=L=>{L.preventDefault();const F=L.target.files[0],z=new FileReader;z.readAsDataURL(F),z.addEventListener("load",function(){b({...h,img:F,previewImage:this.result})})},u=L=>{const{name:F,value:z}=L.target;b({...h,[F]:z})},{res:y,fetchData:Q}=he(),k=async L=>{if(L.preventDefault(),!h.name||!h.description||!h.img){U.error("All the fields are required");return}const F=new FormData;F.append("title",h.name),F.append("description",h.description),F.append("img",h.img),o&&F.append("index",a),o?await Q(`/admin/update-service-feature/${m}`,F):r(`/admin/add-service-feature/${m}`,F)};return t.useEffect(()=>{((v==null?void 0:v.status)===200||(v==null?void 0:v.status)===201)&&(U.success("Feature added successfully"),x(!1),l())},[v]),t.useEffect(()=>{((y==null?void 0:y.status)===200||(y==null?void 0:y.status)===201)&&(U.success("Feature updated successfully"),x(!1),l())},[y]),e.jsx("div",{className:P.wrapper,children:e.jsxs("div",{className:P.modal,children:[e.jsxs("div",{className:P.heading_container,children:[e.jsxs("h4",{children:[o?"Update":"Add"," Feature"]}),e.jsx("div",{className:P.d_flex,children:e.jsx(Z,{onClick:()=>x(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:k,className:P.form,children:[e.jsxs("div",{className:P.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:P.input,onChange:u,value:h.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:P.input_container,children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("input",{className:P.input,onChange:u,value:h.description,type:"text",name:"description",id:"description"})]}),e.jsxs("div",{className:P.input_container,children:[e.jsx("label",{htmlFor:"imageUrl",children:"Image"}),e.jsx("input",{ref:n,onChange:i,type:"file",name:"imageUrl",id:"imageUrl"}),h.previewImage&&e.jsx("div",{className:P.img_container,children:e.jsx("img",{width:200,height:150,src:h.previewImage,alt:"feature"})}),!h.previewImage&&h.img&&e.jsx("div",{className:P.img_container,children:e.jsx("img",{width:200,height:150,src:`https://storage.googleapis.com/abhicares-backend-bucket/${h.img}`,alt:"feature"})})]}),e.jsxs("div",{className:P.button_wrapper,children:[e.jsx("button",{className:P.button,onClick:()=>x(!1),children:"Cancel"}),e.jsx("button",{className:P.button,children:D?"Loading...":o?"Update":"Add"})]})]})]})})},Zs=({setIsModalOpen:x,allFeatures:o=[],getServiceDetails:l,serviceId:m})=>{const{res:a,fetchData:v,isLoading:r}=ae();ne(),oe();const[D,h]=t.useState(!1),[b,n]=t.useState(!1),[i,u]=t.useState(!1),[y,Q]=t.useState(""),[k,L]=t.useState(null),F=async _=>{_.preventDefault(),v(`/admin/delete-service-feature/${m}?title=${y==null?void 0:y.title}`)};t.useEffect(()=>{var _;((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&(U.success((_=a==null?void 0:a.data)==null?void 0:_.message),l(),u(!1))},[a]);const z=async(_,O)=>{Q(_),L(O),n(!0)},G=async _=>{Q(_),u(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:W.wrapper,children:e.jsxs("div",{className:W.modal,children:[e.jsxs("div",{className:W.heading_container,children:[e.jsx("h4",{children:"Features"}),e.jsxs("div",{className:W.d_flex,children:[e.jsx("button",{className:W.button,onClick:()=>h(!0),children:"Add Feature"}),e.jsx(Z,{onClick:()=>x(!1),cursor:"pointer",size:26})]})]}),e.jsxs("div",{className:W.features,children:[o.length===0&&e.jsx("p",{children:"No features found"}),o==null?void 0:o.map((_,O)=>e.jsxs("div",{className:W.feature,children:[e.jsxs("div",{className:W.feature_wrapper,children:[e.jsx("div",{className:W.feature_img,children:e.jsx("img",{src:`https://storage.googleapis.com/abhicares-backend-bucket/${_==null?void 0:_.image}`,alt:"feature"})}),e.jsxs("div",{className:W.feature_content,children:[e.jsx("h5",{children:_==null?void 0:_.title}),e.jsx("p",{children:_==null?void 0:_.description})]})]}),e.jsxs("div",{className:W.icons_cotainer,children:[e.jsx(Be,{onClick:()=>z(_,O),size:22,cursor:"pointer"}),e.jsx(pe,{onClick:()=>G(_),color:"red",size:22,cursor:"pointer"})]})]}))]})]})}),D&&e.jsx($e,{setIsModalOpen:h,getServiceDetails:l,serviceId:m}),b&&e.jsx($e,{setIsModalOpen:n,feature:y,getServiceDetails:l,serviceId:m,index:k}),i&&e.jsx(ue,{handleDelete:F,setState:u})]})},bn=()=>{const{res:x,fetchData:o,isLoading:l}=be(),{res:m,fetchData:a,isLoading:v}=be(),{res:r,fetchData:D,isLoading:h}=le(),{res:b,fetchData:n,isLoading:i}=le(),{res:u,fetchData:y,isLoading:Q}=le(),k=oe(),[L,F]=t.useState(!1),[z,G]=t.useState(!1),[_,O]=t.useState(!1),[R,ee]=t.useState(!1),[E,X]=t.useState(!1),[w,p]=t.useState(!1),[q,A]=t.useState(!1),[J,s]=t.useState(!1),[c,$]=t.useState(!1),[N,B]=t.useState([]),[M,Y]=t.useState([]),[se,V]=t.useState({}),[re,Ce]=t.useState({}),[_e,fe]=t.useState("");t.useState(!0),t.useState(!0);const[Fe,ge]=t.useState(!1),[f,De]=t.useState(""),d=ke(),Me=(g,I)=>{g.stopPropagation(),V(I),k(`/admin/services/${d==null?void 0:d.categoryId}/product/${d==null?void 0:d.serviceId}/info`,{state:{product:I,isPackage:!1}})},Se=(g,I)=>{g.stopPropagation(),fe(I),k(`/admin/services/${d==null?void 0:d.categoryId}/product/${d==null?void 0:d.serviceId}/info`,{state:{product:I,isPackage:!0}})},Ae=(g,I)=>{g.stopPropagation(),V(I),O(!w)},Oe=(g,I)=>{g.stopPropagation(),Ce(I),$(!c)},ce=async()=>{D(`/admin/get-service-details/${d==null?void 0:d.serviceId}`)};t.useEffect(()=>{var g;((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&De((g=r==null?void 0:r.data)==null?void 0:g.service)},[r]);const te=async()=>{n(`/admin/get-service-product/${d==null?void 0:d.serviceId}`)};t.useEffect(()=>{((b==null?void 0:b.status)===200||(b==null?void 0:b.status)===201)&&B(b==null?void 0:b.data.data)},[b]);const ie=async()=>{y(`/admin/get-service-package/${d==null?void 0:d.serviceId}`)};t.useEffect(()=>{te(),ie(),ce()},[]),t.useEffect(()=>{((u==null?void 0:u.status)===200||(u==null?void 0:u.status)===201)&&Y(u==null?void 0:u.data.data)},[u]);const Ue=async()=>{o(`/admin/delete-product/${se}`)};t.useEffect(()=>{((x==null?void 0:x.status)===200||(x==null?void 0:x.status)===201)&&(U.success("Product deleted successfully"),te(),p(!w))},[x]);const Le=(g,I)=>{g.stopPropagation(),V(I),p(!w)},qe=(g,I)=>{g.stopPropagation(),fe(I),A(!q)},Pe=async()=>{a(`/admin/delete-package/${_e}`)};return t.useEffect(()=>{((m==null?void 0:m.status)===200||(m==null?void 0:m.status)===201)&&(U.success("Package deleted successfully"),ie(),A(!q))},[m]),e.jsxs(e.Fragment,{children:[e.jsx(ze,{children:e.jsxs("div",{className:T["services-wrapper"],children:[e.jsxs("div",{className:K.service_info_wrapper,children:[e.jsxs("div",{className:K.img_wrapper,children:[(f==null?void 0:f.icon)&&e.jsx("img",{onClick:()=>G(!0),className:K.icon,src:`https://storage.googleapis.com/abhicares-backend-bucket/${f.icon}`,alt:"icon"}),e.jsxs("div",{className:K.service_info,children:[e.jsx("h5",{children:f==null?void 0:f.name}),e.jsx("div",{children:e.jsxs("p",{children:["Starting Price: ₹",f==null?void 0:f.startingPrice]})}),e.jsx("p",{children:(f==null?void 0:f.description)&&de(f==null?void 0:f.description)}),!(f!=null&&f.icon)&&e.jsx("button",{className:K.button,onClick:()=>G(!0),children:"Upload Icon"})]})]}),e.jsx("button",{className:K.button,onClick:()=>ge(!0),children:"Update Features"})]}),e.jsxs("div",{className:T["services-header"],children:[e.jsx("h4",{children:"Products"}),e.jsx("button",{onClick:()=>F(!0),className:T.services_add_btn,children:e.jsx("img",{src:xe,alt:"add product"})})]}),e.jsxs("div",{className:T.card_container,children:[!i&&N.length===0&&e.jsx("p",{children:"No products found"}),i&&N.length===0&&e.jsx(je,{}),N==null?void 0:N.map(g=>e.jsxs("div",{onClick:I=>Me(I,g),className:T.card,children:[e.jsx("img",{src:`https://storage.googleapis.com/abhicares-backend-bucket/${g.imageUrl[0]}`,alt:"product"}),e.jsx("div",{children:e.jsxs("div",{className:K.heading_container,children:[e.jsx("h5",{children:g.name}),e.jsxs("div",{className:T.icon_container,children:[e.jsx(ve,{onClick:I=>Ae(I,g),size:20}),e.jsx(pe,{onClick:I=>Le(I,g._id),size:22,color:"red"})]})]})})]},g._id))]}),e.jsxs("div",{className:T["services-header"],children:[e.jsx("h4",{children:"Packages"}),e.jsx("button",{onClick:()=>s(!0),className:T.services_add_btn,children:e.jsx("img",{src:xe,alt:"add package"})})]}),e.jsxs("div",{className:T.card_container,children:[!Q&&M.length===0&&e.jsx("p",{children:"No packages found"}),Q&&M.length===0&&e.jsx(je,{}),M==null?void 0:M.map(g=>e.jsxs("div",{onClick:I=>Se(I,g),className:T.card,children:[e.jsx("img",{src:`https://storage.googleapis.com/abhicares-backend-bucket/${g.imageUrl[0]}`,alt:"package"}),e.jsx("div",{children:e.jsxs("div",{className:K.heading_container,children:[e.jsx("h5",{children:g.name}),e.jsxs("div",{className:T.icon_container,children:[e.jsx(ve,{onClick:I=>Oe(I,g),size:20}),e.jsx(pe,{onClick:I=>qe(I,g._id),size:22,color:"red"})]})]})})]},g._id))]})]})}),R&&e.jsx(Ne,{product:se,setIsInfoModalOpen:ee}),E&&e.jsx(Ne,{isPackage:!0,product:_e,setIsInfoModalOpen:X}),L&&e.jsx(Ie,{serviceId:d==null?void 0:d.serviceId,setIsModalOpen:F,getAllProducts:te}),_&&e.jsx(Ie,{serviceId:d==null?void 0:d.serviceId,setIsModalOpen:O,product:se,getAllProducts:te}),z&&e.jsx(gs,{setIsModalOpen:G,serviceId:f==null?void 0:f._id,getServiceDetails:ce}),J&&e.jsx(we,{serviceId:d==null?void 0:d.serviceId,setIsModalOpen:s,getAllPackage:ie,allProducts:N}),c&&e.jsx(we,{selectedPackage:re,serviceId:d==null?void 0:d.serviceId,setIsModalOpen:$,getAllPackage:ie,allProducts:N}),w&&e.jsx(ue,{setState:p,handleDelete:Ue}),q&&e.jsx(ue,{setState:A,handleDelete:Pe}),Fe&&e.jsx(Zs,{setIsModalOpen:ge,allFeatures:f==null?void 0:f.features,getServiceDetails:ce,serviceId:f==null?void 0:f._id})]})};export{bn as default};
