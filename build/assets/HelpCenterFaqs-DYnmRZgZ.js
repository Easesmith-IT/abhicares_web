import{r as c,u as F,j as e,e as x,_ as C}from"./index-DpM_z6IC.js";import{a as _}from"./LogoutModal-rCWBQ8ER.js";import{W as S}from"./Wrapper-D8NCHknB.js";import{h as d}from"./HelpCenter.module-CDSZ6uwM.js";import{A}from"./add-icon-nobg-CDiYK8IX.js";import{L as D}from"./Loader-BcbBY3v3.js";/* empty css                   */import{u as N}from"./useAuthorization-C9ZZ-i5a.js";import{D as M}from"./DeleteModal-DxluFYvk.js";import{F as k}from"./index.esm-CI6h5U8o.js";import{R as E}from"./index.esm-BqNeVfbB.js";import{c as r}from"./AddResoulationModal.module-DEfsxiwO.js";import{f as $}from"./index-hn_tsJ_x.js";import"./iconBase-BW6_ZAh3.js";import"./logo -C1Nz5jdc.js";const y=({setIsModalOpen:o,faq:i="",getAllFaqs:u})=>{const{checkAuthorization:l}=N(),[n,h]=c.useState({ques:i.ques||"",ans:i.ans||""}),t=m=>{const{name:a,value:j}=m.target;h({...n,[a]:j})};F();const p=async m=>{if(m.preventDefault(),!(!n.ques||!n.ans))if(i)try{const{data:a}=await x.patch(`https://abhicares.com/api/admin/update-faq/${i._id}`,{...n},{withCredentials:!0});C.success("Faq updated successfully"),u(),o(!1)}catch(a){console.log(a),o(!1),l(a)}else try{const{data:a}=await x.post("https://abhicares.com/api/admin/create-faq",{...n},{withCredentials:!0});C.success("Faq created successfully"),u(),o(!1)}catch(a){console.log(a),o(!1),l(a)}};return e.jsx("div",{className:r.wrapper,children:e.jsxs("div",{className:r.modal,children:[e.jsxs("div",{className:r.heading_container,children:[e.jsxs("h4",{children:[i?"Edit":"Create"," Faq"]}),e.jsx("div",{className:r.d_flex,children:e.jsx(E,{onClick:()=>o(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:p,className:r.form,children:[e.jsxs("div",{className:r.input_container,children:[e.jsx("label",{htmlFor:"ques",children:"Question"}),e.jsx("input",{className:r.input,onChange:t,value:n.ques,type:"text",name:"ques",id:"ques"})]}),e.jsxs("div",{className:r.input_container,children:[e.jsx("label",{htmlFor:"ans",children:"Answer"}),e.jsx("input",{className:r.input,onChange:t,value:n.ans,type:"text",name:"ans",id:"ans"})]}),e.jsx("div",{className:r.button_wrapper,children:e.jsx("button",{onClick:p,className:r.button,children:i?"Update":"Add"})})]})]})})},V=()=>{const[o,i]=c.useState(!1),[u,l]=c.useState(!1),[n,h]=c.useState({}),[t,p]=c.useState([]),[m,a]=c.useState(!0),[j,g]=c.useState(!1),{checkAuthorization:v}=N(),f=async()=>{try{const{data:s}=await x.get("https://abhicares.com/api/admin/get-all-faq",{withCredentials:!0});console.log("faqs",s),p(s.data)}catch(s){console.log(s)}finally{a(!1)}};c.useEffect(()=>{f()},[]);const q=s=>{h(s),l(!u)},w=async()=>{try{const{data:s}=await x.delete(`https://abhicares.com/api/admin//delete-faq/${n}`,{withCredentials:!0});C.success("Issue deleted successfully"),f(),l(!u)}catch(s){console.log(s),l(!1),v(s)}},b=s=>{h(s),i(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsxs("div",{className:d["report-container"],children:[e.jsxs("div",{className:`d-flex justify-content-between ${d.justify}`,children:[e.jsx("h1",{className:d["recent-Articles"],children:"Faqs"}),e.jsx("img",{onClick:()=>g(!0),src:A,alt:"add faq",style:{cursor:"pointer"}})]}),e.jsxs("div",{className:d.container,children:[!m&&(t==null?void 0:t.length)===0&&e.jsx("p",{children:"No faqs found"}),m&&(t==null?void 0:t.length)===0&&e.jsx(D,{}),t==null?void 0:t.map(s=>e.jsxs("div",{className:d.helpCenter,children:[e.jsxs("div",{className:d.helpCenter_left,children:[e.jsxs("p",{children:["name: ",s.ques]}),e.jsxs("p",{children:["issue: ",s.ans]}),e.jsxs("p",{children:["created at:"," ",$(new Date(s.createdAt),"dd-MM-yyyy")]})]}),e.jsxs("div",{className:d.helpCenter_right,children:[e.jsx(_,{onClick:()=>q(s._id),cursor:"pointer",size:22,color:"red"}),e.jsx(k,{onClick:()=>b(s),cursor:"pointer"})]})]}))]})]})}),o&&e.jsx(y,{setIsModalOpen:i,getAllFaqs:f,faq:n}),j&&e.jsx(y,{setIsModalOpen:g,getAllFaqs:f}),u&&e.jsx(M,{handleDelete:w,setState:l})]})};export{V as default};
