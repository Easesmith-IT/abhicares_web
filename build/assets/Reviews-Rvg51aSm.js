import{r as d,e as V,j as s,_ as q}from"./index-if6yrKUM.js";import{W}from"./Wrapper-DsK8qFe2.js";import{L as U}from"./Loader-BnomTiAq.js";import{P as H}from"./react-bootstrap-pagination-control.esm-DLu67gnb.js";import{u as $,g as J,a as K}from"./index.esm-CdsNXrcl.js";import{D as Q}from"./DeleteModal-moBDRdw7.js";import{R as X}from"./index.esm-GoR2NAnb.js";import{R as v}from"./react-stars-DBdVKK4q.js";import{p as G}from"./index-rw__0qL1.js";import{f as A}from"./index-NDDHiImd.js";import{u as Y}from"./useDeleteApiReq-BB0v6lqY.js";import"./logo -C1Nz5jdc.js";import"./Shared.module-DD54I-nI.js";import"./useDispatch-D0Me-TH-.js";import"./iconBase-lzS6dEZZ.js";const Z="_settings_o9f4h_1",R="_filter_container_o9f4h_11",D="_filter_button_o9f4h_21",w="_filter_input_o9f4h_37",nn="_left_o9f4h_47",sn="_heading_container_o9f4h_57",en="_btn_wrapper_o9f4h_71",tn="_button_o9f4h_81",an="_container_o9f4h_97",cn="_flex_o9f4h_111",on="_item_o9f4h_125",dn="_right_o9f4h_149",rn="_status_o9f4h_159",ln="_active_o9f4h_169",pn="_inactive_o9f4h_179",l={settings:Z,filter_container:R,filter_button:D,filter_input:w,left:nn,heading_container:sn,btn_wrapper:en,button:tn,container:an,flex:cn,item:on,right:dn,status:rn,active:ln,inactive:pn},hn="_wrapper1_16asb_1",_n="_modal_16asb_27",xn="_heading_container_16asb_47",un="_viewBtn_16asb_59",fn="_heading_16asb_47",jn="_reviewGrid_16asb_83",gn="_price_16asb_109",i={wrapper1:hn,modal:_n,heading_container:xn,viewBtn:un,heading:fn,reviewGrid:jn,price:gn},mn=({setIsModalOpen:t,review:p})=>{var h,j,_,k,N,g,o,P,u,S,T,M,m,f,C,c,E,L,B,O;const{res:r,fetchData:a,isLoading:y}=$(),[n,e]=d.useState("");d.useState(!0);const x=V(),I=async()=>{a(`/admin/review-detail?reviewId=${p._id}`)};return d.useEffect(()=>{I()},[]),d.useEffect(()=>{((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&e(r==null?void 0:r.data.data)},[r]),s.jsx("div",{className:i.wrapper1,children:s.jsxs("div",{className:i.modal,children:[s.jsxs("div",{className:i.heading_container,children:[s.jsx("h4",{children:"Review Details"}),s.jsx("div",{className:i.d_flex,children:s.jsx(X,{onClick:()=>t(!1),cursor:"pointer",size:26})})]}),s.jsxs("div",{children:[s.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"10px"},children:["Rating:",s.jsx(v,{count:5,edit:!1,value:p.rating,size:24,color2:"#ffd700"})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Date:"})," ",p.date]}),s.jsxs("p",{children:[s.jsx("b",{children:"Review Type:"})," ",n==null?void 0:n.reviewType]}),s.jsxs("p",{children:[s.jsx("b",{children:"Review:"})," ",p.content]}),s.jsxs("div",{className:i.reviewGrid,children:[s.jsxs("div",{children:[s.jsx("div",{className:i.heading_container,children:s.jsx("h5",{className:i.heading,children:"User Details"})}),s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",(h=n==null?void 0:n.userId)==null?void 0:h.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone:"})," ",(j=n==null?void 0:n.userId)==null?void 0:j.phone]})]}),s.jsxs("div",{children:[s.jsx("div",{className:i.heading_container,children:s.jsx("h5",{className:i.heading,children:"Service Details"})}),s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",n!=null&&n.productId?(_=n==null?void 0:n.productId)==null?void 0:_.name:(k=n==null?void 0:n.packageId)==null?void 0:k.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Type:"})," ",n!=null&&n.productId?"Product":"Package"]}),s.jsxs("p",{children:[s.jsx("b",{children:"Description:"}),n!=null&&n.productId?s.jsx("p",{children:G((N=n==null?void 0:n.productId)==null?void 0:N.description)}):s.jsx("p",{children:((g=n==null?void 0:n.packageId)==null?void 0:g.description)&&G((o=n==null?void 0:n.packageId)==null?void 0:o.description)})]}),s.jsxs("div",{className:i.price,children:[s.jsxs("span",{children:["₹",n!=null&&n.productId?(P=n==null?void 0:n.productId)==null?void 0:P.price:(u=n==null?void 0:n.packageId)==null?void 0:u.price]}),s.jsxs("span",{children:["₹",n!=null&&n.productId?(S=n==null?void 0:n.productId)==null?void 0:S.offerPrice:(T=n==null?void 0:n.packageId)==null?void 0:T.offerPrice]})]})]}),((M=n==null?void 0:n.bookingId)==null?void 0:M.sellerId)&&s.jsxs("div",{children:[s.jsxs("div",{className:i.heading_container,children:[s.jsx("h5",{className:i.heading,children:"Partner Details"}),s.jsx("button",{onClick:()=>{var b,z,F;return x(`/admin/partners/${(z=(b=n==null?void 0:n.bookingId)==null?void 0:b.sellerId)==null?void 0:z._id}`,{state:(F=n==null?void 0:n.bookingId)==null?void 0:F.sellerId})},className:i.viewBtn,children:"View"})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",(f=(m=n==null?void 0:n.bookingId)==null?void 0:m.sellerId)==null?void 0:f.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone:"})," ",(c=(C=n==null?void 0:n.bookingId)==null?void 0:C.sellerId)==null?void 0:c.phone]})]}),(n==null?void 0:n.bookingId)&&s.jsxs("div",{children:[s.jsxs("div",{className:i.heading_container,children:[s.jsx("h5",{className:i.heading,children:"Booking Details"}),s.jsx("button",{onClick:()=>{var b;return x(`/admin/bookings/${(b=n==null?void 0:n.bookingId)==null?void 0:b._id}`,{state:n==null?void 0:n.bookingId})},className:i.viewBtn,children:"View"})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Order Value:"})," ",(E=n==null?void 0:n.bookingId)==null?void 0:E.orderValue]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Date:"})," ",((L=n==null?void 0:n.bookingId)==null?void 0:L.bookingDate)&&A(new Date((B=n==null?void 0:n.bookingId)==null?void 0:B.bookingDate),"dd-MM-yyyy")]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Time:"})," ",(O=n==null?void 0:n.bookingId)==null?void 0:O.bookingTime]})]})]})]})]})})},bn=({review:t,fetchReviews:p})=>{const[r,a]=d.useState(!1),[y,n]=d.useState(!1),{res:e,fetchData:x,isLoading:I}=Y(),h=async()=>{x(`/admin/delete-review?reviewId=${t==null?void 0:t._id}`)};return d.useEffect(()=>{((e==null?void 0:e.status)===200||(e==null?void 0:e.status)===201)&&(q.success("Review deleted successfully"),p())},[e]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:l.item,children:s.jsxs("div",{className:l.left,children:[s.jsxs("div",{className:l.flex,children:[s.jsxs("p",{children:["Title: ",t.title]}),s.jsxs("div",{className:l.right,children:[s.jsx(J,{onClick:()=>n(!0),cursor:"pointer",size:22,color:"black"}),s.jsx(K,{onClick:()=>a(!0),cursor:"pointer",size:22,color:"red"})]})]}),s.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"10px"},children:["Rating:",s.jsx(v,{count:5,edit:!1,value:t.rating,size:24,color2:"#ffd700"})]}),s.jsxs("p",{children:["Date: ",t.date]}),s.jsxs("p",{children:["Review: ",t.content]})]})}),r&&s.jsx(Q,{handleDelete:h,setState:a}),y&&s.jsx(mn,{setIsModalOpen:n,review:t})]})},Fn=()=>{const{res:t,fetchData:p,isLoading:r}=$(),{res:a,fetchData:y,isLoading:n}=$(),{res:e,fetchData:x,isLoading:I}=$(),[h,j]=d.useState([]),[_,k]=d.useState(1),[N,g]=d.useState(0),[o,P]=d.useState({date:"",serviceType:"",type:""}),[u,S]=d.useState([]);console.log("filter",o);const T=async()=>{p("/admin/get-all-category")};d.useEffect(()=>{T()},[]),d.useEffect(()=>{((t==null?void 0:t.status)===200||(t==null?void 0:t.status)===201)&&S(t==null?void 0:t.data.data)},[t]);const M=async c=>{k(c)},m=async()=>{y(`/admin/get-all-reviews?page=${_}`)};d.useEffect(()=>{((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&(console.log("getReviewsRes",a),j(a==null?void 0:a.data.data),g(a==null?void 0:a.data.totalPages))},[a]);const f=c=>{const{name:E,value:L}=c.target;P({...o,[E]:L})},C=async()=>{x(`/admin/filter-review?date=${o.date&&A(new Date(o.date),"dd/MM/yyyy")}&serviceType=${o.serviceType}&reviewType=${o.type}&page=${_}`)};return d.useEffect(()=>{!o.date&&!o.serviceType&&!o.type?m():C()},[_,o.date,o.serviceType,o.type]),d.useEffect(()=>{((e==null?void 0:e.status)===200||(e==null?void 0:e.status)===201)&&(console.log("filterReviewsRes",e),g(e==null?void 0:e.data.totalPages),j(e==null?void 0:e.data.data))},[e]),s.jsx(W,{children:s.jsxs("div",{className:l.settings,children:[s.jsxs("div",{className:l.heading_container,children:[s.jsx("h1",{children:"Reviews"}),s.jsxs("div",{className:l.filter_container,children:[s.jsx("input",{type:"date",name:"date",value:o.date,onChange:f,placeholder:"Start Date",className:l.filter_input}),s.jsxs("select",{name:"serviceType",value:o.serviceType,onChange:f,className:l.filter_input,children:[s.jsx("option",{value:"",children:"Select Service"}),u==null?void 0:u.map(c=>s.jsx("option",{value:c==null?void 0:c._id,children:c==null?void 0:c.name},c==null?void 0:c._id))]}),s.jsxs("select",{name:"type",value:o.type,onChange:f,className:l.filter_input,children:[s.jsx("option",{value:"",children:"Select Type"}),s.jsx("option",{value:"service",children:"Service"}),s.jsx("option",{value:"product",children:"Product"})]})]})]}),n||I?s.jsx(U,{}):h.length===0?s.jsx("p",{children:"No reviews found"}):s.jsx("div",{className:l.container,children:h.map(c=>s.jsx(bn,{review:c,fetchReviews:m},c._id))}),s.jsx("div",{style:{marginTop:"20px"},children:s.jsx(H,{changePage:M,limit:10,page:_,total:N+"0"})})]})})};export{Fn as default};
