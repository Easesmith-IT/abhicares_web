import{r as l,_ as D,j as e,f as B,e as G}from"./index-jh_7jsAh.js";import{c as u}from"./Settings.module-DMv0i3HJ.js";import{W as J}from"./Wrapper-BxFEiEae.js";import{R as P}from"./index.esm-DQbcOE5R.js";import{u as E}from"./useAuthorization-DSR_MjyQ.js";import{e as K,b as Q}from"./index.esm-DhcM-hNp.js";import{u as I}from"./usePatchApiReq-BnbJScfp.js";import{u as F}from"./usePostApiReq-BHnLpQjt.js";import{F as V}from"./index.esm-Cbj_POBX.js";import{u as L,a as X}from"./index.esm-CbTUZ4YC.js";import{L as Y}from"./Loader-DWDw_Ctb.js";import{D as Z}from"./DeleteModal-D9-MpWwM.js";import{u as R}from"./useDeleteApiReq-BO4SlYl6.js";import"./logo -C1Nz5jdc.js";import"./iconBase-CTzivY3m.js";const b="_wrapper_1rwnw_1",A="_modal_1rwnw_29",ee="_heading_container_1rwnw_49",se="_form_1rwnw_61",ae="_input_container_1rwnw_75",te="_input_1rwnw_75",ne="_icon_1rwnw_101",re="_button_wrapper_1rwnw_125",oe="_button_1rwnw_125",le="_permission_1rwnw_151",ce="_d_flex_1rwnw_163",c={wrapper:b,modal:A,heading_container:ee,form:se,input_container:ae,input:te,icon:ne,button_wrapper:re,button:oe,permission:le,d_flex:ce},ie="_wrapper_qrszr_1",de="_modal_qrszr_27",pe="_heading_container_qrszr_43",he="_form_qrszr_55",_e="_input_container_qrszr_69",xe="_input_qrszr_69",ue="_button_wrapper_qrszr_101",me="_button_qrszr_101",fe="_permission_qrszr_127",je="_d_flex_qrszr_139",i={wrapper:ie,modal:de,heading_container:pe,form:he,input_container:_e,input:xe,button_wrapper:ue,button:me,permission:fe,d_flex:je},k=({setIsModalOpen:d,adminId:s})=>{const n=l.useRef(),r=l.useRef(),[g,p]=l.useState(null);E();const{res:t,fetchData:C}=I(),m=async _=>{_.preventDefault(),console.log("password updated");const f=n.current.value,h=r.current.value;await C("/admin/update-admin-password",{currentPassword:f,newPassword:h,adminId:s})};return l.useEffect(()=>{((t==null?void 0:t.status)===200||(t==null?void 0:t.status)===201)&&(console.log("updatePwdRes",t),D.success("Password Updated Successfully!"),d(!1))},[t]),e.jsx("div",{className:i.wrapper,children:e.jsxs("div",{className:i.modal,children:[e.jsxs("div",{className:i.heading_container,children:[e.jsx("h4",{children:"Update Password"}),e.jsx("div",{className:i.d_flex,children:e.jsx(P,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),g&&e.jsx("h6",{style:{textAlign:"center",color:"orangered",fontWeight:"bold"},children:g}),e.jsxs("form",{onSubmit:m,className:i.form,children:[e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"current-password",children:"Current Password"}),e.jsx("input",{className:i.input,ref:n,type:"password",name:"current-password",id:"current-password",placeholder:"enter current password"})]}),e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"new-password",children:"New Password"}),e.jsx("input",{className:i.input,ref:r,type:"password",name:"new-password",id:"new-password",placeholder:"enter new password"})]}),e.jsx("div",{className:i.button_wrapper,children:e.jsx("button",{className:i.button,children:"Update"})})]})]})})},O=({setIsModalOpen:d,subAdmin:s,getSubadmins:n})=>{const{res:r,fetchData:g,isLoading:p}=F(),[t,C]=l.useState({name:(s==null?void 0:s.name)||"",password:(s==null?void 0:s.password)||"",role:(s==null?void 0:s.role)||"",adminId:(s==null?void 0:s.adminId)||""}),[m,_]=l.useState(!0),[f,h]=l.useState(!1);E();const[a,j]=l.useState({dashboard:(s==null?void 0:s.permissions.dashboard)||"",banners:(s==null?void 0:s.permissions.banners)||"",orders:(s==null?void 0:s.permissions.orders)||"",bookings:(s==null?void 0:s.permissions.bookings)||"",services:(s==null?void 0:s.permissions.services)||"",partners:(s==null?void 0:s.permissions.partners)||"",customers:(s==null?void 0:s.permissions.customers)||"",offers:(s==null?void 0:s.permissions.offers)||"",availableCities:(s==null?void 0:s.permissions.availableCities)||"",payments:(s==null?void 0:s.permissions.payments)||"",enquiry:(s==null?void 0:s.permissions.enquiry)||"",helpCenter:(s==null?void 0:s.permissions.helpCenter)||"",settings:(s==null?void 0:s.permissions.settings)||"",reviews:(s==null?void 0:s.permissions.reviews)||"",notifications:(s==null?void 0:s.permissions.notifications)||"",sellerCashout:(s==null?void 0:s.permissions.sellerCashout)||""}),v=o=>{const{name:q,value:z}=o.target;C({...t,[q]:z})},$=()=>{_(!m)},w=(o,q)=>{j({...a,[o]:q})},{res:N,fetchData:M}=I(),U=async o=>{if(o.preventDefault(),!t.adminId||!t.name||!t.password||!t.role||!a.dashboard||!a.banners||!a.orders||!a.bookings||!a.services||!a.partners||!a.customers||!a.offers||!a.availableCities||!a.payments||!a.enquiry||!a.helpCenter||!a.settings||!a.reviews||!a.notifications||!a.sellerCashout){D.error("All fields are required");return}s?await M(`/admin/update-sub-admin/${s._id}`,{...t,permissions:a}):g("/admin/create-Admin",{...t,permissions:a})};return l.useEffect(()=>{((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&(D.success("SubAdmin added successfully"),d(!1),n())},[r]),l.useEffect(()=>{((N==null?void 0:N.status)===200||(N==null?void 0:N.status)===201)&&(D.success("SubAdmin updated successfully"),d(!1),n())},[N]),e.jsxs("div",{className:c.wrapper,children:[e.jsxs("div",{className:c.modal,children:[e.jsxs("div",{className:c.heading_container,children:[e.jsxs("h4",{children:[s?"Update":"Add"," Sub Admin"]}),e.jsx("div",{className:c.d_flex,children:e.jsx(P,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{className:c.form,children:[e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"adminId",children:"User Name"}),e.jsx("input",{className:c.input,onChange:v,value:t.adminId,type:"text",name:"adminId",id:"adminId",placeholder:"enter your username"})]}),e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:c.input,onChange:v,value:t.name,type:"text",name:"name",id:"name",placeholder:"enter your name"})]}),!s&&e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{className:c.input,onChange:v,value:t.password,type:m?"password":"text",name:"password",id:"password",placeholder:"enter your password"}),m?e.jsx(K,{className:c.icon,onClick:$}):e.jsx(Q,{className:c.icon,onClick:$})]}),e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"role",children:"Role"}),e.jsxs("select",{className:c.input,name:"role",value:t.role,onChange:v,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"subAdmin",children:"Sub Admin"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"",children:"permissions"}),e.jsx("div",{children:Object.keys(a).map((o,q)=>e.jsxs("div",{className:c.permission,children:[e.jsx("p",{children:o}),e.jsxs("div",{className:c.d_flex,children:[e.jsxs("div",{className:c.d_flex,children:[e.jsx("input",{onChange:z=>w(o,"read"),type:"radio",name:`${o}-read`,id:`${o}-read`,value:a[o],checked:a[o]==="read"}),e.jsx("span",{children:"read"})]}),e.jsxs("div",{className:c.d_flex,children:[e.jsx("input",{onChange:z=>w(o,"write"),type:"radio",name:`${o}-write`,id:`${o}-write`,value:a[o],checked:a[o]==="write"}),e.jsx("span",{children:"write"})]}),e.jsxs("div",{className:c.d_flex,children:[e.jsx("input",{onChange:z=>w(o,"none"),type:"radio",name:`${o}-none`,id:`${o}-none`,value:a[o],checked:a[o]==="none"}),e.jsx("span",{children:"none"})]})]})]},o))})]}),e.jsxs("div",{className:c.button_wrapper,children:[s&&e.jsx("button",{className:c.button,onClick:o=>{o.preventDefault(),h(!0)},children:"Update Password"}),e.jsx("button",{className:c.button,onClick:U,children:p?"Loading...":s?"Update":"Add"})]})]})]}),f&&e.jsx(k,{setIsModalOpen:h,adminId:s==null?void 0:s.adminId})]})},we=({setIsModalOpen:d,subAdmin:s})=>{const[n,r]=l.useState({title:"",page:"",desc:""});E();const g=async _=>{const{value:f}=_.target;try{r(a=>({...a,page:f}));const{data:h}=await B.get(`https://abhicares.com/api/content/get-seo-by-page?page=${f}`,{withCredentials:!0});console.log("seo",h),r(a=>({...a,title:h.seo.seoTitle,desc:h.seo.seoDescription}))}catch(h){console.log(h)}},p=async _=>{const{name:f,value:h}=_.target;r({...n,[f]:h})},{res:t,fetchData:C}=I(),m=async _=>{_.preventDefault(),console.log("page",n.page),!(!n.title||!n.desc)&&await C("/content/update-seo-by-page",{page:n.page,seoDescription:n.desc,seoTitle:n.title})};return l.useEffect(()=>{((t==null?void 0:t.status)===200||(t==null?void 0:t.status)===201)&&(console.log("seoRes",t),D.success("Seo updated successfully"),d(!1))},[t]),e.jsx("div",{className:i.wrapper,children:e.jsxs("div",{className:i.modal,children:[e.jsxs("div",{className:i.heading_container,children:[e.jsx("h4",{children:"Manage SEO"}),e.jsx("div",{className:i.d_flex,children:e.jsx(P,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:m,className:i.form,children:[e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"page",children:"Page"}),e.jsxs("select",{className:i.input,name:"page",value:n.page,onChange:g,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"womens-salon-spa",children:"Women's salon & spa"}),e.jsx("option",{value:"makeup-mehandi",children:"Makeup & Mehandi"}),e.jsx("option",{value:"mens-salon-massage",children:"Men's Salon & Massage"}),e.jsx("option",{value:"home-care",children:"Home Care"}),e.jsx("option",{value:"home-repair",children:"Home Repair"}),e.jsx("option",{value:"appliance-repair",children:"Appliance Repair"}),e.jsx("option",{value:"home-page",children:"Home Page"}),e.jsx("option",{value:"about-us",children:"About Us"}),e.jsx("option",{value:"register-as-professional",children:"Register as Professional"}),e.jsx("option",{value:"blogs",children:"Blogs"})]})]}),e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{className:i.input,onChange:p,value:n.title,type:"text",name:"title",id:"title",placeholder:"enter title"})]}),e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"desc",children:"Description"}),e.jsx("textarea",{className:i.input,onChange:p,value:n.desc,name:"desc",id:"desc",placeholder:"enter description"})]}),e.jsx("div",{className:i.button_wrapper,children:e.jsx("button",{className:i.button,children:"Update"})})]})]})})},ge="_wrapper_qrszr_1",ve="_modal_qrszr_27",Ne="_heading_container_qrszr_43",Ce="_form_qrszr_55",Se="_input_container_qrszr_69",$e="_input_qrszr_69",Me="_button_wrapper_qrszr_101",qe="_button_qrszr_101",De="_permission_qrszr_127",ze="_d_flex_qrszr_139",S={wrapper:ge,modal:ve,heading_container:Ne,form:Ce,input_container:Se,input:$e,button_wrapper:Me,button:qe,permission:De,d_flex:ze},ye=({setIsModalOpen:d,subAdmin:s})=>{const{res:n,fetchData:r,isLoading:g}=F(),{res:p,fetchData:t,isLoading:C}=L(),[m,_]=l.useState(""),f=async()=>{t("/admin/get-refer-and-earn-amount")};l.useEffect(()=>{f()},[]),l.useEffect(()=>{var j,v;((p==null?void 0:p.status)===200||(p==null?void 0:p.status)===201)&&_((v=(j=p==null?void 0:p.data)==null?void 0:j.doc[0])==null?void 0:v.amount)},[p]);const h=async j=>{const{name:v,value:$}=j.target;_($)},a=async j=>{j.preventDefault(),m&&r("/admin/update-refer-and-earn-amount",{amount:m})};return l.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(D.success(n==null?void 0:n.data.message),d(!1))},[n]),e.jsx("div",{className:S.wrapper,children:e.jsxs("div",{className:S.modal,children:[e.jsxs("div",{className:S.heading_container,children:[e.jsx("h4",{children:"Update Refer and Earn"}),e.jsx("div",{className:S.d_flex,children:e.jsx(P,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:a,className:S.form,children:[e.jsxs("div",{className:S.input_container,children:[e.jsx("label",{htmlFor:"amount",children:"Amount"}),e.jsx("input",{className:S.input,onChange:h,value:m,type:"number",name:"amount",id:"amount",placeholder:"enter amount"})]}),e.jsx("div",{className:S.button_wrapper,children:e.jsx("button",{className:S.button,children:g?"Loading...":"Update"})})]})]})})},Qe=()=>{const{res:d,fetchData:s,isLoading:n}=R(),{res:r,fetchData:g,isLoading:p}=L(),[t,C]=l.useState(!1),[m,_]=l.useState(!1),[f,h]=l.useState(!1),[a,j]=l.useState(!1),[v,$]=l.useState(!1),[w,N]=l.useState({}),[M,U]=l.useState([]),[o,q]=l.useState(!1);E();const z=G(),H=x=>{N(x),h(!f)},W=x=>{N(x),j(!a)},T=async()=>{s(`/admin/delete-sub-admin?subAdminId=${w==null?void 0:w._id}&role=${w==null?void 0:w.role}`)};l.useEffect(()=>{((d==null?void 0:d.status)===200||(d==null?void 0:d.status)===201)&&(y(),D.success("Subadmin deleted successfully"),j(!a))},[d]);const y=async()=>{g("/admin/get-sub-admins")};return l.useEffect(()=>{y()},[]),l.useEffect(()=>{var x;((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&U((x=r==null?void 0:r.data)==null?void 0:x.admins)},[r]),e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsxs("div",{className:u.settings,children:[e.jsxs("div",{className:u.heading_container,children:[e.jsx("h1",{children:"Settings"}),e.jsxs("div",{className:u.btn_wrapper,children:[e.jsx("button",{onClick:()=>q(!0),className:u.button,children:"Update Refer and Earn"}),e.jsx("button",{onClick:()=>_(!0),className:u.button,children:"Manage SEO"}),e.jsx("button",{onClick:()=>C(!0),className:u.button,children:"Add Subadmin"}),e.jsx("button",{onClick:()=>$(!0),className:u.button,children:"Update Password"}),e.jsx("button",{onClick:()=>z("/admin/settings/manage-comision"),className:u.button,children:"Manage Comision"})]})]}),p&&M.length===0&&e.jsx(Y,{}),e.jsxs("div",{className:u.container,children:[!p&&M.length===0&&e.jsx("p",{children:"No subAdmins found"}),M==null?void 0:M.map(x=>e.jsxs("div",{className:u.item,children:[e.jsxs("div",{className:u.left,children:[e.jsxs("p",{children:["Name: ",x.name]}),e.jsxs("p",{children:["Username: ",x.adminId]}),e.jsxs("p",{children:["Role: ",x.role]}),e.jsxs("p",{children:["Status:"," ",e.jsx("span",{className:`${u.status} ${x.status?u.active:u.inactive}`,children:x.status?"Active":"InActive"})]})]}),e.jsxs("div",{className:u.right,children:[e.jsx(V,{onClick:()=>H(x),cursor:"pointer",size:20}),e.jsx(X,{onClick:()=>W(x),cursor:"pointer",size:22,color:"red"})]})]},x._id))]})]})}),m&&e.jsx(we,{setIsModalOpen:_}),o&&e.jsx(ye,{setIsModalOpen:q}),t&&e.jsx(O,{setIsModalOpen:C,getSubadmins:y}),f&&e.jsx(O,{setIsModalOpen:h,getSubadmins:y,subAdmin:w}),v&&e.jsx(k,{setIsModalOpen:$}),a&&e.jsx(Z,{setState:j,handleDelete:T})]})};export{Qe as default};
