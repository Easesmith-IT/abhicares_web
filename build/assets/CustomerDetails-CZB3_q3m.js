import{r as c,j as s,n as y,e as C}from"./index-eSIAY8Uv.js";import{W as $}from"./Wrapper-C_MBzJws.js";import{R as k}from"./index.esm-DgtiecaY.js";/* empty css                   */import{u}from"./index.esm-DOqJpdRb.js";import{L as f}from"./Loader-BUdzUg4g.js";import{P as D}from"./react-bootstrap-pagination-control.esm-DaLKDnki.js";import{f as j}from"./index-BFFTBMbo.js";import"./logo -C1Nz5jdc.js";import"./Shared.module-DD54I-nI.js";import"./useDispatch-BjeBiUzI.js";import"./iconBase-BPNpYAOT.js";const w="_wrapper_17jzx_1",A="_modal_17jzx_27",P="_heading_container_17jzx_47",L="_form_17jzx_59",M="_input_container_17jzx_73",I="_input_17jzx_73",S="_button_wrapper_17jzx_105",E="_button_17jzx_105",B="_addresses_container_17jzx_131",O="_address_17jzx_131",l={wrapper:w,modal:A,heading_container:P,form:L,input_container:M,input:I,button_wrapper:S,button:E,addresses_container:B,address:O},T=({setIsModalOpen:p,userId:r})=>{const{res:n,fetchData:x,isLoading:d}=u(),[t,o]=c.useState([]),h=async()=>{x(`/admin/get-all-addresses/${r}`)};return c.useEffect(()=>{h()},[]),c.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&o(n==null?void 0:n.data.addresses)},[n]),s.jsx("div",{className:l.wrapper,children:s.jsxs("div",{className:l.modal,children:[s.jsxs("div",{className:l.heading_container,children:[s.jsx("h4",{children:"User Addresses"}),s.jsx("div",{className:l.d_flex,children:s.jsx(k,{onClick:()=>p(!1),cursor:"pointer",size:26})})]}),s.jsxs("div",{className:l.addresses_container,children:[!d&&(t==null?void 0:t.length)===0&&s.jsx("p",{children:"No address found"}),d&&(t==null?void 0:t.length)===0&&s.jsx(f,{}),t&&t.map(i=>s.jsx("div",{className:l.address,children:s.jsxs("div",{className:l.partner_left,children:[s.jsxs("p",{children:[s.jsx("b",{children:"Address Line:"})," ",i.addressLine]}),s.jsxs("p",{children:[s.jsx("b",{children:"Landmark:"})," ",i.landmark]}),s.jsxs("p",{children:[s.jsx("b",{children:"City:"})," ",i.city]}),s.jsxs("p",{children:[s.jsx("b",{children:"Pincode:"})," ",i.pincode]}),s.jsxs("p",{children:[s.jsx("b",{children:"Default Address:"})," ",`${i.defaultAddress}`]}),s.jsxs("p",{children:[s.jsx("b",{children:"Co-ordinates:"})," ",`${i.location.coordinates[0]}, ${i.location.coordinates[1]}`]})]})}))]})]})})},U="_heading_container_zfl5n_1",V="_contianer_zfl5n_13",W="_mt_zfl5n_39",q="_btn_zfl5n_49",F="_orders_zfl5n_67",G="_status_zfl5n_79",J="_Cancelled_zfl5n_91",H="_Completed_zfl5n_99",K="_alloted_zfl5n_109",Q="_pending_zfl5n_119",X="_OutOfDelivery_zfl5n_127",Y="_active_zfl5n_137",Z="_inactive_zfl5n_147",R="_items_zfl5n_155",ss="_button_zfl5n_167",e={heading_container:U,contianer:V,mt:W,btn:q,orders:F,status:G,Cancelled:J,Completed:H,alloted:K,pending:Q,OutOfDelivery:X,active:Y,inactive:Z,items:R,button:ss},xs=()=>{const[p,r]=c.useState(!1),{res:n,fetchData:x,isLoading:d}=u(),{state:t}=y(),[o,h]=c.useState([]),[i,g]=c.useState(1),[m,v]=c.useState(1),b=C(),N=async a=>{v(a)},z=async()=>{x(`/admin/get-customer-bookings/${t==null?void 0:t._id}?page=${m}`)};return c.useEffect(()=>{z()},[m]),c.useEffect(()=>{var a,_;((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(console.log("getOrdersRes",n),h(n==null?void 0:n.data.data),g(Number((_=(a=n==null?void 0:n.data)==null?void 0:a.pagination)==null?void 0:_.totalPages)))},[n]),s.jsx($,{children:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:e.heading_container,children:[s.jsx("h4",{children:"Customer Info"}),s.jsx("div",{className:e.d_flex,children:s.jsx("button",{onClick:()=>r(!0),className:e.btn,children:"View all address"})})]}),s.jsxs("div",{style:{marginTop:"10px"},children:[s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",t==null?void 0:t.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone:"})," ",t==null?void 0:t.phone]}),s.jsxs("p",{children:[s.jsx("b",{children:"Status:"})," ",s.jsx("span",{style:{color:t!=null&&t.status?"green":"red",fontWeight:700},children:t!=null&&t.status?"Active":"Inactive"})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Joined Date:"})," ",(t==null?void 0:t.createdAt)&&j(new Date(t==null?void 0:t.createdAt),"dd/MM/yyyy")]})]}),s.jsxs("div",{style:{marginTop:"20px"},children:[s.jsx("h4",{children:"Customer Bookings"}),s.jsxs("div",{children:[s.jsxs("div",{className:e.orders,children:[s.jsx("h5",{className:e["t-op"],style:{width:"200px"},children:"Booking Id"}),s.jsx("h5",{className:e["t-op"],children:"Booking Date"}),s.jsx("h5",{className:`${e["t-op"]}`,children:"Status"}),s.jsx("h5",{className:`${e["t-op"]}`,children:"Booking Amount"}),s.jsx("h5",{className:e["t-op"],children:"Details"})]}),s.jsxs("div",{className:e.items,children:[!d&&(o==null?void 0:o.length)===0&&s.jsx("p",{children:"No Booking found"}),d&&s.jsx(f,{}),o==null?void 0:o.map((a,_)=>s.jsxs("div",{className:e.orders,children:[s.jsx("p",{className:`${e["t-op-nextlvl"]}`,style:{width:"200px"},children:a==null?void 0:a.bookingId}),s.jsx("p",{className:e["t-op-nextlvl"],children:j(new Date(a.createdAt),"dd-MM-yyyy")}),s.jsx("div",{children:s.jsx("span",{className:`${e["t-op-nextlvl"]} ${e.status} ${a.status==="Cancelled"?e.Cancelled:a.status==="Completed"?e.Completed:a.status==="pending"?e.pending:e.OutOfDelivery}`,children:a.status})}),s.jsxs("p",{className:`${e["t-op-nextlvl"]}`,children:["â‚¹",a==null?void 0:a.itemTotalValue]}),s.jsx("p",{className:e["t-op-nextlvl"],children:s.jsx("button",{onClick:()=>b(`/admin/bookings/${a._id}`,{state:a}),className:e.button,children:"View Details"})})]},_))]}),s.jsx("div",{style:{marginTop:"20px"},children:s.jsx(D,{changePage:N,limit:10,page:m,total:i+"0"})})]})]}),p&&s.jsx(T,{userId:t._id,setIsModalOpen:r})]})})};export{xs as default};
