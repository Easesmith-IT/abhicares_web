import{j as s,r as o,_ as $,f as v,p as T}from"./index-lY8eDmQj.js";import{W as as,c as p}from"./Wrapper-C5Vyjcs6.js";import{L as I}from"./Loader-D1crzail.js";import{R as k}from"./index.esm-TZhK3vYx.js";import"./index-9JSMm1vn.js";import{f as q}from"./index-3HMGIBDb.js";import{G as ts}from"./iconBase-BlupGJxB.js";/* empty css                   */import{u as ns}from"./useAuthorization-ZL8Fu2nK.js";import"./logo -C1Nz5jdc.js";import"./LogoutModal-CpkpXklC.js";const cs="_wrapper_62yar_1",is="_modal_62yar_27",os="_heading_container_62yar_47",rs="_contianer_62yar_59",ls="_mt_62yar_85",ds="_item_62yar_93",hs="_img_62yar_119",f={wrapper:cs,modal:is,heading_container:os,contianer:rs,mt:ls,item:ds,img:hs},ps=({setSellerOrderInfoModal:e,sellerOrder:a})=>{var l,_,c,j,u,h,g;if(console.log("seller-order",a),!a)return null;const n=!!a.package;return s.jsx("div",{className:f.wrapper,children:s.jsxs("div",{className:f.modal,children:[s.jsxs("div",{className:f.heading_container,children:[s.jsx("h4",{children:"Seller Order Info"}),s.jsx("div",{className:f.d_flex,children:s.jsx(k,{onClick:()=>e(!1),cursor:"pointer",size:26})})]}),s.jsxs("div",{className:f.contianer,children:[s.jsxs("p",{children:[s.jsx("b",{children:"Order Id:"})," ",a==null?void 0:a.orderId]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Date:"})," ",q(new Date(a.bookingDate),"dd-MM-yyyy")]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Time:"})," ",a==null?void 0:a.bookingTime]}),s.jsxs("p",{children:[s.jsx("b",{children:"Order Total:"})," ₹",a==null?void 0:a.orderValue]}),s.jsxs("p",{children:[s.jsx("b",{children:"Status: "}),a==null?void 0:a.status]})]}),s.jsx("h5",{children:n?"Package":"Product"}),s.jsxs("div",{className:f.item,children:[s.jsxs("div",{children:[s.jsx("img",{className:f.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${n?(l=a==null?void 0:a.package)==null?void 0:l.imageUrl[0]:(_=a==null?void 0:a.product)==null?void 0:_.imageUrl[0]}`,alt:"product"}),s.jsxs("div",{children:[s.jsx("h6",{children:n?"Package":"Product"}),s.jsx("p",{children:a.package?"Package":"Product"})]})]}),s.jsxs("p",{children:["Qty: ",a.quantity]}),s.jsxs("p",{children:["₹",n?a.package.offerPrice:a.product.offerPrice]})]}),s.jsxs("div",{style:{marginTop:"10px"},children:[s.jsx("h5",{children:"User Info"}),s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",(c=a==null?void 0:a.userId)==null?void 0:c.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone:"})," ",(j=a==null?void 0:a.userId)==null?void 0:j.phone]}),s.jsx("p",{children:s.jsx("b",{children:"Address Line:"})}),s.jsx("p",{children:(u=a==null?void 0:a.userAddress)==null?void 0:u.addressLine}),s.jsxs("p",{children:[s.jsx("b",{children:"Landmark:"})," ",(h=a==null?void 0:a.userAddress)==null?void 0:h.landmark]}),s.jsxs("p",{children:[s.jsx("b",{children:"Pincode:"})," ",(g=a==null?void 0:a.userAddress)==null?void 0:g.pincode]})]})]})})},us="_contianer_1ajvy_1",_s="_select_1ajvy_23",xs="_h2_1ajvy_47",js="_service_container_1ajvy_57",ms="_status_1ajvy_69",gs="_active_1ajvy_83",vs="_inactive_1ajvy_93",fs="_flex_1ajvy_101",bs="_reportContainer_1ajvy_111",ys="_d_flex_1ajvy_151",Ns="_item1_1ajvy_189",ws="_h3_1ajvy_203",Cs="_button_1ajvy_211",Ss="_cash_btn_1ajvy_227",$s="_tran_contianer_1ajvy_249",Is="_card_1ajvy_267",ks="_update_btn_1ajvy_287",i={contianer:us,select:_s,h2:xs,service_container:js,status:ms,active:gs,inactive:vs,flex:fs,reportContainer:bs,d_flex:ys,"report-body":"_report-body_1ajvy_179","report-topic-heading":"_report-topic-heading_1ajvy_187",item1:Ns,h3:ws,button:Cs,cash_btn:Ss,tran_contianer:$s,card:Is,update_btn:ks};function Ps(e){return ts({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.0049 7H21.0049C21.5572 7 22.0049 7.44772 22.0049 8V20C22.0049 20.5523 21.5572 21 21.0049 21H3.00488C2.4526 21 2.00488 20.5523 2.00488 20V4C2.00488 3.44772 2.4526 3 3.00488 3H18.0049V7ZM4.00488 9V19H20.0049V9H4.00488ZM4.00488 5V7H16.0049V5H4.00488ZM15.0049 13H18.0049V15H15.0049V13Z"}}]})(e)}const As="_wrapper_wwl1b_1",Vs="_modal_wwl1b_27",Ds="_heading_container_wwl1b_47",Es="_tran_contianer_wwl1b_59",N={wrapper:As,modal:Vs,heading_container:Ds,tran_contianer:Es},Ls="_card_ogq3k_1",Ms="_update_btn_ogq3k_25",Hs="_red_ogq3k_43",Ws="_green_ogq3k_45",Fs="_blue_ogq3k_47",w={card:Ls,update_btn:Ms,red:Hs,green:Ws,blue:Fs},Us="_wrapper_15p3r_1",zs="_modal_15p3r_27",Bs="_heading_container_15p3r_47",Ts="_form_15p3r_59",qs="_input_container_15p3r_73",Zs="_input_15p3r_73",Gs="_button_wrapper_15p3r_105",Js="_button_15p3r_105",d={wrapper:Us,modal:zs,heading_container:Bs,form:Ts,input_container:qs,input:Zs,button_wrapper:Gs,button:Js},Qs=({setIsUpdateModalOpen:e,setIsViewWalletModalOpen:a,cashOutReq:n="",getSellerWallet:l})=>{const{checkAuthorization:_}=ns(),[c,j]=o.useState({status:(n==null?void 0:n.status)||"",description:(n==null?void 0:n.description)||"",paymentId:(n==null?void 0:n.paymentId)||"",date:(n==null?void 0:n.date)||""});console.log("cashOutReq",n);const u=g=>{const{name:x,value:C}=g.target;j({...c,[x]:C})},h=async g=>{if(g.preventDefault(),c.status==="cancelled"&&(!c.description||!c.status)){$.error("All Fields are required");return}if(c.status==="completed"&&(!c.description||!c.status||!c.date||!c.paymentId)){$.error("All Fields are required");return}try{const{data:x}=await v.patch(`https://abhicares.com/api/admin/approve-cashout/${n._id}`,{...c},{withCredentials:!0});$.success("Cashout request updated successfully"),e(!1),l()}catch(x){e(!1),a(!1),_(x),console.log(x)}};return s.jsx("div",{className:d.wrapper,children:s.jsxs("div",{className:d.modal,children:[s.jsxs("div",{className:d.heading_container,children:[s.jsx("h4",{children:"Update CashOut Request"}),s.jsx("div",{className:d.d_flex,children:s.jsx(k,{onClick:()=>e(!1),cursor:"pointer",size:26})})]}),s.jsxs("form",{onSubmit:h,className:d.form,children:[s.jsxs("div",{className:d.input_container,children:[s.jsx("label",{htmlFor:"status",children:"Status"}),s.jsxs("select",{onChange:u,value:c.status,className:d.input,name:"status",id:"status",children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),c.status!=="cancelled"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:d.input_container,children:[s.jsx("label",{htmlFor:"paymentId",children:"Payment Id"}),s.jsx("input",{className:d.input,onChange:u,value:c.paymentId,type:"text",name:"paymentId",id:"paymentId"})]}),s.jsxs("div",{className:d.input_container,children:[s.jsx("label",{htmlFor:"date",children:"Date"}),s.jsx("input",{className:d.input,onChange:u,value:c.date,type:"date",name:"date",id:"date"})]})]}),s.jsxs("div",{className:d.input_container,children:[s.jsx("label",{htmlFor:"description",children:"Description"}),s.jsx("input",{className:d.input,onChange:u,value:c.description,type:"text",name:"description",id:"description"})]}),s.jsx("div",{className:d.button_wrapper,children:s.jsx("button",{className:d.button,children:"Update"})})]})]})})},Z=({item:e="",getSellerWallet:a,setIsViewWalletModalOpen:n})=>{const[l,_]=o.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:w.card,children:[s.jsxs("div",{children:[s.jsx("h6",{children:e==null?void 0:e._id}),s.jsxs("p",{children:["Date : ",e.createdAt&&q(new Date(e==null?void 0:e.createdAt),"dd-MM-yyyy")]})]}),s.jsxs("div",{children:[s.jsxs("h6",{children:["₹ ",e==null?void 0:e.value]}),s.jsx("p",{className:e.status==="cancelled"?w.red:e.status==="completed"?w.green:w.blue,children:e==null?void 0:e.status})]}),s.jsx("button",{onClick:()=>_(!0),className:w.update_btn,children:"Update"})]}),l&&s.jsx(Qs,{setIsUpdateModalOpen:_,cashOutReq:e,getSellerWallet:a,setIsViewWalletModalOpen:n})]})},Rs=({setIsViewWalletModalOpen:e,id:a,getSellerWallet:n})=>{const[l,_]=o.useState([]),[c,j]=o.useState(!0);T();const u=async()=>{try{const{data:h}=await v.get(`https://abhicares.com/api/admin/get-seller-wallet-cashout-requests/${a}`,{withCredentials:!0});_(h.cashouts),console.log("cash req",h)}catch(h){console.log(h)}finally{j(!1)}};return o.useEffect(()=>{u()},[]),s.jsx("div",{className:N.wrapper,children:s.jsxs("div",{className:N.modal,children:[s.jsxs("div",{className:N.heading_container,children:[s.jsx("h4",{children:"Wallet"}),s.jsx("div",{className:N.d_flex,children:s.jsx(k,{onClick:()=>e(!1),cursor:"pointer",size:26})})]}),c&&l.length===0&&s.jsx(I,{}),!c&&l.length===0&&s.jsx("p",{children:"No cashOut Requests found"}),s.jsx("div",{className:N.tran_contianer,children:l==null?void 0:l.map(h=>s.jsx(Z,{item:h,getSellerWallet:n,setIsViewWalletModalOpen:e},h._id))})]})})},oe=()=>{var E,L,M,H,W,F,U,z,B;const[e,a]=o.useState(""),[n,l]=o.useState([]),[_,c]=o.useState(!0),[j,u]=o.useState(!0),[h,g]=o.useState(""),[x,C]=o.useState(""),[G,J]=o.useState({}),[Q,P]=o.useState(!1),[R,A]=o.useState(!1),[b,K]=o.useState(""),[y,X]=o.useState([]),m=T();console.log("state",e),console.log("partnerstatus",x),o.useEffect(()=>{C(e==null?void 0:e.status)},[e]);const V=async()=>{try{const{data:t}=await v.get(`https://abhicares.com/api/admin/get-seller-order-list/${m.partnerId}`,{withCredentials:!0});c(!1),l(t.sellerOrders),console.log("seller orders",t)}catch(t){c(!1),console.log(t)}},S=async()=>{try{const{data:t}=await v.get(`https://abhicares.com/api/admin/get-seller-wallet/${m==null?void 0:m.partnerId}`,{withCredentials:!0});t.wallet._id&&(Y(t.wallet._id),K(t.wallet)),u(!1),console.log("wallet",t)}catch(t){u(!1),console.log(t)}},Y=async t=>{try{const{data:r}=await v.get(`https://abhicares.com/api/admin/get-seller-wallet-recent-cashout-requests/${t}`,{withCredentials:!0});X(r.cashouts),console.log("cash req",r)}catch(r){console.log(r)}finally{u(!1)}};o.useEffect(()=>{V(),S()},[]);const O=async t=>{if(c(!0),g(t.target.value),t.target.value===""){V();return}try{const{data:r}=await v.post(`https://abhicares.com/api/admin/get-seller-order-by-status/${m.partnerId}`,{status:t.target.value},{withCredentials:!0});c(!1),l(r.sellerOrders),console.log("order by status",r)}catch(r){c(!1),console.log(r)}},ss=t=>{J(t),P(!0)},D=async()=>{try{const{data:t}=await v.get(`https://abhicares.com/api/admin/get-seller?sellerId=${m==null?void 0:m.partnerId}`,{withCredentials:!0});console.log("partnerDetails",t),a(t.data)}catch(t){console.log(t)}finally{c(!1)}};o.useEffect(()=>{D()},[]);const es=async t=>{try{const{data:r}=await v.post("https://abhicares.com/api/admin/update-partner-status",{sellerId:m.partnerId,status:x},{withCredentials:!0});console.log("seller orders",r),D()}catch(r){console.log(r)}};return o.useEffect(()=>{x&&es()},[x]),s.jsxs(s.Fragment,{children:[s.jsx(as,{children:s.jsxs("div",{children:[s.jsx("h2",{className:i.h2,children:"Seller Info"}),s.jsx("div",{children:s.jsxs("div",{className:i.contianer,children:[s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",e==null?void 0:e.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Gst Number:"})," ",e==null?void 0:e.gstNumber]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone"}),": ",e==null?void 0:e.phone]}),s.jsxs("p",{children:[s.jsx("b",{children:"Legal Name:"})," ",e==null?void 0:e.legalName]}),s.jsxs("p",{children:[s.jsx("b",{children:"Status:"})," ",s.jsx("span",{className:`${p.status} ${e.status==="APPROVED"?i.active:i.inactive}`,children:e.status}),s.jsxs("select",{onChange:t=>C(t.target.value),value:x,className:i.select,name:"partnerstatus",id:"partnerstatus",children:[s.jsx("option",{value:"IN-REVIEW",children:"In Review"}),s.jsx("option",{value:"APPROVED",children:"Approved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"}),s.jsx("option",{value:"HOLD",children:"Hold"})]})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Address:"})," ",`${(E=e==null?void 0:e.address)==null?void 0:E.addressLine}, ${(L=e==null?void 0:e.address)==null?void 0:L.city}, ${(M=e==null?void 0:e.address)==null?void 0:M.state}, ${(H=e==null?void 0:e.address)==null?void 0:H.pincode}`]}),s.jsxs("p",{className:p.mt,children:[s.jsx("b",{children:"Contact Person Email:"})," ",s.jsx("span",{style:{textDecoration:"underline"},children:(W=e==null?void 0:e.contactPerson)==null?void 0:W.email})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Contact Person Name:"})," ",(F=e==null?void 0:e.contactPerson)==null?void 0:F.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Contact Person Phone:"})," ",(U=e==null?void 0:e.contactPerson)==null?void 0:U.phone]}),s.jsxs("p",{children:[s.jsx("b",{children:"Category"}),": ",(z=e==null?void 0:e.categoryId)==null?void 0:z.name]}),s.jsxs("p",{className:i.service_container,children:[s.jsx("b",{children:"Services"}),": ",(B=e==null?void 0:e.services)==null?void 0:B.map(t=>{var r;return s.jsx("span",{className:i.status,children:(r=t==null?void 0:t.serviceId)==null?void 0:r.name})})]})]})}),s.jsxs("div",{className:i.flex,style:{marginBottom:"30px"},children:[s.jsxs("div",{className:i.reportContainer,children:[s.jsxs("div",{className:p["report-header"],children:[s.jsx("h1",{className:p["recent-Articles"],children:"Seller Assigned Orders"}),s.jsxs("select",{onChange:O,value:h,className:p.select,name:"status",id:"status",children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"alloted",children:"Alloted"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:i["report-body"],children:[s.jsxs("div",{className:i["report-topic-heading"],children:[s.jsx("h3",{className:p["t-op"],style:{width:"210px"},children:"Order Id"}),s.jsx("h3",{className:p["t-op"],style:{width:"110px"},children:"Order Value"}),s.jsx("h3",{className:p["t-op"],children:"Status"}),s.jsx("h3",{className:p["t-op"],children:"Details"})]}),_&&s.jsx(I,{}),s.jsxs("div",{className:p.items,children:[!_&&n.length===0&&s.jsx("p",{children:"No seller order found"}),n==null?void 0:n.map(t=>s.jsxs("div",{className:i.item1,children:[s.jsx("h3",{className:p["t-op-nextlvl"],children:t.orderId}),s.jsx("h3",{className:p["t-op-nextlvl"],style:{width:"110px",textAlign:"center"},children:t.orderValue}),s.jsx("h3",{className:`${p["t-op-nextlvl"]} ${i.status}`,children:t.status}),s.jsx("button",{onClick:()=>ss(t),className:p.button,style:{color:"#2599ff"},children:"View Details"})]},t._id))]})]})]}),s.jsxs("div",{className:i.reportContainer,children:[s.jsxs("div",{className:i.d_flex,children:[s.jsxs("div",{className:i.left,children:[s.jsxs("h3",{className:i.h3,children:[s.jsx(Ps,{size:50})," Wallet"]}),s.jsxs("div",{className:i.d_flex,children:[s.jsx("h4",{children:"Balance"}),s.jsxs("p",{children:["₹ ",(b==null?void 0:b.balance)||0]})]})]}),s.jsx("div",{className:i.right,children:s.jsx("button",{onClick:()=>A(!0),className:i.button,children:"View Wallet"})})]}),s.jsx("button",{className:i.cash_btn,children:"Cashout Request"}),s.jsxs("div",{className:i.tran_contianer,children:[j&&y.length===0&&s.jsx(I,{}),!j&&y.length===0&&s.jsx("p",{children:"No cashOut Requests found"}),y==null?void 0:y.map(t=>s.jsx(Z,{item:t,getSellerWallet:S},t._id))]})]})]})]})}),Q&&s.jsx(ps,{setSellerOrderInfoModal:P,sellerOrder:G}),R&&s.jsx(Rs,{setIsViewWalletModalOpen:A,getSellerWallet:S,id:b==null?void 0:b._id})]})};export{oe as default};
