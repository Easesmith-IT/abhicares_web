import{r as l,e as x,j as s,_ as N,f as j}from"./index-jh_7jsAh.js";import{W as w}from"./Wrapper-BxFEiEae.js";import{c as g}from"./Banner.module-CgHYAcNB.js";import{u as y}from"./useAuthorization-DSR_MjyQ.js";import{U as I}from"./UpdateBannerModal-lE-6d0Bw.js";import"./logo -C1Nz5jdc.js";import"./index.esm-CbTUZ4YC.js";import"./iconBase-CTzivY3m.js";import"./index.esm-DQbcOE5R.js";import"./usePostApiReq-BHnLpQjt.js";const H=()=>{y();const[r,p]=l.useState([{bannerName:"hero-banner1",file:null,preview:null},{bannerName:"hero-banner2",file:null,preview:null},{bannerName:"hero-banner3",file:null,preview:null}]),[f,m]=l.useState(!1),[u,b]=l.useState({img:"",type:"",page:"",section:""});x();const h=(e,n)=>{const a=e.target.files[0];console.log(a);const t=new FileReader;t.readAsDataURL(a),t.addEventListener("load",function(){console.log(this.result);const o=r.findIndex(c=>c.bannerName===n),i=[...r];i.splice(o,1,{bannerName:n,file:a,preview:this.result}),p(i)})},v=async e=>{console.log(e);const n=new FormData;let a=r.find(t=>t.bannerName===e);if(console.log("filtered img",a),a&&a.file===null){N.error("Please select the image");return}n.append("img",a.file),n.append("type",e),n.append("page","service-banners"),n.append("section","app-servicepage"),b({img:a.file,type:e,page:"service-banners",section:"app-servicepage"}),m(!0)},d=async()=>{try{const e=await j.get("https://abhicares.com/api/content/get-banners",{params:{heroBanners:!0,page:"service-banners",section:"app-servicepage"}}),n=[...r];for(let a=0;a<e.data.banners.length;a++){const t=e.data.banners[a].image,o=`hero-banner${a+1}`,i=r.findIndex(c=>c.bannerName===o);i!==-1&&n.splice(i,1,{bannerName:o,file:null,preview:`https://storage.googleapis.com/abhicares-backend-bucket/${t}`})}p(n)}catch(e){console.log(e.message)}};return l.useEffect(()=>{d()},[]),s.jsxs(s.Fragment,{children:[s.jsx(w,{children:s.jsxs("div",{children:[s.jsx("div",{className:"my-3 mx-5 d-flex justify-content-between",children:s.jsx("h3",{children:"Service Banners(3)"})}),s.jsx("div",{className:g.imagesContainer,children:r&&r.map((e,n)=>s.jsxs("div",{className:g.imageWrapper,children:[e.bannerName&&e.preview&&s.jsx("img",{src:e.preview,alt:`i${n+1}`}),s.jsx("input",{type:"file",name:e.bannerName,accept:"image/*",onChange:a=>h(a,e.bannerName),className:"mb-2"}),s.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>v(`hero-banner${n+1}`),children:"Update"})]},n))})]})}),f&&s.jsx(I,{getBannersFromServer:d,setIsModalOpen:m,data:u})]})};export{H as default};
