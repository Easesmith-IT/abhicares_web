import{r as n,_ as g,j as e}from"./index-eSIAY8Uv.js";import{A as S,b as D,a as k,u as O,C as L}from"./index.esm-DOqJpdRb.js";import{S as u}from"./index-BeC1eMxA.js";import{u as P}from"./usePostApiReq-CCJmJfW3.js";import{A as w}from"./AddAddressModal-BXHX9CMU.js";import{W as B}from"./WebsiteWrapper-BQFKF2Hi.js";import{D as T}from"./DeleteModal-DiAG-86X.js";import{u as q}from"./useDeleteApiReq-_xs8nCwk.js";import{B as v}from"./Box-BfKAFJwR.js";import{B as z}from"./Button-BaN06qPN.js";import"./iconBase-BPNpYAOT.js";import"./useDispatch-BjeBiUzI.js";import"./usegelocation-Deb37Vyc.js";import"./usePatchApiReq-pefy9J0O.js";import"./rolling-white-BBE_8u84.js";import"./index.esm-Cb-S6fGP.js";import"./index.esm-Crc1DBnJ.js";const $="_modal_overlay_136uf_1",F="_modal_open_136uf_21",I="_modal_close_136uf_33",G="_modal_wrapper_136uf_41",J="_modal_136uf_1",W="_p_136uf_103",K="_mt_136uf_113",H="_input_box_136uf_121",Y="_input_136uf_121",Q="_button_136uf_155",a={modal_overlay:$,modal_open:F,modal_close:I,modal_wrapper:G,modal:J,p:W,mt:K,input_box:H,input:Y,button:Q},U=({isAddEmailModalOpen:s,setIsAddEmailModalOpen:p,getProfileDetails:r})=>{const[l,h]=n.useState(""),{res:i,fetchData:m,isLoading:c}=P(),x=d=>{const{name:A,value:f}=d.target;h(f)},o=async d=>{if(d.preventDefault(),!l){g.error("Please enter email address");return}m("/shopping/update-email",{email:l})};return n.useEffect(()=>{((i==null?void 0:i.status)===200||(i==null?void 0:i.status)===201)&&(g.success("Email added successfully"),p(!1),r())},[i]),e.jsx("div",{className:`${a.modal_overlay} ${s?a.modal_open:a.modal_close}`,children:e.jsxs("div",{className:a.modal_wrapper,children:[e.jsx("button",{onClick:()=>p(!1),className:a.modal_close,children:e.jsx(S,{size:20})}),e.jsx("div",{className:a.modal,children:e.jsxs("form",{onSubmit:o,children:[e.jsx("p",{className:a.p,children:"Add Email"}),e.jsxs("div",{className:a.mt,children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("div",{className:a.input_box,children:e.jsx("input",{className:a.input,onChange:x,value:l,type:"email",name:"email",id:"email",placeholder:"Enter email"})})]}),e.jsx("button",{type:"submit",className:a.button,children:c?"Loading...":"Add"})]})})]})})},V="_my_profile_149bl_1",X="_profile_top_149bl_15",Z="_profile_info_149bl_29",R="_img_149bl_47",ee="_profile_info_right_149bl_71",se="_profileDetails_149bl_75",le="_referralDetails_149bl_89",te="_bold_149bl_105",ie="_input_box_149bl_113",oe="_d_flex_149bl_135",ne="_btn_149bl_151",ae="_referral_code_wrapper_149bl_171",re="_address_container_149bl_189",ce="_address_149bl_189",t={my_profile:V,profile_top:X,profile_info:Z,img:R,profile_info_right:ee,profileDetails:se,referralDetails:le,bold:te,input_box:ie,d_flex:oe,btn:ne,referral_code_wrapper:ae,address_container:re,address:ce},de=({address:s,index:p,getProfileDetails:r})=>{const{res:l,fetchData:h,isLoading:i}=q(),[m,c]=n.useState(!1),[x,o]=n.useState(!1),d=async()=>{h(`/shopping/delete-user-address/${s._id}`)};return n.useEffect(()=>{((l==null?void 0:l.status)===200||(l==null?void 0:l.status)===201)&&(g.success("Address deleted successfully"),o(!1),r())},[l]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:t.address,children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h5",{children:["Address ",p+1]}),e.jsxs(v,{sx:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx(D,{onClick:()=>c(!0),cursor:"pointer",size:20}),e.jsx(k,{onClick:()=>o(!0),cursor:"pointer",size:20})]})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Address Line:"})," ",s==null?void 0:s.addressLine]}),e.jsxs("div",{children:[e.jsx("b",{children:"Landmark:"})," ",s==null?void 0:s.landmark]}),e.jsxs("div",{children:[e.jsx("b",{children:"City:"})," ",s==null?void 0:s.city]}),e.jsxs("div",{children:[e.jsx("b",{children:"Pincode:"})," ",s==null?void 0:s.pincode]}),e.jsxs("div",{children:[e.jsx("b",{children:"Default Address:"})," ",s!=null&&s.defaultAddress?"Yes":"No"]})]}),x&&e.jsx(T,{handleDelete:d,setState:o}),m&&e.jsx(w,{isOpen:m,setIsAddAddressModalOpen:c,Data:s,getAllAddress:r})]})},Ee=()=>{const{res:s,fetchData:p,isLoading:r}=O(),[l,h]=n.useState(""),[i,m]=n.useState([]),[c,x]=n.useState(!1),[o,d]=n.useState(""),[A,f]=n.useState(!1),j=async()=>{p("/shopping/user-info")};n.useEffect(()=>{j()},[]),n.useEffect(()=>{var _,b,y,N,C,M;((s==null?void 0:s.status)===200||(s==null?void 0:s.status)===201)&&(h((b=(_=s==null?void 0:s.data)==null?void 0:_.userInfo)==null?void 0:b.user),m((N=(y=s==null?void 0:s.data)==null?void 0:y.userInfo)==null?void 0:N.userAddresses),d((M=(C=s==null?void 0:s.data)==null?void 0:C.userInfo)==null?void 0:M.userRefDoc))},[s]);const E=()=>{navigator.clipboard.writeText(l.referralCode),g.success("Copied")};return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsxs("section",{className:t.my_profile,children:[e.jsx("h1",{children:"My Profile"}),e.jsxs("div",{className:t.profile_top,children:[l&&e.jsxs("div",{className:t.profile_info,children:[e.jsx("div",{className:t.img,children:e.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSTMi19cT0JI7Ghldmzz5fJkJy0HFeBicKKug&usqp=CAU",alt:"profile"})}),e.jsx("div",{className:t.profile_info_right,children:e.jsxs("div",{className:t.d_flex,children:[e.jsxs("div",{children:[e.jsx("h5",{children:l==null?void 0:l.name}),e.jsxs("div",{className:t.profileDetails,children:[(l==null?void 0:l.email)&&e.jsxs("p",{children:[e.jsx("b",{className:t.bold,children:"Email :"})," ",l==null?void 0:l.email]}),e.jsxs("p",{children:[e.jsx("b",{className:t.bold,children:"Phone :"})," ",l==null?void 0:l.phone]})]}),o&&e.jsxs("div",{className:t.referralDetails,children:[e.jsxs("p",{children:[e.jsx("b",{className:t.bold,children:"Referral Credits :"})," â‚¹",o==null?void 0:o.referralCredits]}),e.jsxs("p",{children:[e.jsx("b",{className:t.bold,children:"No of Users Applied Coupon :"})," ",o==null?void 0:o.noOfUsersAppliedCoupon]})]})]}),e.jsxs("div",{children:[!(l!=null&&l.email)&&e.jsx("button",{className:t.btn,onClick:()=>x(!0),children:"Add Email"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"10px"},children:[e.jsx("h6",{children:"Referral Code:"}),e.jsxs("div",{className:t.referral_code_wrapper,children:[e.jsx("p",{style:{marginBottom:"0"},children:l==null?void 0:l.referralCode}),e.jsx(L,{onClick:E,cursor:"pointer"})]})]})]})]})})]}),!l&&r&&e.jsxs("div",{className:t.profile_info,children:[e.jsx(u,{circle:!0,width:60,height:60,count:1}),e.jsxs("div",{className:t.profile_info_right,children:[e.jsx(u,{width:140,height:20,count:1}),e.jsx(u,{width:"40%",height:20,count:1})]})]}),e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h4",{style:{marginTop:"20px"},children:"Adresses"}),e.jsx(z,{onClick:()=>f(!0),children:"Add Address"})]}),e.jsxs("div",{className:t.address_container,children:[i.length===0&&r&&e.jsxs("div",{className:t.address,children:[e.jsx(u,{width:"90%",height:20,count:1}),e.jsx(u,{width:"90%",height:20,count:1})]}),i.length===0&&!r&&e.jsx("p",{children:"No address found"}),i==null?void 0:i.map((_,b)=>e.jsx(de,{address:_,index:b,getProfileDetails:j},_==null?void 0:_._id))]})]})]})}),c&&e.jsx(U,{isAddEmailModalOpen:c,setIsAddEmailModalOpen:x,getProfileDetails:j}),A&&e.jsx(w,{setIsAddAddressModalOpen:f,isOpen:A,getAllAddress:j})]})};export{Ee as default};
