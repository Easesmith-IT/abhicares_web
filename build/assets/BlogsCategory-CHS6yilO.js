import{u as f,r as i,j as e,L as d,f as l}from"./index-I-QjRnx0.js";import{c as a,A as v}from"./style.module-4iFN1M5b.js";import{W as m}from"./WebsiteWrapper-Up1EDifj.js";import"./index.esm-C3Z8P0YS.js";import"./iconBase-BpojMoAv.js";import"./useDispatch-PMR2IWSw.js";import"./rolling-white-BBE_8u84.js";import"./index.esm-BVaOyPDU.js";import"./Button-CFwGVW0z.js";import"./index.esm-CvPoa2P-.js";const P=()=>{const{id:c}=f();console.log(c),i.useState({});const[g,h]=i.useState([]),[p,x]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{await(async j=>{try{const t=await l.get(`https://blog.abhicares.com/wp-json/wp/v2/posts?categories=${j}`);console.log(t.data);const u=await Promise.all(t.data.map(async s=>{try{const o=await l.get(`https://blog.abhicares.com/wp-json/wp/v2/media/${s.featured_media}`);return console.log("Media Response for Post ID",s.id,o.data),{...s,featuredMedia:o.data}}catch(o){return console.error("Error fetching featured media for Post ID",s.id,o),{...s,featuredMedia:null}}finally{x(!1)}}));h(u)}catch(t){console.error("Error fetching category blogs:",t)}})(c)}catch(n){console.error("Error fetching data:",n)}})()},[c]),p?e.jsx(m,{children:e.jsx("div",{className:a["recent-blogs-wrapper-loading"],children:e.jsx("div",{className:a.loading,children:e.jsx("h1",{children:"....Loading"})})})}):e.jsx(m,{children:e.jsx("div",{className:"wrapper",children:e.jsx("div",{className:a["recent-blogs-wrapper"],children:e.jsx("div",{children:e.jsx("div",{className:a["category-wrapper"],children:e.jsx("div",{className:a["blogs-container"],children:g.map(r=>e.jsxs("div",{className:a["blog-cards"],children:[e.jsx("div",{className:a["blog-thumbnail"],children:r.featuredMedia&&e.jsx(d,{to:`/single-blog/${r.id}`,children:e.jsx("img",{src:r.featuredMedia.source_url,alt:"Image"})})}),e.jsxs("div",{className:a["blog-content"],children:[e.jsx("div",{className:a["authoring-date"],children:e.jsx("span",{children:new Date(r.date).toLocaleDateString()})}),e.jsx("div",{className:a["blog-name"],children:e.jsx("h5",{children:e.jsx(d,{to:`/single-blog/${r.id}`,children:r.title.rendered})})}),e.jsx("div",{className:a["read-more"],children:e.jsxs(d,{to:`/single-blog/${r.id}`,children:["Read moreÂ ",e.jsx(v,{})]})})]})]},r.id))})})})})})})};export{P as default};
