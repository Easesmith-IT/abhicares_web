import{r,_ as M,j as e,f as Y,e as Z}from"./index-CGylhn6U.js";import{F as R}from"./index.esm-CXFyB3L0.js";import{u as H,a as b}from"./index.esm-BJ_kW8OL.js";import{R as z}from"./index.esm-C03Euai7.js";import{u as I}from"./useAuthorization-C2vLYWOS.js";import{f as A,b as ee}from"./index.esm-BCgy5go5.js";import{u as O}from"./usePatchApiReq-CoISmjAR.js";import{u as T}from"./usePostApiReq-C7INsCRY.js";import{D as se}from"./DeleteModal-DbOipjTT.js";import{L as ae}from"./Loader-D9yVIxxu.js";import{u as te}from"./useDeleteApiReq-C5OjVeiu.js";import{W as ne}from"./Wrapper-CdkfNuyb.js";import{c as u}from"./Settings.module-DMv0i3HJ.js";import{P as re}from"./react-bootstrap-pagination-control.esm-Bp3mw4s9.js";import"./iconBase-BOE9-_A9.js";import"./useDispatch-Dqrl4_SR.js";import"./logo -C1Nz5jdc.js";const oe="_wrapper_1rwnw_1",le="_modal_1rwnw_29",ce="_heading_container_1rwnw_49",ie="_form_1rwnw_61",de="_input_container_1rwnw_75",pe="_input_1rwnw_75",he="_icon_1rwnw_101",xe="_button_wrapper_1rwnw_125",_e="_button_1rwnw_125",ue="_permission_1rwnw_151",me="_d_flex_1rwnw_163",c={wrapper:oe,modal:le,heading_container:ce,form:ie,input_container:de,input:pe,icon:he,button_wrapper:xe,button:_e,permission:ue,d_flex:me},fe="_wrapper_qrszr_1",je="_modal_qrszr_27",we="_heading_container_qrszr_43",ge="_form_qrszr_55",ve="_input_container_qrszr_69",Ne="_input_qrszr_69",Ce="_button_wrapper_qrszr_101",Se="_button_qrszr_101",$e="_permission_qrszr_127",Pe="_d_flex_qrszr_139",i={wrapper:fe,modal:je,heading_container:we,form:ge,input_container:ve,input:Ne,button_wrapper:Ce,button:Se,permission:$e,d_flex:Pe},W=({setIsModalOpen:d,adminId:s})=>{const o=r.useRef(),n=r.useRef(),[g,p]=r.useState(null);I();const{res:t,fetchData:C}=O(),m=async _=>{_.preventDefault(),console.log("password updated");const f=o.current.value,h=n.current.value;await C("/admin/update-admin-password",{currentPassword:f,newPassword:h,adminId:s})};return r.useEffect(()=>{((t==null?void 0:t.status)===200||(t==null?void 0:t.status)===201)&&(console.log("updatePwdRes",t),M.success("Password Updated Successfully!"),d(!1))},[t]),e.jsx("div",{className:i.wrapper,children:e.jsxs("div",{className:i.modal,children:[e.jsxs("div",{className:i.heading_container,children:[e.jsx("h4",{children:"Update Password"}),e.jsx("div",{className:i.d_flex,children:e.jsx(z,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),g&&e.jsx("h6",{style:{textAlign:"center",color:"orangered",fontWeight:"bold"},children:g}),e.jsxs("form",{onSubmit:m,className:i.form,children:[e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"current-password",children:"Current Password"}),e.jsx("input",{className:i.input,ref:o,type:"password",name:"current-password",id:"current-password",placeholder:"enter current password"})]}),e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"new-password",children:"New Password"}),e.jsx("input",{className:i.input,ref:n,type:"password",name:"new-password",id:"new-password",placeholder:"enter new password"})]}),e.jsx("div",{className:i.button_wrapper,children:e.jsx("button",{className:i.button,children:"Update"})})]})]})})},k=({setIsModalOpen:d,subAdmin:s,getSubadmins:o})=>{const{res:n,fetchData:g,isLoading:p}=T(),[t,C]=r.useState({name:(s==null?void 0:s.name)||"",password:(s==null?void 0:s.password)||"",role:(s==null?void 0:s.role)||"",adminId:(s==null?void 0:s.adminId)||""}),[m,_]=r.useState(!0),[f,h]=r.useState(!1);I();const[a,j]=r.useState({dashboard:(s==null?void 0:s.permissions.dashboard)||"",banners:(s==null?void 0:s.permissions.banners)||"",orders:(s==null?void 0:s.permissions.orders)||"",bookings:(s==null?void 0:s.permissions.bookings)||"",services:(s==null?void 0:s.permissions.services)||"",partners:(s==null?void 0:s.permissions.partners)||"",customers:(s==null?void 0:s.permissions.customers)||"",offers:(s==null?void 0:s.permissions.offers)||"",availableCities:(s==null?void 0:s.permissions.availableCities)||"",payments:(s==null?void 0:s.permissions.payments)||"",enquiry:(s==null?void 0:s.permissions.enquiry)||"",helpCenter:(s==null?void 0:s.permissions.helpCenter)||"",settings:(s==null?void 0:s.permissions.settings)||"",reviews:(s==null?void 0:s.permissions.reviews)||"",notifications:(s==null?void 0:s.permissions.notifications)||"",sellerCashout:(s==null?void 0:s.permissions.sellerCashout)||""}),v=l=>{const{name:P,value:y}=l.target;C({...t,[P]:y})},$=()=>{_(!m)},w=(l,P)=>{j({...a,[l]:P})},{res:N,fetchData:q}=O(),E=async l=>{if(l.preventDefault(),!t.adminId||!t.name||!t.password||!t.role||!a.dashboard||!a.banners||!a.orders||!a.bookings||!a.services||!a.partners||!a.customers||!a.offers||!a.availableCities||!a.payments||!a.enquiry||!a.helpCenter||!a.settings||!a.reviews||!a.notifications||!a.sellerCashout){M.error("All fields are required");return}s?await q(`/admin/update-sub-admin/${s._id}`,{...t,permissions:a}):g("/admin/create-Admin",{...t,permissions:a})};return r.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(M.success("SubAdmin added successfully"),d(!1),o())},[n]),r.useEffect(()=>{((N==null?void 0:N.status)===200||(N==null?void 0:N.status)===201)&&(M.success("SubAdmin updated successfully"),d(!1),o())},[N]),e.jsxs("div",{className:c.wrapper,children:[e.jsxs("div",{className:c.modal,children:[e.jsxs("div",{className:c.heading_container,children:[e.jsxs("h4",{children:[s?"Update":"Add"," Sub Admin"]}),e.jsx("div",{className:c.d_flex,children:e.jsx(z,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{className:c.form,children:[e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"adminId",children:"User Name"}),e.jsx("input",{className:c.input,onChange:v,value:t.adminId,type:"text",name:"adminId",id:"adminId",placeholder:"enter your username"})]}),e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:c.input,onChange:v,value:t.name,type:"text",name:"name",id:"name",placeholder:"enter your name"})]}),!s&&e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{className:c.input,onChange:v,value:t.password,type:m?"password":"text",name:"password",id:"password",placeholder:"enter your password"}),m?e.jsx(A,{className:c.icon,onClick:$}):e.jsx(ee,{className:c.icon,onClick:$})]}),e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"role",children:"Role"}),e.jsxs("select",{className:c.input,name:"role",value:t.role,onChange:v,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"subAdmin",children:"Sub Admin"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"",children:"permissions"}),e.jsx("div",{children:Object.keys(a).map((l,P)=>e.jsxs("div",{className:c.permission,children:[e.jsx("p",{children:l}),e.jsxs("div",{className:c.d_flex,children:[e.jsxs("div",{className:c.d_flex,children:[e.jsx("input",{onChange:y=>w(l,"read"),type:"radio",name:`${l}-read`,id:`${l}-read`,value:a[l],checked:a[l]==="read"}),e.jsx("span",{children:"read"})]}),e.jsxs("div",{className:c.d_flex,children:[e.jsx("input",{onChange:y=>w(l,"write"),type:"radio",name:`${l}-write`,id:`${l}-write`,value:a[l],checked:a[l]==="write"}),e.jsx("span",{children:"write"})]}),e.jsxs("div",{className:c.d_flex,children:[e.jsx("input",{onChange:y=>w(l,"none"),type:"radio",name:`${l}-none`,id:`${l}-none`,value:a[l],checked:a[l]==="none"}),e.jsx("span",{children:"none"})]})]})]},l))})]}),e.jsxs("div",{className:c.button_wrapper,children:[s&&e.jsx("button",{className:c.button,onClick:l=>{l.preventDefault(),h(!0)},children:"Update Password"}),e.jsx("button",{className:c.button,onClick:E,children:p?"Loading...":s?"Update":"Add"})]})]})]}),f&&e.jsx(W,{setIsModalOpen:h,adminId:s==null?void 0:s.adminId})]})},Me=({setIsModalOpen:d,subAdmin:s})=>{const[o,n]=r.useState({title:"",page:"",desc:""});I();const g=async _=>{const{value:f}=_.target;try{n(a=>({...a,page:f}));const{data:h}=await Y.get(`https://abhicares.com/api/content/get-seo-by-page?page=${f}`,{withCredentials:!0});console.log("seo",h),n(a=>({...a,title:h.seo.seoTitle,desc:h.seo.seoDescription}))}catch(h){console.log(h)}},p=async _=>{const{name:f,value:h}=_.target;n({...o,[f]:h})},{res:t,fetchData:C}=O(),m=async _=>{_.preventDefault(),console.log("page",o.page),!(!o.title||!o.desc)&&await C("/content/update-seo-by-page",{page:o.page,seoDescription:o.desc,seoTitle:o.title})};return r.useEffect(()=>{((t==null?void 0:t.status)===200||(t==null?void 0:t.status)===201)&&(console.log("seoRes",t),M.success("Seo updated successfully"),d(!1))},[t]),e.jsx("div",{className:i.wrapper,children:e.jsxs("div",{className:i.modal,children:[e.jsxs("div",{className:i.heading_container,children:[e.jsx("h4",{children:"Manage SEO"}),e.jsx("div",{className:i.d_flex,children:e.jsx(z,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:m,className:i.form,children:[e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"page",children:"Page"}),e.jsxs("select",{className:i.input,name:"page",value:o.page,onChange:g,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"womens-salon-spa",children:"Women's salon & spa"}),e.jsx("option",{value:"makeup-mehandi",children:"Makeup & Mehandi"}),e.jsx("option",{value:"mens-salon-massage",children:"Men's Salon & Massage"}),e.jsx("option",{value:"home-care",children:"Home Care"}),e.jsx("option",{value:"home-repair",children:"Home Repair"}),e.jsx("option",{value:"appliance-repair",children:"Appliance Repair"}),e.jsx("option",{value:"home-page",children:"Home Page"}),e.jsx("option",{value:"about-us",children:"About Us"}),e.jsx("option",{value:"register-as-professional",children:"Register as Professional"}),e.jsx("option",{value:"blogs",children:"Blogs"})]})]}),e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{className:i.input,onChange:p,value:o.title,type:"text",name:"title",id:"title",placeholder:"enter title"})]}),e.jsxs("div",{className:i.input_container,children:[e.jsx("label",{htmlFor:"desc",children:"Description"}),e.jsx("textarea",{className:i.input,onChange:p,value:o.desc,name:"desc",id:"desc",placeholder:"enter description"})]}),e.jsx("div",{className:i.button_wrapper,children:e.jsx("button",{className:i.button,children:"Update"})})]})]})})},qe="_wrapper_qrszr_1",ye="_modal_qrszr_27",De="_heading_container_qrszr_43",ze="_form_qrszr_55",Ee="_input_container_qrszr_69",Ue="_input_qrszr_69",Ie="_button_wrapper_qrszr_101",Oe="_button_qrszr_101",Fe="_permission_qrszr_127",Le="_d_flex_qrszr_139",S={wrapper:qe,modal:ye,heading_container:De,form:ze,input_container:Ee,input:Ue,button_wrapper:Ie,button:Oe,permission:Fe,d_flex:Le},ke=({setIsModalOpen:d,subAdmin:s})=>{const{res:o,fetchData:n,isLoading:g}=T(),{res:p,fetchData:t,isLoading:C}=H(),[m,_]=r.useState(""),f=async()=>{t("/admin/get-refer-and-earn-amount")};r.useEffect(()=>{f()},[]),r.useEffect(()=>{var j,v;((p==null?void 0:p.status)===200||(p==null?void 0:p.status)===201)&&_((v=(j=p==null?void 0:p.data)==null?void 0:j.doc[0])==null?void 0:v.amount)},[p]);const h=async j=>{const{name:v,value:$}=j.target;_($)},a=async j=>{j.preventDefault(),m&&n("/admin/update-refer-and-earn-amount",{amount:m})};return r.useEffect(()=>{((o==null?void 0:o.status)===200||(o==null?void 0:o.status)===201)&&(M.success(o==null?void 0:o.data.message),d(!1))},[o]),e.jsx("div",{className:S.wrapper,children:e.jsxs("div",{className:S.modal,children:[e.jsxs("div",{className:S.heading_container,children:[e.jsx("h4",{children:"Update Refer and Earn"}),e.jsx("div",{className:S.d_flex,children:e.jsx(z,{onClick:()=>d(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:a,className:S.form,children:[e.jsxs("div",{className:S.input_container,children:[e.jsx("label",{htmlFor:"amount",children:"Amount"}),e.jsx("input",{className:S.input,onChange:h,value:m,type:"number",name:"amount",id:"amount",placeholder:"enter amount"})]}),e.jsx("div",{className:S.button_wrapper,children:e.jsx("button",{className:S.button,children:g?"Loading...":"Update"})})]})]})})},as=()=>{const{res:d,fetchData:s,isLoading:o}=te(),{res:n,fetchData:g,isLoading:p}=H(),[t,C]=r.useState(!1),[m,_]=r.useState(!1),[f,h]=r.useState(!1),[a,j]=r.useState(!1),[v,$]=r.useState(!1),[w,N]=r.useState({}),[q,E]=r.useState([]),[l,P]=r.useState(!1),[y,B]=r.useState(1),[U,G]=r.useState(1),J=async x=>{G(x)},K=Z(),Q=x=>{N(x),h(!f)},V=x=>{N(x),j(!a)},X=async()=>{s(`/admin/delete-sub-admin?subAdminId=${w==null?void 0:w._id}&role=${w==null?void 0:w.role}`)};r.useEffect(()=>{((d==null?void 0:d.status)===200||(d==null?void 0:d.status)===201)&&(D(),M.success("Subadmin deleted successfully"),j(!a))},[d]);const D=async()=>{g(`/admin/get-sub-admins?page=${U}`)};return r.useEffect(()=>{D()},[U]),r.useEffect(()=>{var x,F,L;((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(console.log("getSubAdminsRes",n),B((F=(x=n==null?void 0:n.data)==null?void 0:x.pagination)==null?void 0:F.totalPages),E((L=n==null?void 0:n.data)==null?void 0:L.admins))},[n]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsxs("div",{className:u.settings,children:[e.jsxs("div",{className:u.heading_container,children:[e.jsx("h1",{children:"Settings"}),e.jsxs("div",{className:u.btn_wrapper,children:[e.jsx("button",{onClick:()=>P(!0),className:u.button,children:"Update Refer and Earn"}),e.jsx("button",{onClick:()=>_(!0),className:u.button,children:"Manage SEO"}),e.jsx("button",{onClick:()=>C(!0),className:u.button,children:"Add Subadmin"}),e.jsx("button",{onClick:()=>$(!0),className:u.button,children:"Update Password"}),e.jsx("button",{onClick:()=>K("/admin/settings/manage-comision"),className:u.button,children:"Manage Comision"})]})]}),e.jsx("div",{style:{marginTop:"20px"},children:p&&e.jsx(ae,{})}),e.jsxs("div",{className:u.container,children:[!p&&q.length===0&&e.jsx("p",{children:"No subAdmins found"}),q==null?void 0:q.map(x=>e.jsxs("div",{className:u.item,children:[e.jsxs("div",{className:u.left,children:[e.jsxs("p",{children:["Name: ",x.name]}),e.jsxs("p",{children:["Username: ",x.adminId]}),e.jsxs("p",{children:["Role: ",x.role]}),e.jsxs("p",{children:["Status:"," ",e.jsx("span",{className:`${u.status} ${x.status?u.active:u.inactive}`,children:x.status?"Active":"InActive"})]})]}),e.jsxs("div",{className:u.right,children:[e.jsx(R,{onClick:()=>Q(x),cursor:"pointer",size:20}),e.jsx(b,{onClick:()=>V(x),cursor:"pointer",size:22,color:"red"})]})]},x._id))]}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(re,{changePage:J,limit:10,page:U,total:y+"0"})})]})}),m&&e.jsx(Me,{setIsModalOpen:_}),l&&e.jsx(ke,{setIsModalOpen:P}),t&&e.jsx(k,{setIsModalOpen:C,getSubadmins:D}),f&&e.jsx(k,{setIsModalOpen:h,getSubadmins:D,subAdmin:w}),v&&e.jsx(W,{setIsModalOpen:$}),a&&e.jsx(se,{setState:j,handleDelete:X})]})};export{as as default};
