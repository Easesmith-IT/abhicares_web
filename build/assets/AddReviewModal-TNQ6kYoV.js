import{h as M,r,_,j as t}from"./index-BgkP9pz8.js";import{A as P,e as V}from"./index.esm-DnL9X2Ej.js";import{u as H}from"./usePatchApiReq-DS05ZUpu.js";import{u as b}from"./usePostApiReq-Y-Z3zkKe.js";const T="_modal_overlay_9z2w0_1",G="_modal_open_9z2w0_21",J="_modal_close_9z2w0_33",K="_modal_wrapper_9z2w0_41",O="_modal_9z2w0_1",Q="_p_9z2w0_99",W="_mt_9z2w0_111",X="_rating_container_9z2w0_119",Y="_button_9z2w0_141",Z="_input_box_9z2w0_165",B="_input_9z2w0_165",s={modal_overlay:T,modal_open:G,modal_close:J,modal_wrapper:K,modal:O,p:Q,mt:W,rating_container:X,button:Y,input_box:Z,input:B},ot=({isReviewModalOpen:v,setIsReviewModalOpen:d,review:a,id:m,getAllReviewsOfUser:p,isBooking:y=!1,bookingId:h,serviceType:N,serviceId:z})=>{const{res:n,fetchData:C,isLoading:w}=b(),{res:l,fetchData:A,isLoading:E}=b(),u=M("userInfo"),f=u==null?void 0:u.id;console.log("userId",f),console.log("bookingId",h);const[o,x]=r.useState({title:(a==null?void 0:a.title)||"",content:(a==null?void 0:a.content)||"",rating:(a==null?void 0:a.rating)||""}),[L,g]=r.useState(void 0),D=Array(5).fill(0),j=c=>{const{name:i,value:I}=c.target;x({...o,[i]:I})},F=c=>{x({...o,rating:c})},k=c=>{g(c)},S=()=>{g(void 0)},{res:e,fetchData:$}=H(),q=async()=>{!o.title||!o.content||!o.rating||(y?C("/shopping/add-booking-review",{...o,bookingId:h,serviceType:N,serviceId:z,userId:f}):a?await $(`/shopping/update-product-review/${m}`,{...o}):A(`/shopping/add-product-review/${m}`,{...o}))};return r.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(d(!1),_.success("Review added successfully"))},[n]),r.useEffect(()=>{((l==null?void 0:l.status)===200||(l==null?void 0:l.status)===201)&&(d(!1),_.success("Review added successfully"),p())},[l]),console.log(o),r.useEffect(()=>{((e==null?void 0:e.status)===200||(e==null?void 0:e.status)===201)&&(console.log("addReviewRes",e),d(!1),_.success("Review updated successfully"),p())},[e]),t.jsx("div",{className:`${s.modal_overlay} ${v?s.modal_open:s.modal_close}`,children:t.jsxs("div",{className:s.modal_wrapper,children:[t.jsx("button",{onClick:()=>d(),className:s.modal_close,children:t.jsx(P,{size:20})}),t.jsxs("div",{className:s.modal,children:[t.jsx("p",{className:s.p,children:"Add Review"}),t.jsxs("div",{className:s.mt,children:[t.jsx("label",{htmlFor:"title",children:"Title"}),t.jsx("div",{className:s.input_box,children:t.jsx("input",{className:s.input,onChange:j,value:o.title,type:"text",name:"title",id:"title",placeholder:"Enter your review title"})})]}),t.jsxs("div",{className:s.mt,children:[t.jsx("label",{htmlFor:"content",children:"Description"}),t.jsx("div",{className:s.input_box,children:t.jsx("input",{className:s.input,onChange:j,value:o.content,type:"text",name:"content",id:"content",placeholder:"Enter your review description"})})]}),t.jsxs("div",{className:s.mt,children:[t.jsx("label",{htmlFor:"rating",children:"Select Rating"}),t.jsx("div",{className:s.rating_container,children:D.map((c,i)=>t.jsx("li",{children:t.jsx(V,{size:20,onClick:()=>F(i+1),onMouseOver:()=>k(i+1),onMouseLeave:S,color:(L||o.rating)>i?"yellow":"gray"})},i))})]}),t.jsx("button",{onClick:q,className:s.button,children:w||E?"Loading...":"Proceed"})]})]})})};export{ot as A};
