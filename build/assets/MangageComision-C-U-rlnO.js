import{r,j as e,_ as h,f as _}from"./index-lY8eDmQj.js";import{W as j}from"./Wrapper-C5Vyjcs6.js";import{c as x}from"./Settings.module-DMv0i3HJ.js";import{j as f}from"./LogoutModal-CpkpXklC.js";import{R as v}from"./index.esm-TZhK3vYx.js";import"./index-DzltI5z0.js";/* empty css                   */import{u as C}from"./useAuthorization-ZL8Fu2nK.js";import{L as b}from"./Loader-D1crzail.js";import"./logo -C1Nz5jdc.js";import"./iconBase-BlupGJxB.js";const A="_wrapper_1m1ml_1",N="_modal_1m1ml_27",w="_heading_container_1m1ml_47",R="_form_1m1ml_59",y="_input_container_1m1ml_73",S="_input_1m1ml_73",M="_button_wrapper_1m1ml_105",U="_button_1m1ml_105",E="_categories_1m1ml_131",s={wrapper:A,modal:N,heading_container:w,form:R,input_container:y,input:S,button_wrapper:M,button:U,categories:E},I=({setIsModalOpen:t,commission:n="",getAllCategories:c})=>{const{checkAuthorization:i}=C();r.useState(!1);const[a,o]=r.useState({comissionRate:(n==null?void 0:n.commission)||"",convienceAmount:(n==null?void 0:n.convenience)||""}),m=l=>{let{name:d,value:p}=l.target;o({...a,[d]:p})};r.useEffect(()=>{o({comissionRate:n==null?void 0:n.commission,convienceAmount:n==null?void 0:n.convenience})},[n]),console.log("commissionInfo",a),console.log("commission",n);const g=async l=>{l.preventDefault();const{comissionRate:d,convienceAmount:p}=a;if(!d||!p){h.error("All fields are required");return}try{const{data:u}=await _.post("https://abhicares.com/api/admin/update-category-data",{categoryId:n==null?void 0:n._id,commission:a.comissionRate,convenience:a.convienceAmount},{withCredentials:!0});h.success("Updated successfully"),c(),t(!1)}catch(u){console.log(u),t(!1),i(u)}};return e.jsx("div",{className:s.wrapper,children:e.jsxs("div",{className:s.modal,children:[e.jsxs("div",{className:s.heading_container,children:[e.jsx("h4",{children:"Update Comision"}),e.jsx("div",{className:s.d_flex,children:e.jsx(v,{onClick:()=>t(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:g,className:s.form,children:[e.jsxs("div",{className:s.input_container,children:[e.jsx("label",{htmlFor:"comissionRate",children:"Comission Rate (%)"}),e.jsx("input",{className:s.input,onChange:m,value:a.comissionRate,type:"number",name:"comissionRate",id:"comissionRate"})]}),e.jsxs("div",{className:s.input_container,children:[e.jsx("label",{htmlFor:"convienceAmount",children:"Convience Amount"}),e.jsx("input",{className:s.input,onChange:m,value:a.convienceAmount,type:"number",name:"convienceAmount",id:"convienceAmount"})]}),e.jsx("div",{className:s.button_wrapper,children:e.jsx("button",{className:s.button,children:"Update"})})]})]})})},z=({item:t,getAllCategories:n})=>{const[c,i]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x.card,children:[e.jsxs("div",{children:[e.jsx("h5",{children:t==null?void 0:t.name}),e.jsxs("p",{children:[e.jsx("b",{children:"Commission Rate :"})," ",t==null?void 0:t.commission,"%"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Convience Amount :"})," â‚¹",t==null?void 0:t.convenience]})]}),e.jsx(f,{onClick:()=>i(!0),size:20,style:{cursor:"pointer"}})]}),c&&e.jsx(I,{getAllComisions:()=>{},setIsModalOpen:i,commission:t,getAllCategories:n})]})},K=()=>{const[t,n]=r.useState([]),[c,i]=r.useState(!0),a=async()=>{try{const{data:o}=await _.get("https://abhicares.com/api/admin/get-all-category",{withCredentials:!0});n(o.data),console.log(o)}catch(o){console.log(o)}finally{i(!1)}};return r.useEffect(()=>{a()},[]),e.jsx(j,{children:e.jsxs("div",{children:[e.jsx("h1",{children:"Mangage Commission"}),e.jsxs("div",{className:x.comision_wrapper,children:[!c&&t.length===0&&e.jsx("p",{children:"No data found"}),c&&t.length===0&&e.jsx(b,{}),t==null?void 0:t.map(o=>e.jsx(z,{item:o,getAllCategories:a},o._id))]})]})})};export{K as default};
