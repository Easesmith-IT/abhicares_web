import{r,_ as h,j as n}from"./index-eSIAY8Uv.js";import{W as j}from"./Wrapper-C_MBzJws.js";import{c as f}from"./Settings.module-DMv0i3HJ.js";import{j as v,u as g}from"./index.esm-DOqJpdRb.js";import{R as b}from"./index.esm-DgtiecaY.js";import"./index-DTSefo4b.js";/* empty css                   */import{u as A}from"./useAuthorization-D2JGx9Uv.js";import{u as C}from"./usePostApiReq-CCJmJfW3.js";import{L as N}from"./Loader-BUdzUg4g.js";import"./logo -C1Nz5jdc.js";import"./Shared.module-DD54I-nI.js";import"./useDispatch-BjeBiUzI.js";import"./iconBase-BPNpYAOT.js";const w="_wrapper_1m1ml_1",y="_modal_1m1ml_27",E="_heading_container_1m1ml_47",M="_form_1m1ml_59",R="_input_container_1m1ml_73",S="_input_1m1ml_73",L="_button_wrapper_1m1ml_105",U="_button_1m1ml_105",I="_categories_1m1ml_131",a={wrapper:w,modal:y,heading_container:E,form:M,input_container:R,input:S,button_wrapper:L,button:U,categories:I},F=({setIsModalOpen:e,commission:s="",getAllCategories:c})=>{const{res:t,fetchData:l,isLoading:i}=C();A(),r.useState(!1);const[o,m]=r.useState({comissionRate:(s==null?void 0:s.commission)||"",convienceAmount:(s==null?void 0:s.convenience)||""}),_=d=>{let{name:u,value:p}=d.target;m({...o,[u]:p})};r.useEffect(()=>{m({comissionRate:s==null?void 0:s.commission,convienceAmount:s==null?void 0:s.convenience})},[s]),console.log("commissionInfo",o),console.log("commission",s);const x=async d=>{d.preventDefault();const{comissionRate:u,convienceAmount:p}=o;if(!u||!p){h.error("All fields are required");return}l("/admin/update-category-data",{categoryId:s==null?void 0:s._id,commission:o.comissionRate,convenience:o.convienceAmount})};return r.useEffect(()=>{((t==null?void 0:t.status)===200||(t==null?void 0:t.status)===201)&&(h.success("Updated successfully"),c(),e(!1))},[t]),n.jsx("div",{className:a.wrapper,children:n.jsxs("div",{className:a.modal,children:[n.jsxs("div",{className:a.heading_container,children:[n.jsx("h4",{children:"Update Comision"}),n.jsx("div",{className:a.d_flex,children:n.jsx(b,{onClick:()=>e(!1),cursor:"pointer",size:26})})]}),n.jsxs("form",{onSubmit:x,className:a.form,children:[n.jsxs("div",{className:a.input_container,children:[n.jsx("label",{htmlFor:"comissionRate",children:"Comission Rate (%)"}),n.jsx("input",{className:a.input,onChange:_,value:o.comissionRate,type:"number",name:"comissionRate",id:"comissionRate"})]}),n.jsxs("div",{className:a.input_container,children:[n.jsx("label",{htmlFor:"convienceAmount",children:"Convience Amount"}),n.jsx("input",{className:a.input,onChange:_,value:o.convienceAmount,type:"number",name:"convienceAmount",id:"convienceAmount"})]}),n.jsx("div",{className:a.button_wrapper,children:n.jsx("button",{className:a.button,children:i?"Loading...":"Update"})})]})]})})},O=({item:e,getAllCategories:s})=>{const[c,t]=r.useState(!1);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:f.card,children:[n.jsxs("div",{children:[n.jsx("h5",{children:e==null?void 0:e.name}),n.jsxs("p",{children:[n.jsx("b",{children:"Commission Rate :"})," ",e==null?void 0:e.commission,"%"]}),n.jsxs("p",{children:[n.jsx("b",{children:"Convience Amount :"})," â‚¹",e==null?void 0:e.convenience]})]}),n.jsx(v,{onClick:()=>t(!0),size:20,style:{cursor:"pointer"}})]}),c&&n.jsx(F,{getAllComisions:()=>{},setIsModalOpen:t,commission:e,getAllCategories:s})]})},X=()=>{const{res:e,fetchData:s,isLoading:c}=g(),[t,l]=r.useState([]),i=async()=>{s("/admin/get-all-category")};return r.useEffect(()=>{i()},[]),r.useEffect(()=>{((e==null?void 0:e.status)===200||(e==null?void 0:e.status)===201)&&l(e==null?void 0:e.data.data)},[e]),n.jsx(j,{children:n.jsxs("div",{children:[n.jsx("h1",{children:"Mangage Commission"}),n.jsxs("div",{className:f.comision_wrapper,children:[!c&&t.length===0&&n.jsx("p",{children:"No data found"}),c&&t.length===0&&n.jsx(N,{}),t==null?void 0:t.map(o=>n.jsx(O,{item:o,getAllCategories:i},o._id))]})]})})};export{X as default};
