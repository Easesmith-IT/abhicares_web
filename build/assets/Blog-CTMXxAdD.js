import{r as i,j as e,L as o,f as l}from"./index-CGylhn6U.js";import{c as s,A as N}from"./style.module-DMolr6-j.js";import{C as k}from"./index-DAmiXmC9.js";/* empty css               */import{W as v}from"./WebsiteWrapper-DTPL51tP.js";import"./index.esm-BJ_kW8OL.js";import"./iconBase-BOE9-_A9.js";import"./useDispatch-Dqrl4_SR.js";import"./rolling-white-BBE_8u84.js";import"./index.esm-BCgy5go5.js";import"./Button-BQpLpF18.js";import"./index.esm-Ciysk66U.js";const S=()=>{const p={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:4},tablet:{breakpoint:{max:1024,min:768},items:3},mobile:{breakpoint:{max:520,min:0},items:2},largemobile:{breakpoint:{max:520,min:0},items:1}},[x,d]=i.useState([]);return i.useEffect(()=>{(async()=>{try{const j=(await l.get("https://blog.abhicares.com/wp-json/wp/v2/posts")).data.map(async c=>{if(c.featured_media){const b=await l.get(`https://blog.abhicares.com.com/wp-json/wp/v2/media/${c.featured_media}`);return{...c,featured_image:b.data}}return c}),f=await Promise.all(j);d(f)}catch(n){console.error("Error fetching data:",n)}})()},[]),e.jsx("div",{className:"wrapper",children:e.jsxs("div",{className:s["recent-blogs-wrapper"],children:[e.jsx("h1",{children:"Recent blogs"}),e.jsx(k,{swipeable:!0,draggable:!0,showDots:!1,responsive:p,ssr:!0,infinite:!0,autoPlaySpeed:1e3,keyBoardControl:!0,customTransition:"0.5s ease-in",transitionDuration:500,containerClass:"carousel-container",removeArrowOnDeviceType:["tablet","mobile"],itemClass:"carousel-item-padding-40-px",children:x.map(t=>{var n;return e.jsxs("div",{className:s["recent-blogs-cards"],children:[e.jsx("div",{className:s["blog-swiper-thumbnail"],children:e.jsx(o,{to:`/single-blog/${t.id}`,children:e.jsx("img",{src:(n=t==null?void 0:t.featured_image)==null?void 0:n.source_url,alt:"image"})})}),e.jsxs("div",{className:s["blog-content"],children:[e.jsx("div",{className:s["authoring-date"],children:e.jsx("span",{children:new Date(t.date).toLocaleDateString()})}),e.jsx("div",{className:s["blog-name"],children:e.jsx("h5",{children:e.jsx(o,{to:`/single-blog/${t.id}`,children:t.title.rendered})})}),e.jsx("div",{className:s["read-more"],children:e.jsxs(o,{to:`/single-blog/${t.id}`,children:["Read more ",e.jsx(N,{})]})})]})]},t.id)})})]})})},V=()=>{const[p,x]=i.useState(!0),[d,t]=i.useState({}),[n,j]=i.useState([]);i.useEffect(()=>{(async()=>{try{const a=await l.get("https://blog.abhicares.com/wp-json/wp/v2/categories");j(a.data);const u=a.data.map(async m=>{const h=await l.get(`https://blog.abhicares.com/wp-json/wp/v2/posts?categories=${m.id}`);console.log("res",h);const D=h.data.map(async g=>{if(g.featured_media){const $=await l.get(`https://blog.abhicares.com/wp-json/wp/v2/media/${g.featured_media}`);return{...g,featured_media_data:$.data}}return g}),_=await Promise.all(D);return{category:m,posts:_}}),y=await Promise.all(u),w={};y.forEach(({category:m,posts:h})=>{w[m.id]={name:m.name,posts:h}}),t(w)}catch(a){console.error("Error fetching data:",a)}finally{x(!1)}})()},[]);const[f,c]=i.useState({title:"",description:""}),b=async()=>{try{const{data:r}=await l.get("https://abhicares.com/api/content/get-seo-by-page-user-side?page=blogs"),{seoTitle:a,seoDescription:u}=r==null?void 0:r.seo;c({title:a,description:u})}catch(r){console.log(r)}};return i.useEffect(()=>{b()},[]),p?e.jsx(v,{children:e.jsx("div",{className:s["recent-blogs-wrapper-loading"],children:e.jsx("div",{className:s.loading,children:e.jsx("h1",{children:"....Loading"})})})}):e.jsx(v,{children:e.jsxs("div",{className:s.wrapper,children:[e.jsx(S,{}),e.jsx("div",{className:s["recent-blogs-wrapper"],children:e.jsx("div",{children:Object.keys(d).map(r=>e.jsxs("div",{children:[e.jsx("h1",{children:d[r].name}),e.jsxs("div",{className:s["category-wrapper"],children:[e.jsx("div",{className:s["blogs-container"],children:d[r].posts.slice(0,4).map(a=>e.jsxs("div",{className:s["blog-cards"],children:[e.jsx("div",{className:s["blog-thumbnail"],children:a.featured_media_data&&e.jsx(o,{to:`/single-blog/${a.id}`,children:e.jsx("img",{src:a.featured_media_data.source_url,alt:""})})}),e.jsxs("div",{className:s["blog-content"],children:[e.jsx("div",{className:s["authoring-date"],children:e.jsx("span",{children:new Date(a.date).toLocaleDateString()})}),e.jsx("div",{className:s["blog-name"],children:e.jsx("h5",{children:e.jsx(o,{to:`/single-blog/${a.id}`,children:a.title.rendered})})}),e.jsx("div",{className:s["read-more"],children:e.jsxs(o,{to:`/single-blog/${a.id}`,children:["Read more ",e.jsx(N,{})]})})]})]},a.id))}),e.jsx("div",{className:s["view-more-button"],children:e.jsx("button",{className:s.btn,children:e.jsx(o,{to:`/blog-category/${r}`,children:"View More"})})})]})]},r))})})]})})};export{V as default};
