import{r as _,j as s,e as j,h as y}from"./index-MFgKNwIH.js";import{L as b}from"./Loader-CO7lNbH5.js";import{u as v,d as k}from"./index.esm-cL7qp0JE.js";import{I as N}from"./InvoiceModal-CNavSIJA.js";import{f as $}from"./index-BuE1W04I.js";import{W as C}from"./WebsiteWrapper-B0GV9j-e.js";import"./iconBase-CdfoCUfg.js";import"./useDispatch-CwGLudnh.js";import"./index.esm-Cv4_ejct.js";import"./jspdf-html2canvas.min-r16wKriL.js";import"./index-bQhL1O6I.js";import"./rolling-white-BBE_8u84.js";import"./Button-DHv-FYu5.js";import"./index.esm-Br4GktT8.js";const I="_order_145rl_1",O="_order_top_145rl_25",M="_img_145rl_55",D="_info_145rl_69",E="_info_row_145rl_77",w="_order_bottom_145rl_99",L="_progress_145rl_113",S="_d_flex_145rl_153",A="_status_145rl_163",q="_Cancelled_145rl_175",B="_Completed_145rl_183",V="_alloted_145rl_193",W="_pending_145rl_203",F="_OutOfDelivery_145rl_211",Q="_p_145rl_113",r={order:I,order_top:O,img:M,info:D,info_row:E,order_bottom:w,progress:L,d_flex:S,status:A,Cancelled:q,Completed:B,alloted:V,pending:W,OutOfDelivery:F,p:Q},z="_modal_overlay_h3fvf_1",G="_modal_h3fvf_1",T="_heading_container_h3fvf_49",H="_button_h3fvf_61",J="_p_container_h3fvf_81",K="_progress_h3fvf_89",P="_d_flex_h3fvf_131",U="_product_contaner_h3fvf_141",X="_product_h3fvf_141",Y="_img_h3fvf_173",Z="_info_h3fvf_183",R="_p_h3fvf_81",a={modal_overlay:z,modal:G,heading_container:T,button:H,p_container:J,progress:K,d_flex:P,product_contaner:U,product:X,img:Y,info:Z,p:R},ss=({setIsInfoModalOpen:n,order:c})=>{var h;const{res:o,fetchData:e,isLoading:p}=v();console.log(c._id);const[d,t]=_.useState({}),[m,l]=_.useState(!1),f=async()=>{e(`/shopping/get-product-invoice/${c._id}`)};return _.useEffect(()=>{f()},[]),_.useEffect(()=>{((o==null?void 0:o.status)===200||(o==null?void 0:o.status)===201)&&t(o==null?void 0:o.data.data)},[o]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:a.modal_overlay,children:s.jsxs("div",{className:a.modal,children:[s.jsxs("div",{className:a.heading_container,children:[s.jsx("h2",{children:"Booking Info"}),s.jsx(k,{onClick:()=>n(!1),size:22,cursor:"pointer"})]}),s.jsxs("div",{className:a.heading_container,children:[s.jsx("h3",{children:"Order1"}),s.jsx("button",{onClick:()=>l(!0),className:a.button,children:"View Invoice"})]}),s.jsx("div",{className:a.p_container,children:s.jsx("p",{className:a.qty,children:"Qty: 1"})}),s.jsx("h3",{children:"Products"}),s.jsx("div",{className:a.product_contaner,children:(h=c==null?void 0:c.products)==null?void 0:h.map(i=>{var g,x;return s.jsxs("div",{className:a.product,children:[s.jsx("img",{className:a.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${i.product.imageUrl[0]}`,alt:""}),s.jsxs("div",{className:a.info,children:[s.jsx("h4",{children:(g=i==null?void 0:i.product)==null?void 0:g.name}),s.jsxs("p",{children:["Qty: ",i==null?void 0:i.quantity]}),s.jsxs("p",{children:["₹",(x=i==null?void 0:i.product)==null?void 0:x.offerPrice]})]})]},i._id)})}),s.jsx("h4",{children:"Track Order"}),s.jsxs("div",{children:[s.jsx("div",{className:a.progress}),s.jsxs("div",{className:a.d_flex,children:[s.jsx("p",{}),s.jsx("p",{children:"Out for delivary"}),s.jsx("p",{children:"Delivered"})]})]}),s.jsx("hr",{})]})}),m&&s.jsx(N,{setIsInvoiceModalOpen:l})]})},ns=({order:n,index:c})=>{console.log("single order",n);const o=j(),[e,p]=_.useState(!1),d=()=>{o(`/my_bookings/${n._id}`,{state:n}),p(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{onClick:d,className:r.order,children:[s.jsx("div",{children:n.items.map((t,m)=>{var l,f,h;return s.jsx("img",{className:r.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${(l=t==null?void 0:t.product)!=null&&l.imageUrl[0]?(f=t==null?void 0:t.product)==null?void 0:f.imageUrl[0]:(h=t==null?void 0:t.package)==null?void 0:h.imageUrl[0]}`,alt:""},m)})}),s.jsxs("p",{style:{color:"grey"},children:["#",n.orderId]}),s.jsxs("p",{children:["Date : ",$(new Date(n.createdAt),"dd-MM-yyyy")]}),s.jsxs("p",{children:["Order Value : ₹",n.orderValue]}),s.jsxs("div",{className:r.order_bottom,children:[s.jsx("p",{children:"Order Status :"}),s.jsx("div",{className:` ${r.status} ${n.status==="Cancelled"?r.Cancelled:n.status==="Completed"?r.Completed:n.status==="Pending"?r.pending:r.OutOfDelivery}`,children:n==null?void 0:n.status})]})]}),e&&s.jsx(ss,{setIsInfoModalOpen:p,order:n})]})},os="_my_bookings_1k5yf_1",es="_img_1k5yf_15",ts="_table_1k5yf_31",as="_bookings_container_1k5yf_73",u={my_bookings:os,img:es,table:ts,bookings_container:as},vs=()=>{const{res:n,fetchData:c,isLoading:o}=v(),[e,p]=_.useState([]);j();const d=y("userInfo"),t=d==null?void 0:d.id,m=async()=>{c(`/shopping/get-user-orders?userId=${t}`)};return _.useEffect(()=>{m()},[]),_.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&p(n==null?void 0:n.data.data)},[n]),s.jsx(C,{children:s.jsxs("section",{className:u.my_bookings,children:[s.jsx("h1",{children:"MyBookings"}),!o&&(e==null?void 0:e.length)===0&&s.jsx("p",{children:"No bookings found"}),o&&(e==null?void 0:e.length)===0&&s.jsx(b,{}),s.jsx("div",{className:u.bookings_container,children:e==null?void 0:e.map((l,f)=>s.jsx(ns,{index:f,order:l},l._id))})]})})};export{vs as default};
