import{r as n,j as t,f as d,_ as I}from"./index-C00j65eE.js";import{R as C}from"./index.esm-dmdmgyGU.js";import{u as S}from"./useAuthorization-BQLez6m4.js";const N="_wrapper_d05c9_1",k="_modal_d05c9_27",R="_heading_container_d05c9_47",A="_select_d05c9_59",E="_form_d05c9_79",U="_input_container_d05c9_93",D="_input_d05c9_93",F="_d_flex_d05c9_119",$="_multi_select_d05c9_131",z="_button_wrapper_d05c9_171",B="_button_d05c9_171",O="_service_container_d05c9_203",H="_service_d05c9_203",s={wrapper:N,modal:k,heading_container:R,select:A,form:E,input_container:U,input:D,d_flex:F,multi_select:$,button_wrapper:z,button:B,service_container:O,service:H},K=({setIsModalOpen:p,getBannersFromServer:m,data:r})=>{const{checkAuthorization:g}=S(),[a,x]=n.useState({serviceId:"",categoryId:""}),[i,v]=n.useState([]),[l,f]=n.useState([]),[_,u]=n.useState(!1),h=e=>{const{name:c,value:o}=e.target;x({...a,[c]:o})},y=e=>{e.target.checked?u(!0):u(!1)},j=async()=>{try{const{data:e}=await d.get("https://abhicares.com/api/admin/get-all-category",{withCredentials:!0});console.log("categories",e.data),v(e.data)}catch(e){console.log(e)}};n.useEffect(()=>{j()},[]);const b=async()=>{try{const{data:e}=await d.get(`https://abhicares.com/api/admin/get-category-service/${a.categoryId}`,{withCredentials:!0});console.log("allCategoryServices",e.data),f(e.data)}catch(e){console.log(e)}};n.useEffect(()=>{b()},[a.categoryId]);const w=async e=>{e.preventDefault(),console.log("info",a);const c=new FormData;c.append("img",r.img),c.append("type",r.type),c.append("serviceId",a.serviceId),c.append("page",r.page),c.append("section",r.section);try{(await d.post("https://abhicares.com/api/content/upload-banners",c,{withCredentials:!0})).status===200&&(p(!1),m(),I.success("Updated successfully!"))}catch(o){console.log("ERROR",o.message),g(o)}};return t.jsx("div",{className:s.wrapper,children:t.jsxs("div",{className:s.modal,children:[t.jsxs("div",{className:s.heading_container,children:[t.jsx("h4",{children:"Update Banner"}),t.jsx("div",{className:s.d_flex,children:t.jsx(C,{onClick:()=>p(!1),cursor:"pointer",size:26})})]}),t.jsxs("form",{onSubmit:w,className:s.form,children:[t.jsxs("div",{className:s.select,children:[t.jsx("input",{onChange:y,value:_,type:"checkbox",name:"checkbox",id:"checkbox"}),"Does not want to specify category and service."]}),!_&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:s.input_container,children:[t.jsx("label",{htmlFor:"categoryId",children:"Category"}),t.jsxs("select",{onChange:h,value:a.categoryId,className:s.input,name:"categoryId",id:"categoryId",children:[t.jsx("option",{value:"choose a category",children:"Select a category"}),i==null?void 0:i.map(e=>t.jsx("option",{value:e._id,children:e.name},e._id))]})]}),a.categoryId&&t.jsxs("div",{className:s.input_container,children:[t.jsx("label",{htmlFor:"serviceId",children:"Service"}),t.jsxs("select",{onChange:h,value:a.serviceId,className:s.input,name:"serviceId",id:"serviceId",children:[t.jsx("option",{value:"choose a service",children:"Select a service"}),l==null?void 0:l.map(e=>t.jsx("option",{value:e._id,children:e.name},e._id))]})]})]}),t.jsx("div",{className:s.button_wrapper,children:t.jsx("button",{type:"submit",className:s.button,children:"Update"})})]})]})})};export{K as U};
