import{r as d,j as e,f as C,_ as y,e as O}from"./index-DmceSUEu.js";import{c as u}from"./Settings.module-DMv0i3HJ.js";import{W as k}from"./Wrapper-CijAMONv.js";import{R as P}from"./index.esm-CK3PNbdM.js";import{u as z}from"./useAuthorization-C8MmfE-L.js";import{e as H,b as L}from"./index.esm-Btv2RgTK.js";import{F as W}from"./index.esm-QxZgq_c_.js";import{a as T}from"./LogoutModal-BO_6Xxx7.js";import{L as B}from"./Loader-ChNLyE8c.js";import{D as G}from"./DeleteModal-BiCqzwz4.js";import"./logo -C1Nz5jdc.js";import"./iconBase-CgRV0d11.js";const J="_wrapper_1i30a_1",K="_modal_1i30a_27",Q="_heading_container_1i30a_47",V="_form_1i30a_59",X="_input_container_1i30a_73",Y="_input_1i30a_73",Z="_icon_1i30a_99",b="_button_wrapper_1i30a_123",A="_button_1i30a_123",ee="_permission_1i30a_149",se="_d_flex_1i30a_161",o={wrapper:J,modal:K,heading_container:Q,form:V,input_container:X,input:Y,icon:Z,button_wrapper:b,button:A,permission:ee,d_flex:se},ae="_wrapper_qrszr_1",te="_modal_qrszr_27",ne="_heading_container_qrszr_43",re="_form_qrszr_55",oe="_input_container_qrszr_69",ce="_input_qrszr_69",ie="_button_wrapper_qrszr_101",le="_button_qrszr_101",de="_permission_qrszr_127",pe="_d_flex_qrszr_139",c={wrapper:ae,modal:te,heading_container:ne,form:re,input_container:oe,input:ce,button_wrapper:ie,button:le,permission:de,d_flex:pe},I=({setIsModalOpen:h,adminId:s})=>{const l=d.useRef(),r=d.useRef(),[f,x]=d.useState(null),{checkAuthorization:j}=z(),g=async p=>{var w,_;p.preventDefault(),console.log("password updated");const t=l.current.value,a=r.current.value;try{(await C.patch("https://abhicares.com/api/admin/update-admin-password",{currentPassword:t,newPassword:a,adminId:s},{withCredentials:!0})).status===200&&(y.success("Password Updated Successfully!"),h(!1))}catch(v){console.log(v),x((_=(w=v==null?void 0:v.response)==null?void 0:w.data)==null?void 0:_.message),j(v)}};return e.jsx("div",{className:c.wrapper,children:e.jsxs("div",{className:c.modal,children:[e.jsxs("div",{className:c.heading_container,children:[e.jsx("h4",{children:"Update Password"}),e.jsx("div",{className:c.d_flex,children:e.jsx(P,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),f&&e.jsx("h6",{style:{textAlign:"center",color:"orangered",fontWeight:"bold"},children:f}),e.jsxs("form",{onSubmit:g,className:c.form,children:[e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"current-password",children:"Current Password"}),e.jsx("input",{className:c.input,ref:l,type:"password",name:"current-password",id:"current-password",placeholder:"enter current password"})]}),e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"new-password",children:"New Password"}),e.jsx("input",{className:c.input,ref:r,type:"password",name:"new-password",id:"new-password",placeholder:"enter new password"})]}),e.jsx("div",{className:c.button_wrapper,children:e.jsx("button",{className:c.button,children:"Update"})})]})]})})},U=({setIsModalOpen:h,subAdmin:s,getSubadmins:l})=>{const[r,f]=d.useState({name:(s==null?void 0:s.name)||"",password:(s==null?void 0:s.password)||"",role:(s==null?void 0:s.role)||"",adminId:(s==null?void 0:s.adminId)||""}),[x,j]=d.useState(!0),[g,p]=d.useState(!1),{checkAuthorization:t}=z(),[a,w]=d.useState({dashboard:(s==null?void 0:s.permissions.dashboard)||"",banners:(s==null?void 0:s.permissions.banners)||"",orders:(s==null?void 0:s.permissions.orders)||"",bookings:(s==null?void 0:s.permissions.bookings)||"",services:(s==null?void 0:s.permissions.services)||"",partners:(s==null?void 0:s.permissions.partners)||"",customers:(s==null?void 0:s.permissions.customers)||"",offers:(s==null?void 0:s.permissions.offers)||"",availableCities:(s==null?void 0:s.permissions.availableCities)||"",payments:(s==null?void 0:s.permissions.payments)||"",enquiry:(s==null?void 0:s.permissions.enquiry)||"",helpCenter:(s==null?void 0:s.permissions.helpCenter)||"",settings:(s==null?void 0:s.permissions.settings)||"",reviews:(s==null?void 0:s.permissions.reviews)||"",notifications:(s==null?void 0:s.permissions.notifications)||""}),_=n=>{const{name:m,value:$}=n.target;f({...r,[m]:$})},v=()=>{j(!x)},S=(n,m)=>{w({...a,[n]:m})},q=async n=>{if(n.preventDefault(),!(!r.adminId||!r.name||!r.password||!r.role||!a.dashboard||!a.banners||!a.orders||!a.bookings||!a.services||!a.partners||!a.customers||!a.offers||!a.availableCities||!a.payments||!a.enquiry||!a.helpCenter||!a.settings))if(s)try{const{data:m}=await C.patch(`https://abhicares.com/api/admin/update-sub-admin/${s._id}`,{...r,permissions:a},{withCredentials:!0});y.success("SubAdmin updated successfully"),h(!1),l()}catch(m){console.log(m),h(!1),t(m)}else try{const{data:m}=await C.post("https://abhicares.com/api/admin/create-Admin",{...r,permissions:a},{withCredentials:!0});y.success("SubAdmin added successfully"),h(!1),l()}catch(m){console.log(m),h(!1),t(m)}};return e.jsxs("div",{className:o.wrapper,children:[e.jsxs("div",{className:o.modal,children:[e.jsxs("div",{className:o.heading_container,children:[e.jsxs("h4",{children:[s?"Update":"Add"," Sub Admin"]}),e.jsx("div",{className:o.d_flex,children:e.jsx(P,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{className:o.form,children:[e.jsxs("div",{className:o.input_container,children:[e.jsx("label",{htmlFor:"adminId",children:"User Name"}),e.jsx("input",{className:o.input,onChange:_,value:r.adminId,type:"text",name:"adminId",id:"adminId",placeholder:"enter your username"})]}),e.jsxs("div",{className:o.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:o.input,onChange:_,value:r.name,type:"text",name:"name",id:"name",placeholder:"enter your name"})]}),!s&&e.jsxs("div",{className:o.input_container,children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{className:o.input,onChange:_,value:r.password,type:x?"password":"text",name:"password",id:"password",placeholder:"enter your password"}),x?e.jsx(H,{className:o.icon,onClick:v}):e.jsx(L,{className:o.icon,onClick:v})]}),e.jsxs("div",{className:o.input_container,children:[e.jsx("label",{htmlFor:"role",children:"Role"}),e.jsxs("select",{className:o.input,name:"role",value:r.role,onChange:_,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"subAdmin",children:"Sub Admin"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:o.input_container,children:[e.jsx("label",{htmlFor:"",children:"permissions"}),e.jsx("div",{children:Object.keys(a).map((n,m)=>e.jsxs("div",{className:o.permission,children:[e.jsx("p",{children:n}),e.jsxs("div",{className:o.d_flex,children:[e.jsxs("div",{className:o.d_flex,children:[e.jsx("input",{onChange:$=>S(n,"read"),type:"radio",name:`${n}-read`,id:`${n}-read`,value:a[n],checked:a[n]==="read"}),e.jsx("span",{children:"read"})]}),e.jsxs("div",{className:o.d_flex,children:[e.jsx("input",{onChange:$=>S(n,"write"),type:"radio",name:`${n}-write`,id:`${n}-write`,value:a[n],checked:a[n]==="write"}),e.jsx("span",{children:"write"})]}),e.jsxs("div",{className:o.d_flex,children:[e.jsx("input",{onChange:$=>S(n,"none"),type:"radio",name:`${n}-none`,id:`${n}-none`,value:a[n],checked:a[n]==="none"}),e.jsx("span",{children:"none"})]})]})]},n))})]}),e.jsxs("div",{className:o.button_wrapper,children:[s&&e.jsx("button",{className:o.button,onClick:n=>{n.preventDefault(),p(!0)},children:"Update Password"}),e.jsx("button",{className:o.button,onClick:q,children:s?"Update":"Add"})]})]})]}),g&&e.jsx(I,{setIsModalOpen:p,adminId:s==null?void 0:s.adminId})]})},he=({setIsModalOpen:h,subAdmin:s})=>{const[l,r]=d.useState({title:"",page:"",desc:""}),{checkAuthorization:f}=z(),x=async p=>{const{value:t}=p.target;try{r(w=>({...w,page:t}));const{data:a}=await C.get(`https://abhicares.com/api/content/get-seo-by-page?page=${t}`,{withCredentials:!0});console.log("seo",a),r(w=>({...w,title:a.seo.seoTitle,desc:a.seo.seoDescription}))}catch(a){console.log(a)}},j=async p=>{const{name:t,value:a}=p.target;r({...l,[t]:a})},g=async p=>{if(p.preventDefault(),console.log("page",l.page),!(!l.title||!l.desc))try{const t=await C.patch("https://abhicares.com/api/content/update-seo-by-page",{page:l.page,seoDescription:l.desc,seoTitle:l.title},{withCredentials:!0});console.log("update seo",t.data),t.status===200&&(y.success("Seo updated successfully"),h(!1))}catch(t){console.log(t),h(!1),f(t)}};return e.jsx("div",{className:c.wrapper,children:e.jsxs("div",{className:c.modal,children:[e.jsxs("div",{className:c.heading_container,children:[e.jsx("h4",{children:"Manage SEO"}),e.jsx("div",{className:c.d_flex,children:e.jsx(P,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:g,className:c.form,children:[e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"page",children:"Page"}),e.jsxs("select",{className:c.input,name:"page",value:l.page,onChange:x,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"womens-salon-spa",children:"Women's salon & spa"}),e.jsx("option",{value:"makeup-mehandi",children:"Makeup & Mehandi"}),e.jsx("option",{value:"mens-salon-massage",children:"Men's Salon & Massage"}),e.jsx("option",{value:"home-care",children:"Home Care"}),e.jsx("option",{value:"home-repair",children:"Home Repair"}),e.jsx("option",{value:"appliance-repair",children:"Appliance Repair"}),e.jsx("option",{value:"home-page",children:"Home Page"}),e.jsx("option",{value:"about-us",children:"About Us"}),e.jsx("option",{value:"register-as-professional",children:"Register as Professional"}),e.jsx("option",{value:"blogs",children:"Blogs"})]})]}),e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{className:c.input,onChange:j,value:l.title,type:"text",name:"title",id:"title",placeholder:"enter title"})]}),e.jsxs("div",{className:c.input_container,children:[e.jsx("label",{htmlFor:"desc",children:"Description"}),e.jsx("textarea",{className:c.input,onChange:j,value:l.desc,name:"desc",id:"desc",placeholder:"enter description"})]}),e.jsx("div",{className:c.button_wrapper,children:e.jsx("button",{className:c.button,children:"Update"})})]})]})})},me="_wrapper_qrszr_1",ue="_modal_qrszr_27",_e="_heading_container_qrszr_43",xe="_form_qrszr_55",je="_input_container_qrszr_69",fe="_input_qrszr_69",ge="_button_wrapper_qrszr_101",we="_button_qrszr_101",ve="_permission_qrszr_127",Ne="_d_flex_qrszr_139",N={wrapper:me,modal:ue,heading_container:_e,form:xe,input_container:je,input:fe,button_wrapper:ge,button:we,permission:ve,d_flex:Ne},Ce=({setIsModalOpen:h,subAdmin:s})=>{const[l,r]=d.useState(""),{checkAuthorization:f}=z(),x=async()=>{var p;try{const{data:t}=await C.get("https://abhicares.com/api/admin/get-refer-and-earn-amount",{withCredentials:!0});console.log("amount",t),r((p=t==null?void 0:t.doc[0])==null?void 0:p.amount)}catch(t){console.log(t)}};d.useEffect(()=>{x()},[]);const j=async p=>{const{name:t,value:a}=p.target;r(a)},g=async p=>{if(p.preventDefault(),!!l)try{const t=await C.post("https://abhicares.com/api/admin/update-refer-and-earn-amount",{amount:l},{withCredentials:!0});console.log("update refer and earn",t),t.status===201&&(y.success(t==null?void 0:t.data.message),h(!1))}catch(t){console.log(t),h(!1),f(t)}};return e.jsx("div",{className:N.wrapper,children:e.jsxs("div",{className:N.modal,children:[e.jsxs("div",{className:N.heading_container,children:[e.jsx("h4",{children:"Update Refer and Earn"}),e.jsx("div",{className:N.d_flex,children:e.jsx(P,{onClick:()=>h(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:g,className:N.form,children:[e.jsxs("div",{className:N.input_container,children:[e.jsx("label",{htmlFor:"amount",children:"Amount"}),e.jsx("input",{className:N.input,onChange:j,value:l,type:"number",name:"amount",id:"amount",placeholder:"enter amount"})]}),e.jsx("div",{className:N.button_wrapper,children:e.jsx("button",{className:N.button,children:"Update"})})]})]})})},Fe=()=>{const[h,s]=d.useState(!1),[l,r]=d.useState(!1),[f,x]=d.useState(!1),[j,g]=d.useState(!1),[p,t]=d.useState(!1),[a,w]=d.useState({}),[_,v]=d.useState([]),[S,q]=d.useState(!0),[n,m]=d.useState(!1),{checkAuthorization:$}=z(),R=O(),D=i=>{w(i),x(!f)},E=i=>{w(i),g(!j)},F=async()=>{try{const{data:i}=await C.delete(`https://abhicares.com/api/admin/delete-sub-admin?subAdminId=${a==null?void 0:a._id}&role=${a==null?void 0:a.role}`,{withCredentials:!0});y.success("Subadmin deleted successfully"),g(!j),M()}catch(i){console.log(i),$(i)}},M=async()=>{try{const{data:i}=await C.get("https://abhicares.com/api/admin/get-sub-admins",{withCredentials:!0});console.log("data",i),v(i==null?void 0:i.admins)}catch(i){console.log(i)}finally{q(!1)}};return d.useEffect(()=>{M()},[]),e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsxs("div",{className:u.settings,children:[e.jsxs("div",{className:u.heading_container,children:[e.jsx("h1",{children:"Settings"}),e.jsxs("div",{className:u.btn_wrapper,children:[e.jsx("button",{onClick:()=>m(!0),className:u.button,children:"Update Refer and Earn"}),e.jsx("button",{onClick:()=>r(!0),className:u.button,children:"Manage SEO"}),e.jsx("button",{onClick:()=>s(!0),className:u.button,children:"Add Subadmin"}),e.jsx("button",{onClick:()=>t(!0),className:u.button,children:"Update Password"}),e.jsx("button",{onClick:()=>R("/admin/settings/manage-comision"),className:u.button,children:"Manage Comision"})]})]}),S&&_.length===0&&e.jsx(B,{}),e.jsxs("div",{className:u.container,children:[!S&&_.length===0&&e.jsx("p",{children:"No subAdmins found"}),_==null?void 0:_.map(i=>e.jsxs("div",{className:u.item,children:[e.jsxs("div",{className:u.left,children:[e.jsxs("p",{children:["Name: ",i.name]}),e.jsxs("p",{children:["Username: ",i.adminId]}),e.jsxs("p",{children:["Role: ",i.role]}),e.jsxs("p",{children:["Status:"," ",e.jsx("span",{className:`${u.status} ${i.status?u.active:u.inactive}`,children:i.status?"Active":"InActive"})]})]}),e.jsxs("div",{className:u.right,children:[e.jsx(W,{onClick:()=>D(i),cursor:"pointer",size:20}),e.jsx(T,{onClick:()=>E(i),cursor:"pointer",size:22,color:"red"})]})]},i._id))]})]})}),l&&e.jsx(he,{setIsModalOpen:r}),n&&e.jsx(Ce,{setIsModalOpen:m}),h&&e.jsx(U,{setIsModalOpen:s,getSubadmins:M}),f&&e.jsx(U,{setIsModalOpen:x,getSubadmins:M,subAdmin:a}),p&&e.jsx(I,{setIsModalOpen:t}),j&&e.jsx(G,{setState:g,handleDelete:F})]})};export{Fe as default};
