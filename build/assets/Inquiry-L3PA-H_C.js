import{e as S,r as o,j as e,f as d,_ as $}from"./index-DmceSUEu.js";import{W as b,c as t}from"./Wrapper-CijAMONv.js";import{D as q}from"./DeleteModal-BiCqzwz4.js";import{L as D}from"./Loader-ChNLyE8c.js";import{i as w,a as C}from"./LogoutModal-BO_6Xxx7.js";import{u as E}from"./useAuthorization-C8MmfE-L.js";import"./logo -C1Nz5jdc.js";import"./iconBase-CgRV0d11.js";const F=()=>{const{checkAuthorization:m}=E();S();const[i,c]=o.useState(!1),[r,h]=o.useState([]),[x,u]=o.useState(""),[p,j]=o.useState(!0),f=(s,a)=>{s.stopPropagation(),u(a),c(!i)},g=async()=>{try{const{data:s}=await d.delete(`https://abhicares.com/api/admin/delete-enquiry/${x}`,{withCredentials:!0});console.log(s),$.success("Enquiry deleted successfully"),n(),c(!i)}catch(s){console.log(s),c(!1),m(s)}},n=async()=>{try{const{data:s}=await d.get("https://abhicares.com/api/admin/get-all-enquiry",{withCredentials:!0});console.log(s),h(s.data)}catch(s){console.log(s)}finally{j(!1)}};o.useEffect(()=>{n()},[]);const y=async s=>{const a=s.target.value;if(console.log("value",a),!a){n();return}try{const{data:l}=await d.get(`https://abhicares.com/api/admin/search-enquiries?query=${a}`,{withCredentials:!0});console.log("search",l),h(l.data)}catch(l){console.log(l)}};function N(s,a){let l=null;return function(v){l&&clearTimeout(l),l=setTimeout(()=>{s(v)},a)}}return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsxs("div",{className:t["report-container"],children:[e.jsxs("div",{className:t["report-header"],children:[e.jsx("h1",{className:t["recent-Articles"],children:"Enquiries"}),e.jsx("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:e.jsxs("div",{className:"d-flex",style:{position:"relative"},children:[e.jsx(w,{onClick:()=>{},style:{position:"absolute",left:"8px",top:"10px",cursor:"pointer"}}),e.jsx("input",{onChange:N(y,1e3),style:{width:"400px",padding:"5px 10px",paddingLeft:"30px",borderRadius:"5px"},type:"search",placeholder:"search enquiry by name, phone and city"})]})})]}),e.jsxs("div",{className:t["report-body"],children:[e.jsxs("div",{className:t.enquiries,children:[e.jsx("h3",{className:t["t-op"],children:"Name"}),e.jsx("h3",{className:t["t-op"],children:"Phone"}),e.jsx("h3",{className:t["t-op"],children:"City"}),e.jsx("h3",{className:t["t-op"],children:"State"}),e.jsx("h3",{className:t["t-op"],children:"Service Type"}),e.jsx("h3",{className:t["t-op"],children:"Delete"})]}),e.jsxs("div",{className:t.items,children:[!p&&r.length===0&&e.jsx("p",{children:"No inquiries found"}),p&&r.length===0&&e.jsx(D,{}),r==null?void 0:r.map(s=>e.jsxs("div",{className:t.enquiries,children:[e.jsx("h3",{className:t["t-op-nextlvl"],children:s.name}),e.jsx("h3",{className:t["t-op-nextlvl"],children:s.phone}),e.jsx("h3",{className:`${t["t-op-nextlvl"]}`,children:s.city}),e.jsx("h3",{className:`${t["t-op-nextlvl"]}`,children:s.state}),e.jsx("h3",{className:`${t["t-op-nextlvl"]}`,children:s.serviceType}),e.jsx("h3",{className:`${t["t-op-nextlvl"]}`,children:e.jsx(C,{onClick:a=>f(a,s._id),cursor:"pointer",size:22,color:"red"})})]},s._id))]})]})]})}),i&&e.jsx(q,{setState:c,handleDelete:g})]})};export{F as default};
