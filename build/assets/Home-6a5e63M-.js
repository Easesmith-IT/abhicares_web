import{r as o,e as N,j as n,_ as v,f as j}from"./index-I-QjRnx0.js";import{W as w}from"./Wrapper-BY0MUZnD.js";import{c as b}from"./Banner.module-CgHYAcNB.js";import{u as y}from"./useAuthorization-Ia5IpIJC.js";import{U as I}from"./UpdateBannerModal-DEEE5ZtW.js";import"./logo -C1Nz5jdc.js";import"./index.esm-C3Z8P0YS.js";import"./iconBase-BpojMoAv.js";import"./useDispatch-PMR2IWSw.js";import"./Shared.module-DD54I-nI.js";import"./index.esm-MEfTCSon.js";import"./usePostApiReq-hUuV07yT.js";const A=()=>{y();const[t,c]=o.useState([{bannerName:"banner1",file:null,preview:null},{bannerName:"banner2",file:null,preview:null},{bannerName:"banner3",file:null,preview:null},{bannerName:"banner4",file:null,preview:null},{bannerName:"banner5",file:null,preview:null},{bannerName:"banner6",file:null,preview:null}]),[u,p]=o.useState(!1),[f,g]=o.useState({img:"",type:"",page:"",section:""});N();const h=(e,a)=>{const s=e.target.files[0];console.log(s);const i=new FileReader;i.readAsDataURL(s),i.addEventListener("load",function(){console.log(this.result);const l=t.findIndex(m=>m.bannerName===a),r=[...t];r.splice(l,1,{bannerName:a,file:s,preview:this.result}),c(r)})},x=async e=>{let a=t.find(s=>s.bannerName===e);if(!a.file){v.error("Please select the image");return}g({img:a.file,type:e,page:"home-sale-banners",section:"web-homepage"}),p(!0)},d=async()=>{try{const e=await j.get("https://abhicares.com/api/content/get-banners",{params:{heroBanners:!0,page:"home-sale-banners",section:"web-homepage"}});console.log("banners",e);const a=[...t];for(let s=0;s<e.data.banners.length;s++){const i=e.data.banners[s].image,l=`banner${s+1}`,r=t.findIndex(m=>m.bannerName===l);r!==-1&&a.splice(r,1,{bannerName:l,file:"",preview:`https://storage.googleapis.com/abhicares-backend-bucket/${i}`})}c(a)}catch(e){console.log(e.message)}};return o.useEffect(()=>{d()},[]),n.jsxs(n.Fragment,{children:[n.jsx(w,{children:n.jsxs("div",{children:[n.jsx("div",{className:"my-3 mx-5 d-flex justify-content-between",children:n.jsx("h3",{children:"Sales Banners(3)"})}),n.jsx("div",{className:b.imagesContainer,children:t&&t.map((e,a)=>n.jsxs("div",{className:b.imageWrapper,children:[e.bannerName&&e.preview&&n.jsx("img",{src:e.preview,alt:`i${a+1}`}),n.jsx("input",{type:"file",name:e.bannerName,accept:"image/*",onChange:s=>h(s,e.bannerName),className:"mb-2"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>x(`banner${a+1}`),children:"Update"})]},a))}),n.jsx("div",{className:"d-flex justify-content-end mx-5 mt-4"})]})}),u&&n.jsx(I,{getBannersFromServer:d,setIsModalOpen:p,data:f})]})};export{A as default};
