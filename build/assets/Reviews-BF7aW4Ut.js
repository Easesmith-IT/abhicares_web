import{r as c,e as z,j as s,f as m,_ as R}from"./index-C00j65eE.js";import{W as V}from"./Wrapper-Bui_DUEg.js";import{L as J}from"./Loader-Bg91KXBw.js";import{P as W}from"./react-bootstrap-pagination-control.esm-DDeb_m0O.js";import{h as A,a as q}from"./LogoutModal-BFEBZfWM.js";import{D as Q}from"./DeleteModal-iZuDhOqx.js";import{R as U}from"./index.esm-dmdmgyGU.js";import{R as O}from"./react-stars-1IF78-z3.js";import{p as L}from"./index-Wjobe2wE.js";import{f as Z}from"./index-CwLm7xHs.js";import"./logo -C1Nz5jdc.js";import"./iconBase-DBedV832.js";const H="_settings_o9f4h_1",K="_filter_container_o9f4h_11",X="_filter_button_o9f4h_21",Y="_filter_input_o9f4h_37",w="_left_o9f4h_47",D="_heading_container_o9f4h_57",ee="_btn_wrapper_o9f4h_71",se="_button_o9f4h_81",ne="_container_o9f4h_97",te="_flex_o9f4h_111",ae="_item_o9f4h_125",ce="_right_o9f4h_149",oe="_status_o9f4h_159",ie="_active_o9f4h_169",re="_inactive_o9f4h_179",i={settings:H,filter_container:K,filter_button:X,filter_input:Y,left:w,heading_container:D,btn_wrapper:ee,button:se,container:ne,flex:te,item:ae,right:ce,status:oe,active:ie,inactive:re},de="_wrapper1_16asb_1",le="_modal_16asb_27",he="_heading_container_16asb_47",pe="_viewBtn_16asb_59",ge="_heading_16asb_47",_e="_reviewGrid_16asb_83",xe="_price_16asb_109",a={wrapper1:de,modal:le,heading_container:he,viewBtn:pe,heading:ge,reviewGrid:_e,price:xe},ue=({setIsModalOpen:o,review:d})=>{var f,t,y,_,b,I,k,j,x,v,n,N,T,C,S,P,$,M,B,E;const[e,h]=c.useState(""),[p,l]=c.useState(!0),g=z(),u=async()=>{try{const{data:r}=await m.get(`https://abhicares.com/api/admin/review-detail?reviewId=${d._id}`,{withCredentials:!0});console.log("details reviews",r),h(r.data)}catch(r){console.log(r)}finally{l(!1)}};return c.useEffect(()=>{u()},[]),s.jsx("div",{className:a.wrapper1,children:s.jsxs("div",{className:a.modal,children:[s.jsxs("div",{className:a.heading_container,children:[s.jsx("h4",{children:"Review Details"}),s.jsx("div",{className:a.d_flex,children:s.jsx(U,{onClick:()=>o(!1),cursor:"pointer",size:26})})]}),s.jsxs("div",{children:[s.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"10px"},children:["Rating:",s.jsx(O,{count:5,edit:!1,value:d.rating,size:24,color2:"#ffd700"})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Date:"})," ",d.date]}),s.jsxs("p",{children:[s.jsx("b",{children:"Review Type:"})," ",e==null?void 0:e.reviewType]}),s.jsxs("p",{children:[s.jsx("b",{children:"Review:"})," ",d.content]}),s.jsxs("div",{className:a.reviewGrid,children:[s.jsxs("div",{children:[s.jsx("div",{className:a.heading_container,children:s.jsx("h5",{className:a.heading,children:"User Details"})}),s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",(f=e==null?void 0:e.userId)==null?void 0:f.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone:"})," ",(t=e==null?void 0:e.userId)==null?void 0:t.phone]})]}),s.jsxs("div",{children:[s.jsx("div",{className:a.heading_container,children:s.jsx("h5",{className:a.heading,children:"Service Details"})}),s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",e!=null&&e.productId?(y=e==null?void 0:e.productId)==null?void 0:y.name:(_=e==null?void 0:e.packageId)==null?void 0:_.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Type:"})," ",e!=null&&e.productId?"Product":"Package"]}),s.jsxs("p",{children:[s.jsx("b",{children:"Description:"}),e!=null&&e.productId?s.jsx("p",{children:L((b=e==null?void 0:e.productId)==null?void 0:b.description)}):s.jsx("p",{children:((I=e==null?void 0:e.packageId)==null?void 0:I.description)&&L((k=e==null?void 0:e.packageId)==null?void 0:k.description)})]}),s.jsxs("div",{className:a.price,children:[s.jsxs("span",{children:["₹",e!=null&&e.productId?(j=e==null?void 0:e.productId)==null?void 0:j.price:(x=e==null?void 0:e.packageId)==null?void 0:x.price]}),s.jsxs("span",{children:["₹",e!=null&&e.productId?(v=e==null?void 0:e.productId)==null?void 0:v.offerPrice:(n=e==null?void 0:e.packageId)==null?void 0:n.offerPrice]})]})]}),((N=e==null?void 0:e.bookingId)==null?void 0:N.sellerId)&&s.jsxs("div",{children:[s.jsxs("div",{className:a.heading_container,children:[s.jsx("h5",{className:a.heading,children:"Partner Details"}),s.jsx("button",{onClick:()=>{var r,F,G;return g(`/admin/partners/${(F=(r=e==null?void 0:e.bookingId)==null?void 0:r.sellerId)==null?void 0:F._id}`,{state:(G=e==null?void 0:e.bookingId)==null?void 0:G.sellerId})},className:a.viewBtn,children:"View"})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",(C=(T=e==null?void 0:e.bookingId)==null?void 0:T.sellerId)==null?void 0:C.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone:"})," ",(P=(S=e==null?void 0:e.bookingId)==null?void 0:S.sellerId)==null?void 0:P.phone]})]}),(e==null?void 0:e.bookingId)&&s.jsxs("div",{children:[s.jsxs("div",{className:a.heading_container,children:[s.jsx("h5",{className:a.heading,children:"Booking Details"}),s.jsx("button",{onClick:()=>{var r;return g(`/admin/bookings/${(r=e==null?void 0:e.bookingId)==null?void 0:r._id}`,{state:e==null?void 0:e.bookingId})},className:a.viewBtn,children:"View"})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Order Value:"})," ",($=e==null?void 0:e.bookingId)==null?void 0:$.orderValue]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Date:"})," ",((M=e==null?void 0:e.bookingId)==null?void 0:M.bookingDate)&&Z(new Date((B=e==null?void 0:e.bookingId)==null?void 0:B.bookingDate),"dd-MM-yyyy")]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Time:"})," ",(E=e==null?void 0:e.bookingId)==null?void 0:E.bookingTime]})]})]})]})]})})},fe=({review:o,fetchReviews:d})=>{const[e,h]=c.useState(!1),[p,l]=c.useState(!1),g=async()=>{try{await m.delete(`https://abhicares.com/api/admin/delete-review?reviewId=${o==null?void 0:o._id}`,{withCredentials:!0}),R.success("Review deleted successfully"),d()}catch(u){console.error(u),R.error("Failed to delete review")}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:i.item,children:s.jsxs("div",{className:i.left,children:[s.jsxs("div",{className:i.flex,children:[s.jsxs("p",{children:["Title: ",o.title]}),s.jsxs("div",{className:i.right,children:[s.jsx(A,{onClick:()=>l(!0),cursor:"pointer",size:22,color:"black"}),s.jsx(q,{onClick:()=>h(!0),cursor:"pointer",size:22,color:"red"})]})]}),s.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"10px"},children:["Rating:",s.jsx(O,{count:5,edit:!1,value:o.rating,size:24,color2:"#ffd700"})]}),s.jsxs("p",{children:["Date: ",o.date]}),s.jsxs("p",{children:["Review: ",o.content]})]})}),e&&s.jsx(Q,{handleDelete:g,setState:h}),p&&s.jsx(ue,{setIsModalOpen:l,review:o})]})},Pe=()=>{const o=[{_id:"1",userName:"John Doe",serviceType:"delivery",date:"2024-11-20T10:30:00.000Z",content:"Great service! The delivery was quick and the food was hot."},{_id:"2",userName:"Jane Smith",serviceType:"pickup",date:"2024-11-18T15:45:00.000Z",content:"The staff was friendly, but the order was slightly delayed."},{_id:"3",userName:"Mike Johnson",serviceType:"delivery",date:"2024-11-19T12:20:00.000Z",content:"The app is easy to use, and the service is reliable."},{_id:"4",userName:"Emily Davis",serviceType:"pickup",date:"2024-11-17T18:00:00.000Z",content:"Good experience, but the packaging could be better."},{_id:"5",userName:"David Brown",serviceType:"delivery",date:"2024-11-16T20:15:00.000Z",content:"Excellent delivery timing. The driver was polite and professional."},{_id:"6",userName:"Sophia Wilson",serviceType:"pickup",date:"2024-11-15T14:10:00.000Z",content:"Quick and easy pickup. The restaurant staff was helpful."}],[d,e]=c.useState(o),[h,p]=c.useState(!0),[l,g]=c.useState(1),[u,f]=c.useState(0),[t,y]=c.useState({date:"",serviceType:"",type:""}),[_,b]=c.useState([]);console.log("filter",t);const I=async()=>{try{const{data:n}=await m.get("https://abhicares.com/api/admin/get-all-category",{withCredentials:!0});b(n.data),console.log("allCategories",n)}catch(n){console.log(n)}};c.useEffect(()=>{I()},[]);const k=async n=>{g(n)},j=async()=>{p(!0);try{const{data:n}=await m.get(`https://abhicares.com/api/admin/get-all-reviews?page=${l}`,{withCredentials:!0});console.log("reviews",n),e(n.data),f(n.totalPages)}catch(n){console.error(n),R.error("Failed to fetch reviews")}finally{p(!1)}},x=n=>{const{name:N,value:T}=n.target;y({...t,[N]:T})},v=async()=>{try{const{data:n}=await m.get(`https://abhicares.com/api/admin/filter-review?date=${t.date&&Z(new Date(t.date),"dd/MM/yyyy")}&serviceType=${t.serviceType}&reviewType=${t.type}&page=${l}`,{withCredentials:!0});console.log("filter reviews",n),f(n.totalPages),e(n.data)}catch(n){console.log(n)}finally{p(!1)}};return c.useEffect(()=>{!t.date&&!t.serviceType&&!t.type?j():v()},[l,t.date,t.serviceType,t.type]),s.jsx(V,{children:s.jsxs("div",{className:i.settings,children:[s.jsxs("div",{className:i.heading_container,children:[s.jsx("h1",{children:"Reviews"}),s.jsxs("div",{className:i.filter_container,children:[s.jsx("input",{type:"date",name:"date",value:t.date,onChange:x,placeholder:"Start Date",className:i.filter_input}),s.jsxs("select",{name:"serviceType",value:t.serviceType,onChange:x,className:i.filter_input,children:[s.jsx("option",{value:"",children:"Select Service"}),_==null?void 0:_.map(n=>s.jsx("option",{value:n==null?void 0:n._id,children:n==null?void 0:n.name},n==null?void 0:n._id))]}),s.jsxs("select",{name:"type",value:t.type,onChange:x,className:i.filter_input,children:[s.jsx("option",{value:"",children:"Select Type"}),s.jsx("option",{value:"service",children:"Service"}),s.jsx("option",{value:"product",children:"Product"})]})]})]}),h?s.jsx(J,{}):d.length===0?s.jsx("p",{children:"No reviews found"}):s.jsx("div",{className:i.container,children:d.map(n=>s.jsx(fe,{review:n,fetchReviews:j},n._id))}),s.jsx("div",{style:{marginTop:"20px"},children:s.jsx(W,{changePage:k,limit:10,page:l,total:u+"0"})})]})})};export{Pe as default};
