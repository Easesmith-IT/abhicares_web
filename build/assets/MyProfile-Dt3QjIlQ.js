import{r,j as e,_ as u,f as C}from"./index-C00j65eE.js";import{W as A}from"./WebsiteWrapper-DPwAgfCs.js";import{S as m}from"./index-Bqdc5k42.js";import{A as E,y as S}from"./LogoutModal-BFEBZfWM.js";import"./rolling-white-BBE_8u84.js";import"./index.esm-B5E25rFw.js";import"./iconBase-DBedV832.js";import"./Button-DUNLdeQj.js";import"./index.esm-D4599Q37.js";const k="_my_profile_149bl_1",P="_profile_top_149bl_15",I="_profile_info_149bl_29",M="_img_149bl_47",T="_profile_info_right_149bl_71",U="_profileDetails_149bl_75",$="_referralDetails_149bl_89",L="_bold_149bl_105",O="_input_box_149bl_113",z="_d_flex_149bl_135",F="_btn_149bl_151",J="_referral_code_wrapper_149bl_171",W="_address_container_149bl_189",q="_address_149bl_189",i={my_profile:k,profile_top:P,profile_info:I,img:M,profile_info_right:T,profileDetails:U,referralDetails:$,bold:L,input_box:O,d_flex:z,btn:F,referral_code_wrapper:J,address_container:W,address:q},D="_modal_overlay_136uf_1",G="_modal_open_136uf_21",K="_modal_close_136uf_33",R="_modal_wrapper_136uf_41",B="_modal_136uf_1",H="_p_136uf_103",Y="_mt_136uf_113",Q="_input_box_136uf_121",V="_input_136uf_121",X="_button_136uf_155",n={modal_overlay:D,modal_open:G,modal_close:K,modal_wrapper:R,modal:B,p:H,mt:Y,input_box:Q,input:V,button:X},Z=({isAddEmailModalOpen:s,setIsAddEmailModalOpen:p,getProfileDetails:a})=>{const[d,h]=r.useState(""),x=c=>{const{name:t,value:f}=c.target;h(f)},_=async c=>{if(c.preventDefault(),!d){u.error("Please enter email address");return}try{const{data:t}=await C.post("https://abhicares.com/api/shopping/update-email",{email:d},{withCredentials:!0});console.log(t),u.success("Email added successfully"),p(!1),a()}catch(t){console.log(t)}};return e.jsx("div",{className:`${n.modal_overlay} ${s?n.modal_open:n.modal_close}`,children:e.jsxs("div",{className:n.modal_wrapper,children:[e.jsx("button",{onClick:()=>p(!1),className:n.modal_close,children:e.jsx(E,{size:20})}),e.jsx("div",{className:n.modal,children:e.jsxs("form",{onSubmit:_,children:[e.jsx("p",{className:n.p,children:"Add Email"}),e.jsxs("div",{className:n.mt,children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("div",{className:n.input_box,children:e.jsx("input",{className:n.input,onChange:x,value:d,type:"email",name:"email",id:"email",placeholder:"Enter email"})})]}),e.jsx("button",{type:"submit",className:n.button,children:"Add"})]})})]})})},ce=()=>{const[s,p]=r.useState(""),[a,d]=r.useState([]),[h,x]=r.useState(!1),[_,c]=r.useState(!0),[t,f]=r.useState(""),j=async()=>{var l,b,g,v,N,y;try{c(!0);const o=await C.get("https://abhicares.com/api/shopping/user-info",{withCredentials:!0});console.log("profile details",o==null?void 0:o.data),(o==null?void 0:o.status)===200&&(p((b=(l=o==null?void 0:o.data)==null?void 0:l.userInfo)==null?void 0:b.user),d((v=(g=o==null?void 0:o.data)==null?void 0:g.userInfo)==null?void 0:v.userAddresses),f((y=(N=o==null?void 0:o.data)==null?void 0:N.userInfo)==null?void 0:y.userRefDoc))}catch(o){console.log(o)}finally{c(!1)}};r.useEffect(()=>{j()},[]);const w=()=>{navigator.clipboard.writeText(s.referralCode),u.success("Copied")};return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsxs("section",{className:i.my_profile,children:[e.jsx("h1",{children:"My Profile"}),e.jsxs("div",{className:i.profile_top,children:[s&&e.jsxs("div",{className:i.profile_info,children:[e.jsx("div",{className:i.img,children:e.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSTMi19cT0JI7Ghldmzz5fJkJy0HFeBicKKug&usqp=CAU",alt:"profile"})}),e.jsx("div",{className:i.profile_info_right,children:e.jsxs("div",{className:i.d_flex,children:[e.jsxs("div",{children:[e.jsx("h5",{children:s==null?void 0:s.name}),e.jsxs("div",{className:i.profileDetails,children:[(s==null?void 0:s.email)&&e.jsxs("p",{children:[e.jsx("b",{className:i.bold,children:"Email :"})," ",s==null?void 0:s.email]}),e.jsxs("p",{children:[e.jsx("b",{className:i.bold,children:"Phone :"})," ",s==null?void 0:s.phone]})]}),t&&e.jsxs("div",{className:i.referralDetails,children:[e.jsxs("p",{children:[e.jsx("b",{className:i.bold,children:"Referral Credits :"})," â‚¹",t==null?void 0:t.referralCredits]}),e.jsxs("p",{children:[e.jsx("b",{className:i.bold,children:"No of Users Applied Coupon :"})," ",t==null?void 0:t.noOfUsersAppliedCoupon]})]})]}),e.jsxs("div",{children:[!(s!=null&&s.email)&&e.jsx("button",{className:i.btn,onClick:()=>x(!0),children:"Add Email"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"10px"},children:[e.jsx("h6",{children:"Referral Code:"}),e.jsxs("div",{className:i.referral_code_wrapper,children:[e.jsx("p",{children:s==null?void 0:s.referralCode}),e.jsx(S,{onClick:w,cursor:"pointer"})]})]})]})]})})]}),!s&&_&&e.jsxs("div",{className:i.profile_info,children:[e.jsx(m,{circle:!0,width:60,height:60,count:1}),e.jsxs("div",{className:i.profile_info_right,children:[e.jsx(m,{width:140,height:20,count:1}),e.jsx(m,{width:"40%",height:20,count:1})]})]}),e.jsx("h4",{style:{marginTop:"20px"},children:"Adresses"}),e.jsxs("div",{className:i.address_container,children:[a.length===0&&_&&e.jsxs("div",{className:i.address,children:[e.jsx(m,{width:"90%",height:20,count:1}),e.jsx(m,{width:"90%",height:20,count:1})]}),a.length===0&&!_&&e.jsx("p",{children:"No address found"}),a==null?void 0:a.map(l=>e.jsxs("div",{className:i.address,children:[e.jsxs("div",{children:[e.jsx("b",{children:"Address Line:"})," ",l==null?void 0:l.addressLine]}),e.jsxs("div",{children:[e.jsx("b",{children:"Landmark:"})," ",l==null?void 0:l.landmark]}),e.jsxs("div",{children:[e.jsx("b",{children:"City:"})," ",l==null?void 0:l.city]}),e.jsxs("div",{children:[e.jsx("b",{children:"Pincode:"})," ",l==null?void 0:l.pincode]}),e.jsxs("div",{children:[e.jsx("b",{children:"Default Address:"})," ",l!=null&&l.defaultAddress?"Yes":"No"]})]},l==null?void 0:l._id))]})]})]})}),h&&e.jsx(Z,{isAddEmailModalOpen:h,setIsAddEmailModalOpen:x,getProfileDetails:j})]})};export{ce as default};
