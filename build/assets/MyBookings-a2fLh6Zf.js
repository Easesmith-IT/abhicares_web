import{r as d,j as s,e as j,h as k}from"./index-B-IXA8Ie.js";import{u as v,d as y}from"./index.esm-BbyRK8SJ.js";import{I as b}from"./InvoiceModal-zgyv9n98.js";import{f as N}from"./index--LFhlb37.js";import{L as $}from"./Loader-BC-JdY3x.js";import{W as C}from"./WebsiteWrapper-ANLKjAv_.js";import"./iconBase-3hUsnpgH.js";import"./useDispatch-C5OFXrAN.js";import"./index.esm-Cs3NBBGY.js";import"./jspdf-html2canvas.min-DgPDKMHS.js";import"./index-BzzzayLF.js";import"./rolling-white-BBE_8u84.js";import"./Button-BCsCTVJR.js";import"./index.esm-B8E9HluU.js";const I="_my_bookings_1y6ji_1",O="_img_1y6ji_15",M="_table_1y6ji_31",D="_bookings_container_1y6ji_73",x={my_bookings:I,img:O,table:M,bookings_container:D},w="_order_1ukpd_1",E="_order_top_1ukpd_19",L="_img_1ukpd_49",S="_info_1ukpd_63",A="_info_row_1ukpd_71",q="_order_bottom_1ukpd_93",B="_progress_1ukpd_107",V="_d_flex_1ukpd_147",W="_status_1ukpd_157",F="_Cancelled_1ukpd_169",Q="_Completed_1ukpd_177",z="_alloted_1ukpd_187",G="_pending_1ukpd_197",T="_OutOfDelivery_1ukpd_205",H="_p_1ukpd_107",c={order:w,order_top:E,img:L,info:S,info_row:A,order_bottom:q,progress:B,d_flex:V,status:W,Cancelled:F,Completed:Q,alloted:z,pending:G,OutOfDelivery:T,p:H},J="_modal_overlay_h3fvf_1",K="_modal_h3fvf_1",P="_heading_container_h3fvf_49",U="_button_h3fvf_61",X="_p_container_h3fvf_81",Y="_progress_h3fvf_89",Z="_d_flex_h3fvf_131",R="_product_contaner_h3fvf_141",ss="_product_h3fvf_141",ns="_img_h3fvf_173",os="_info_h3fvf_183",es="_p_h3fvf_81",a={modal_overlay:J,modal:K,heading_container:P,button:U,p_container:X,progress:Y,d_flex:Z,product_contaner:R,product:ss,img:ns,info:os,p:es},ts=({setIsInfoModalOpen:n,order:l})=>{var h;const{res:o,fetchData:e,isLoading:f}=v();console.log(l._id);const[r,t]=d.useState({}),[m,_]=d.useState(!1),p=async()=>{e(`/shopping/get-product-invoice/${l._id}`)};return d.useEffect(()=>{p()},[]),d.useEffect(()=>{((o==null?void 0:o.status)===200||(o==null?void 0:o.status)===201)&&t(o==null?void 0:o.data.data)},[o]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:a.modal_overlay,children:s.jsxs("div",{className:a.modal,children:[s.jsxs("div",{className:a.heading_container,children:[s.jsx("h2",{children:"Booking Info"}),s.jsx(y,{onClick:()=>n(!1),size:22,cursor:"pointer"})]}),s.jsxs("div",{className:a.heading_container,children:[s.jsx("h3",{children:"Order1"}),s.jsx("button",{onClick:()=>_(!0),className:a.button,children:"View Invoice"})]}),s.jsx("div",{className:a.p_container,children:s.jsx("p",{className:a.qty,children:"Qty: 1"})}),s.jsx("h3",{children:"Products"}),s.jsx("div",{className:a.product_contaner,children:(h=l==null?void 0:l.products)==null?void 0:h.map(i=>{var g,u;return s.jsxs("div",{className:a.product,children:[s.jsx("img",{className:a.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${i.product.imageUrl[0]}`,alt:""}),s.jsxs("div",{className:a.info,children:[s.jsx("h4",{children:(g=i==null?void 0:i.product)==null?void 0:g.name}),s.jsxs("p",{children:["Qty: ",i==null?void 0:i.quantity]}),s.jsxs("p",{children:["₹",(u=i==null?void 0:i.product)==null?void 0:u.offerPrice]})]})]},i._id)})}),s.jsx("h4",{children:"Track Order"}),s.jsxs("div",{children:[s.jsx("div",{className:a.progress}),s.jsxs("div",{className:a.d_flex,children:[s.jsx("p",{}),s.jsx("p",{children:"Out for delivary"}),s.jsx("p",{children:"Delivered"})]})]}),s.jsx("hr",{})]})}),m&&s.jsx(b,{setIsInvoiceModalOpen:_})]})},as=({order:n,index:l})=>{console.log("single order",n);const o=j(),[e,f]=d.useState(!1),r=()=>{o(`/my_bookings/${n._id}`,{state:n}),f(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{onClick:r,className:c.order,children:[s.jsxs("div",{className:c.order_top,children:[s.jsx("div",{children:n.items.map((t,m)=>{var _,p,h;return s.jsx("img",{className:c.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${(_=t==null?void 0:t.product)!=null&&_.imageUrl[0]?(p=t==null?void 0:t.product)==null?void 0:p.imageUrl[0]:(h=t==null?void 0:t.package)==null?void 0:h.imageUrl[0]}`,alt:""},m)})}),s.jsxs("div",{className:c.info,children:[s.jsxs("p",{style:{color:"grey"},children:["#",n.orderId]}),s.jsxs("div",{className:c.info_row,children:[s.jsxs("p",{children:["Date : ",N(new Date(n.createdAt),"dd-MM-yyyy")]}),s.jsxs("p",{children:["Order Value : ₹",n.orderValue]})]})]})]}),s.jsx("hr",{}),s.jsxs("div",{className:c.order_bottom,children:[s.jsx("p",{children:"Order Status :"}),s.jsx("div",{className:` ${c.status} ${n.status==="Cancelled"?c.Cancelled:n.status==="Completed"?c.Completed:n.status==="Pending"?c.pending:c.OutOfDelivery}`,children:n==null?void 0:n.status})]})]}),e&&s.jsx(ts,{setIsInfoModalOpen:f,order:n})]})},vs=()=>{const{res:n,fetchData:l,isLoading:o}=v(),[e,f]=d.useState([]);j();const r=k("userInfo"),t=r==null?void 0:r.id,m=async()=>{l(`/shopping/get-user-orders?userId=${t}`)};return d.useEffect(()=>{m()},[]),d.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&f(n==null?void 0:n.data.data)},[n]),s.jsx(C,{children:s.jsxs("section",{className:x.my_bookings,children:[s.jsx("h1",{children:"MyBookings"}),!o&&(e==null?void 0:e.length)===0&&s.jsx("p",{children:"No bookings found"}),o&&(e==null?void 0:e.length)===0&&s.jsx($,{}),s.jsx("div",{className:x.bookings_container,children:e==null?void 0:e.map((_,p)=>s.jsx(as,{index:p,order:_},_._id))})]})})};export{vs as default};
