import{r as i,j as e,L as o,f as c}from"./index-MFgKNwIH.js";import{c as s,A as N}from"./style.module-DI4n_xmn.js";import{C as k}from"./index-C6ydgH2-.js";/* empty css               */import{W as v}from"./WebsiteWrapper-B0GV9j-e.js";import"./index.esm-cL7qp0JE.js";import"./iconBase-CdfoCUfg.js";import"./useDispatch-CwGLudnh.js";import"./rolling-white-BBE_8u84.js";import"./index.esm-Cv4_ejct.js";import"./Button-DHv-FYu5.js";import"./index.esm-Br4GktT8.js";const S=()=>{const p={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:4},tablet:{breakpoint:{max:1024,min:768},items:3},mobile:{breakpoint:{max:520,min:0},items:2},largemobile:{breakpoint:{max:520,min:0},items:1}},[g,l]=i.useState([]);return i.useEffect(()=>{(async()=>{try{const j=(await c.get("https://blog.abhicares.com/wp-json/wp/v2/posts")).data.map(async n=>{if(n.featured_media){const b=await c.get(`https://blog.abhicares.com.com/wp-json/wp/v2/media/${n.featured_media}`);return{...n,featured_image:b.data}}return n}),f=await Promise.all(j);l(f)}catch(x){console.error("Error fetching data:",x)}})()},[]),e.jsx("div",{className:"wrapper",children:e.jsxs("div",{className:s["recent-blogs-wrapper"],children:[e.jsx("h1",{children:"Recent blogs"}),e.jsx(k,{swipeable:!0,draggable:!0,showDots:!1,responsive:p,ssr:!0,infinite:!0,autoPlaySpeed:1e3,keyBoardControl:!0,customTransition:"0.5s ease-in",transitionDuration:500,containerClass:"carousel-container",removeArrowOnDeviceType:["tablet","mobile"],itemClass:"carousel-item-padding-40-px",children:g.map(r=>e.jsxs("div",{className:s["recent-blogs-cards"],children:[e.jsx("div",{className:s["blog-swiper-thumbnail"],children:e.jsx(o,{to:`/single-blog/${r.id}`,children:e.jsx("img",{src:r.featured_image.source_url,alt:"image"})})}),e.jsxs("div",{className:s["blog-content"],children:[e.jsx("div",{className:s["authoring-date"],children:e.jsx("span",{children:new Date(r.date).toLocaleDateString()})}),e.jsx("div",{className:s["blog-name"],children:e.jsx("h5",{children:e.jsx(o,{to:`/single-blog/${r.id}`,children:r.title.rendered})})}),e.jsx("div",{className:s["read-more"],children:e.jsxs(o,{to:`/single-blog/${r.id}`,children:["Read more ",e.jsx(N,{})]})})]})]},r.id))})]})})},V=()=>{const[p,g]=i.useState(!0),[l,r]=i.useState({}),[x,j]=i.useState([]);i.useEffect(()=>{(async()=>{try{const a=await c.get("https://blog.abhicares.com/wp-json/wp/v2/categories");j(a.data);const u=a.data.map(async d=>{const m=await c.get(`https://blog.abhicares.com/wp-json/wp/v2/posts?categories=${d.id}`);console.log("res",m);const D=m.data.map(async h=>{if(h.featured_media){const $=await c.get(`https://blog.abhicares.com/wp-json/wp/v2/media/${h.featured_media}`);return{...h,featured_media_data:$.data}}return h}),_=await Promise.all(D);return{category:d,posts:_}}),y=await Promise.all(u),w={};y.forEach(({category:d,posts:m})=>{w[d.id]={name:d.name,posts:m}}),r(w)}catch(a){console.error("Error fetching data:",a)}finally{g(!1)}})()},[]);const[f,n]=i.useState({title:"",description:""}),b=async()=>{try{const{data:t}=await c.get("https://abhicares.com/api/content/get-seo-by-page-user-side?page=blogs"),{seoTitle:a,seoDescription:u}=t==null?void 0:t.seo;n({title:a,description:u})}catch(t){console.log(t)}};return i.useEffect(()=>{b()},[]),p?e.jsx(v,{children:e.jsx("div",{className:s["recent-blogs-wrapper-loading"],children:e.jsx("div",{className:s.loading,children:e.jsx("h1",{children:"....Loading"})})})}):e.jsx(v,{children:e.jsxs("div",{className:s.wrapper,children:[e.jsx(S,{}),e.jsx("div",{className:s["recent-blogs-wrapper"],children:e.jsx("div",{children:Object.keys(l).map(t=>e.jsxs("div",{children:[e.jsx("h1",{children:l[t].name}),e.jsxs("div",{className:s["category-wrapper"],children:[e.jsx("div",{className:s["blogs-container"],children:l[t].posts.slice(0,4).map(a=>e.jsxs("div",{className:s["blog-cards"],children:[e.jsx("div",{className:s["blog-thumbnail"],children:a.featured_media_data&&e.jsx(o,{to:`/single-blog/${a.id}`,children:e.jsx("img",{src:a.featured_media_data.source_url,alt:""})})}),e.jsxs("div",{className:s["blog-content"],children:[e.jsx("div",{className:s["authoring-date"],children:e.jsx("span",{children:new Date(a.date).toLocaleDateString()})}),e.jsx("div",{className:s["blog-name"],children:e.jsx("h5",{children:e.jsx(o,{to:`/single-blog/${a.id}`,children:a.title.rendered})})}),e.jsx("div",{className:s["read-more"],children:e.jsxs(o,{to:`/single-blog/${a.id}`,children:["Read more ",e.jsx(N,{})]})})]})]},a.id))}),e.jsx("div",{className:s["view-more-button"],children:e.jsx("button",{className:s.btn,children:e.jsx(o,{to:`/blog-category/${t}`,children:"View More"})})})]})]},t))})})]})})};export{V as default};
