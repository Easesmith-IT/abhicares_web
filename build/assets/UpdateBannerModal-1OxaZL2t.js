import{r as o,F as C,_ as S,j as t,e as m}from"./index-DpM_z6IC.js";import{R as N}from"./index.esm-BqNeVfbB.js";const k="_wrapper_d05c9_1",A="_modal_d05c9_27",D="_heading_container_d05c9_47",E="_select_d05c9_59",F="_form_d05c9_79",U="_input_container_d05c9_93",R="_input_d05c9_93",$="_d_flex_d05c9_119",B="_multi_select_d05c9_131",q="_button_wrapper_d05c9_171",z="_button_d05c9_171",H="_service_container_d05c9_203",L="_service_d05c9_203",s={wrapper:k,modal:A,heading_container:D,select:E,form:F,input_container:U,input:R,d_flex:$,multi_select:B,button_wrapper:q,button:z,service_container:H,service:L},J=({setIsModalOpen:l,getBannersFromServer:h,data:r})=>{const[a,g]=o.useState({serviceId:"",categoryId:""}),{res:c,fetchData:x,isLoading:O}=C(),[i,v]=o.useState([]),[d,f]=o.useState([]),[_,p]=o.useState(!1),u=e=>{const{name:n,value:w}=e.target;g({...a,[n]:w})},y=e=>{e.target.checked?p(!0):p(!1)},j=async()=>{try{const{data:e}=await m.get("https://abhicares.com/api/admin/get-all-category",{withCredentials:!0});console.log("categories",e.data),v(e.data)}catch(e){console.log(e)}};o.useEffect(()=>{j()},[]);const b=async()=>{try{const{data:e}=await m.get(`https://abhicares.com/api/admin/get-category-service/${a.categoryId}`,{withCredentials:!0});console.log("allCategoryServices",e.data),f(e.data)}catch(e){console.log(e)}};o.useEffect(()=>{b()},[a.categoryId]);const I=async e=>{e.preventDefault(),console.log("info",a);const n=new FormData;n.append("img",r.img),n.append("type",r.type),n.append("serviceId",a.serviceId),n.append("page",r.page),n.append("section",r.section),x("/content/upload-banners",n)};return o.useEffect(()=>{((c==null?void 0:c.status)===200||(c==null?void 0:c.status)===201)&&(console.log("Admin status response:",c),l(!1),h(),S.success("Updated successfully!"))},[c]),t.jsx("div",{className:s.wrapper,children:t.jsxs("div",{className:s.modal,children:[t.jsxs("div",{className:s.heading_container,children:[t.jsx("h4",{children:"Update Banner"}),t.jsx("div",{className:s.d_flex,children:t.jsx(N,{onClick:()=>l(!1),cursor:"pointer",size:26})})]}),t.jsxs("form",{onSubmit:I,className:s.form,children:[t.jsxs("div",{className:s.select,children:[t.jsx("input",{onChange:y,value:_,type:"checkbox",name:"checkbox",id:"checkbox"}),"Does not want to specify category and service."]}),!_&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:s.input_container,children:[t.jsx("label",{htmlFor:"categoryId",children:"Category"}),t.jsxs("select",{onChange:u,value:a.categoryId,className:s.input,name:"categoryId",id:"categoryId",children:[t.jsx("option",{value:"choose a category",children:"Select a category"}),i==null?void 0:i.map(e=>t.jsx("option",{value:e._id,children:e.name},e._id))]})]}),a.categoryId&&t.jsxs("div",{className:s.input_container,children:[t.jsx("label",{htmlFor:"serviceId",children:"Service"}),t.jsxs("select",{onChange:u,value:a.serviceId,className:s.input,name:"serviceId",id:"serviceId",children:[t.jsx("option",{value:"choose a service",children:"Select a service"}),d==null?void 0:d.map(e=>t.jsx("option",{value:e._id,children:e.name},e._id))]})]})]}),t.jsx("div",{className:s.button_wrapper,children:t.jsx("button",{type:"submit",className:s.button,children:"Update"})})]})]})})};export{J as U};
