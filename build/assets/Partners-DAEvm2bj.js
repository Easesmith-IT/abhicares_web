import{r as i,e as K,_ as k,j as t}from"./index-iVe9Vivd.js";import{F as pt,a as ut}from"./index.esm-IWUxmtms.js";import{u as A,a as mt}from"./index.esm-BWkUA85f.js";import{A as ht}from"./add-icon-nobg-CDiYK8IX.js";import{R as it}from"./index.esm-BE76ok0X.js";import{u as ct}from"./useAuthorization-CWsdsEM-.js";import{u as ot}from"./usePatchApiReq-DgT57iow.js";import{u as xt}from"./usePostApiReq-CXvXU-pP.js";import{D as jt}from"./DeleteModal-BKAyOPvS.js";import{L as dt}from"./Loader-BFdpHLnG.js";import{c,W as _t}from"./Wrapper-yQx_tRHn.js";import{u as gt}from"./useDeleteApiReq-D1sOSnjd.js";import"./iconBase-CW1Jb1pT.js";import"./logo -C1Nz5jdc.js";const vt="_wrapper_y3c11_1",Nt="_modal_y3c11_27",ft="_heading_container_y3c11_47",yt="_form_y3c11_59",bt="_input_container_y3c11_73",Ct="_input_y3c11_73",Et="_d_flex_y3c11_99",wt="_multi_select_y3c11_111",Lt="_button_wrapper_y3c11_143",Pt="_button_y3c11_143",It="_service_container_y3c11_175",Dt="_service_y3c11_175",e={wrapper:vt,modal:Nt,heading_container:ft,form:yt,input_container:bt,input:Ct,d_flex:Et,multi_select:wt,button_wrapper:Lt,button:Pt,service_container:It,service:Dt},nt=({setIsModalOpen:_,seller:a="",getAllSellers:j})=>{var W,l,m,S,q,Q,X,Y,Z,R,tt,at,et;const{res:p,fetchData:L,isLoading:y}=xt(),{res:o,fetchData:P,isLoading:v}=A(),{res:d,fetchData:F,isLoading:g}=A();ct(),console.log("seller",a);const[s,I]=i.useState({name:(a==null?void 0:a.name)||"",legalName:(a==null?void 0:a.legalName)||"",gstNumber:(a==null?void 0:a.gstNumber)||"",phone:(a==null?void 0:a.phone)||"",password:(a==null?void 0:a.password)||"",categoryId:((W=a==null?void 0:a.categoryId)==null?void 0:W._id)||"",services:((l=a==null?void 0:a.services)==null?void 0:l.map(n=>{var r,h;return{serviceId:(r=n==null?void 0:n.serviceId)==null?void 0:r._id,name:(h=n==null?void 0:n.serviceId)==null?void 0:h.name}}))||[],status:a==null?void 0:a.status}),[x,U]=i.useState({state:((m=a==null?void 0:a.address)==null?void 0:m.state)||"",city:((S=a==null?void 0:a.address)==null?void 0:S.city)||"",addressLine:((q=a==null?void 0:a.address)==null?void 0:q.addressLine)||"",pincode:((Q=a==null?void 0:a.address)==null?void 0:Q.pincode)||""}),[N,O]=i.useState({latitude:((Y=(X=a==null?void 0:a.address)==null?void 0:X.location)==null?void 0:Y.coordinates[0])||"",longitude:((R=(Z=a==null?void 0:a.address)==null?void 0:Z.location)==null?void 0:R.coordinates[1])||""}),[f,z]=i.useState({name:((tt=a==null?void 0:a.contactPerson)==null?void 0:tt.name)||"",phone:((at=a==null?void 0:a.contactPerson)==null?void 0:at.phone)||"",email:((et=a==null?void 0:a.contactPerson)==null?void 0:et.email)||""}),[b,$]=i.useState([]),[w,V]=i.useState([]);i.useState(!1);const D=(n,r)=>{const{value:h,checked:rt}=n.target;if(console.log("value: "+h),rt)I({...s,services:[...s.services,{serviceId:h,name:r}]});else{const st=s.services.filter(lt=>lt.serviceId!==h);console.log("filtered",st),I({...s,services:st})}},M=n=>{const{name:r,value:h}=n.target;z({...f,[r]:h})},T=n=>{const{name:r,value:h}=n.target;O({...N,[r]:h})},u=n=>{const{name:r,value:h}=n.target;I({...s,[r]:h}),U({...x,[r]:h})};K();const H=async()=>{P("/admin/get-all-category")};i.useEffect(()=>{H()},[]),i.useEffect(()=>{var n;((o==null?void 0:o.status)===200||(o==null?void 0:o.status)===201)&&$((n=o==null?void 0:o.data)==null?void 0:n.data)},[o]);const G=async()=>{F(`/admin/get-category-service/${s.categoryId}`)};i.useEffect(()=>{s.categoryId&&G()},[s.categoryId]),i.useEffect(()=>{var n;((d==null?void 0:d.status)===200||(d==null?void 0:d.status)===201)&&V((n=d==null?void 0:d.data)==null?void 0:n.data)},[d]),console.log("seller state",s),console.log("contactPerson state",f);const{res:C,fetchData:J}=ot(),B=async n=>{if(n.preventDefault(),!s.name||!s.legalName||!s.gstNumber||!s.phone||!s.password||!s.categoryId||s.services.length===0||!N.latitude||!N.longitude||!x.addressLine||!x.city||!x.pincode||!x.state||!f.name||!f.email||!f.phone){k.error("Please fill all the fields"),console.log("seller",s);return}const r={name:s.name,legalName:s.legalName,gstNumber:s.gstNumber,phone:s.phone,password:s.password,status:s.status,categoryId:s.categoryId,services:s.services,address:{state:x.state,city:x.city,pincode:x.pincode,addressLine:x.addressLine,location:{type:"Point",coordinates:[N.latitude,N.longitude]}},contactPerson:f};a?await J(`/admin/update-seller/${a._id}`,r):L("/admin/create-seller",r)};return i.useEffect(()=>{((p==null?void 0:p.status)===200||(p==null?void 0:p.status)===201)&&(k.success("Seller created successfully"),j(),_(!1))},[p]),i.useEffect(()=>{((C==null?void 0:C.status)===200||(C==null?void 0:C.status)===201)&&(k.success("Seller updated successfully"),j(),_(!1))},[C]),t.jsx("div",{className:e.wrapper,children:t.jsxs("div",{className:e.modal,children:[t.jsxs("div",{className:e.heading_container,children:[t.jsxs("h4",{children:[a?"Update":"Add"," Seller"]}),t.jsx("div",{className:e.d_flex,children:t.jsx(it,{onClick:()=>_(!1),cursor:"pointer",size:26})})]}),t.jsxs("form",{onSubmit:B,className:e.form,children:[t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"name",children:"Name"}),t.jsx("input",{className:e.input,onChange:u,value:s.name,type:"text",name:"name",id:"name"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"legalName",children:"Legal Name"}),t.jsx("input",{className:e.input,onChange:u,value:s.legalName,type:"text",name:"legalName",id:"legalName"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"gstNumber",children:"GST Number"}),t.jsx("input",{className:e.input,onChange:u,value:s.gstNumber,type:"text",name:"gstNumber",id:"gstNumber"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"phone",children:"Phone"}),t.jsx("input",{className:e.input,onChange:u,value:s.phone,type:"text",name:"phone",id:"phone"})]}),!a&&t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"password",children:"Password"}),t.jsx("input",{className:e.input,onChange:u,value:s.password,type:"password",name:"password",id:"password"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"state",children:"State"}),t.jsx("input",{className:e.input,onChange:u,value:x.state,type:"text",name:"state",id:"state"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"city",children:"City"}),t.jsx("input",{className:e.input,onChange:u,value:x.city,type:"text",name:"city",id:"city"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"addressLine",children:"Address Line"}),t.jsx("input",{className:e.input,onChange:u,value:x.addressLine,type:"text",name:"addressLine",id:"addressLine"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"pincode",children:"Pincode"}),t.jsx("input",{className:e.input,onChange:u,value:x.pincode,type:"text",name:"pincode",id:"pincode"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"contactPersonName",children:"Contact Person Name"}),t.jsx("input",{className:e.input,onChange:M,value:f.name,type:"text",name:"name",id:"name"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"contactPersonPhone",children:"Contact Person Phone"}),t.jsx("input",{className:e.input,onChange:M,value:f.phone,type:"text",name:"phone",id:"phone"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"contactPersonEmail",children:"Contact Person Email"}),t.jsx("input",{className:e.input,onChange:M,value:f.email,type:"email",name:"email",id:"email"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"status",children:"Status"}),t.jsxs("select",{onChange:u,value:s.status,className:e.input,name:"status",id:"status",children:[t.jsx("option",{value:"",children:"Select"}),t.jsx("option",{value:"IN-REVIEW",children:"In Review"}),t.jsx("option",{value:"APPROVED",children:"Approved"}),t.jsx("option",{value:"REJECTED",children:"Rejected"}),t.jsx("option",{value:"HOLD",children:"Hold"})]})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"categoryId",children:"Category"}),t.jsxs("select",{onChange:u,value:s.categoryId,className:e.input,name:"categoryId",id:"categoryId",children:[t.jsx("option",{value:"choose a category",children:"choose a category"}),b==null?void 0:b.map(n=>t.jsx("option",{value:n._id,children:n.name},n._id))]})]}),s.categoryId&&t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"servicesId",children:"Services"}),t.jsxs("div",{className:e.multi_select,children:[w==null?void 0:w.map(n=>t.jsxs("div",{className:e.d_flex,children:[t.jsx("label",{htmlFor:n.name,children:n.name}),t.jsx("input",{style:{width:"20px",height:"20px"},checked:s.services.some(r=>{var h;return(h=r==null?void 0:r.serviceId)!=null&&h._id?r.serviceId._id===n._id:r.serviceId===n._id}),onChange:r=>D(r,n.name),type:"checkbox",value:n._id,name:n.name,id:n.name})]},n._id)),w.length===0&&g&&t.jsx("p",{children:"Loading..."}),w.length===0&&!g&&t.jsx("p",{children:"No service found"})]})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"latitude",children:"Latitude"}),t.jsx("input",{className:e.input,onChange:T,value:N.latitude,type:"number",name:"latitude",id:"latitude"})]}),t.jsxs("div",{className:e.input_container,children:[t.jsx("label",{htmlFor:"longitude",children:"Longitude"}),t.jsx("input",{className:e.input,onChange:T,value:N.longitude,type:"number",name:"longitude",id:"longitude"})]}),t.jsx("div",{className:e.button_wrapper,children:t.jsx("button",{type:"submit",className:e.button,children:y?"Loading...":a?"Update":"Add"})})]})]})})},St="_wrapper_1c96m_1",At="_modal_1c96m_27",Ft="_heading_container_1c96m_51",Ot="_contianer_1c96m_63",$t="_mt_1c96m_89",Mt="_button_1c96m_97",kt="_item1_1c96m_125",E={wrapper:St,modal:At,heading_container:Ft,contianer:Ot,mt:$t,button:Mt,"report-body":"_report-body_1c96m_113","report-topic-heading":"_report-topic-heading_1c96m_123",item1:kt},Ut=({setIsUnapprovedSellerModalOpen:_,getSellers:a})=>{const{res:j,fetchData:p,isLoading:L}=A(),[y,o]=i.useState([]);K(),ct();const P=async()=>{p("/admin/in-review-seller")};i.useEffect(()=>{((j==null?void 0:j.status)===200||(j==null?void 0:j.status)===201)&&o(j==null?void 0:j.data.data)},[j]);const{res:v,fetchData:d}=ot(),F=async g=>{await d(`/admin/update-seller-status/${g}`,{status:"APPROVED"})};return i.useEffect(()=>{P()},[]),i.useEffect(()=>{((v==null?void 0:v.status)===200||(v==null?void 0:v.status)===201)&&(console.log("unapprovedSellerRes",v),k.success("Seller approved"),P(),a())},[v]),t.jsx("div",{className:E.wrapper,children:t.jsxs("div",{className:E.modal,children:[t.jsxs("div",{className:E.heading_container,children:[t.jsx("h4",{children:"Unapproved Seller"}),t.jsx("div",{className:E.d_flex,children:t.jsx(it,{onClick:()=>_(!1),cursor:"pointer",size:26})})]}),t.jsxs("div",{className:E["report-body"],children:[t.jsxs("div",{className:E["report-topic-heading"],children:[t.jsx("h3",{className:c["t-op"],style:{width:"150px"},children:"Seller Name"}),t.jsx("h3",{className:c["t-op"],style:{width:"200px"},children:"Service"}),t.jsx("h3",{className:c["t-op"],style:{width:"150px"},children:"Category"}),t.jsx("h3",{className:c["t-op"],style:{width:"150px"},children:"Phone"}),t.jsx("h3",{className:c["t-op"],style:{width:"150px"},children:"Approve"})]}),t.jsxs("div",{className:c.items,children:[!L&&y.length===0&&t.jsx("p",{children:"No unapproved seller found."}),L&&y.length===0&&t.jsx(dt,{}),y==null?void 0:y.map(g=>t.jsxs("div",{className:E.item1,children:[t.jsx("h3",{className:c["t-op-nextlvl"],style:{width:"150px"},children:g.name}),t.jsx("h3",{className:`${c["t-op-nextlvl"]}`,style:{width:"200px"},children:g.services.map(s=>s.name).join(", ")}),t.jsx("h3",{className:`${c["t-op-nextlvl"]}`,style:{width:"150px"},children:g.category}),t.jsx("h3",{className:`${c["t-op-nextlvl"]}`,style:{width:"150px"},children:g.phone}),t.jsx("h3",{className:`${c["t-op-nextlvl"]}`,style:{width:"150px"},children:g.status==="IN-REVIEW"?t.jsx("button",{onClick:()=>F(g._id),className:E.button,children:"Approve"}):t.jsx("p",{children:"Approved"})})]},g._id))]})]})]})})},Rt=()=>{const{res:_,fetchData:a,isLoading:j}=gt(),{res:p,fetchData:L,isLoading:y}=A(),{res:o,fetchData:P,isLoading:v}=A(),{res:d,fetchData:F,isLoading:g}=A(),[s,I]=i.useState(!1),[x,U]=i.useState(!1),[N,O]=i.useState(!1);i.useState(!1);const[f,z]=i.useState({}),[b,$]=i.useState([]),[w,V]=i.useState(!1),[D,M]=i.useState(""),T=K(),u=async()=>{L("/admin/get-all-seller")};i.useEffect(()=>{u()},[]),i.useEffect(()=>{((p==null?void 0:p.status)===200||(p==null?void 0:p.status)===201)&&$(p==null?void 0:p.data.data)},[p]);const H=async()=>{P(`/admin/filter-seller?status=${D}`)};i.useEffect(()=>{D&&H()},[D]),i.useEffect(()=>{((o==null?void 0:o.status)===200||(o==null?void 0:o.status)===201)&&$(o==null?void 0:o.data.data)},[o]);const G=(l,m)=>{l.stopPropagation(),z(m),U(!N)},C=(l,m)=>{l.stopPropagation(),z(m),O(!N)},J=async()=>{a(`/admin/delete-seller/${f}`)};i.useEffect(()=>{((_==null?void 0:_.status)===200||(_==null?void 0:_.status)===201)&&(k.success("Seller deleted successfully"),u(),O(!N))},[_]);const B=async l=>{const m=l.target.value;if(console.log("value",m),!m){u();return}F(`/admin/search-seller?search=${m}`)};i.useEffect(()=>{((d==null?void 0:d.status)===200||(d==null?void 0:d.status)===201)&&$(d==null?void 0:d.data.data)},[d]);function W(l,m){let S=null;return function(q){S&&clearTimeout(S),S=setTimeout(()=>{l(q)},m)}}return t.jsxs(t.Fragment,{children:[t.jsx(_t,{children:t.jsxs("div",{className:c["report-container"],children:[t.jsxs("div",{className:c["report-header"],children:[t.jsx("h1",{className:c["recent-Articles"],children:"Partners"}),t.jsx("input",{onChange:W(B,1e3),className:c.input,type:"text",placeholder:"Search professionals"}),t.jsxs("select",{name:"status",value:D,onChange:l=>M(l.target.value),className:c.input,children:[t.jsx("option",{value:"",children:"Select Status"}),t.jsx("option",{value:"IN-REVIEW",children:"In Review"}),t.jsx("option",{value:"APPROVED",children:"Approved"}),t.jsx("option",{value:"REJECTED",children:"Rejected"}),t.jsx("option",{value:"HOLD",children:"Hold"})]}),t.jsx("button",{onClick:()=>V(!0),className:c.button,children:"Unapproved Seller"}),t.jsx("button",{onClick:()=>I(!0),className:c.services_add_btn,children:t.jsx("img",{src:ht,alt:"add seller"})})]}),t.jsxs("div",{className:c["report-body"],children:[t.jsxs("div",{className:c.sellers,children:[t.jsx("h3",{className:c["t-op"],children:"Seller Name"}),t.jsx("h3",{className:c["t-op"],children:"Category"}),t.jsx("h3",{className:c["t-op"],children:"Phone"}),t.jsxs("h3",{className:c["t-op"],children:["Update/",t.jsx("br",{}),"Delete/Seller Order"]})]}),t.jsxs("div",{className:c.items,children:[!y&&!v&&b.length===0&&t.jsx("p",{children:"No sellers found"}),(y||v)&&b.length===0&&t.jsx(dt,{}),b==null?void 0:b.map(l=>t.jsxs("div",{className:c.sellers,children:[t.jsx("h3",{className:c["t-op-nextlvl"],children:l.name}),t.jsx("h3",{className:`${c["t-op-nextlvl"]}`,children:l.categoryId.name}),t.jsx("h3",{className:`${c["t-op-nextlvl"]}`,children:l.phone}),t.jsxs("h3",{className:`${c["t-op-nextlvl"]}`,children:[t.jsx(pt,{onClick:m=>G(m,l),cursor:"pointer",size:20}),t.jsx(mt,{onClick:m=>C(m,l._id),cursor:"pointer",size:22,color:"red"}),t.jsx(ut,{onClick:()=>T(`/admin/partners/${l._id}`,{state:l}),cursor:"pointer",size:20})]})]},l._id))]})]})]})}),s&&t.jsx(nt,{setIsModalOpen:I,getAllSellers:u}),x&&t.jsx(nt,{setIsModalOpen:U,getAllSellers:u,seller:f}),N&&t.jsx(jt,{setState:O,handleDelete:J}),w&&t.jsx(Ut,{setIsUnapprovedSellerModalOpen:V,allSellers:b,getSellers:u})]})};export{Rt as default};
