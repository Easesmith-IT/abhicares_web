import{r as o,_ as $,j as e}from"./index-Dv256yl2.js";import{W as b,c as s}from"./Wrapper-DVa65dbI.js";import{D as A}from"./DeleteModal-OF4eYV9C.js";import{L as M}from"./Loader-CSOVF8pK.js";import{u,h as C,a as T}from"./index.esm-B1Gcm8L9.js";import{u as _}from"./useDeleteApiReq-De1uI8xE.js";import"./logo -C1Nz5jdc.js";import"./iconBase-8sBCukzP.js";const H=()=>{const{res:c,fetchData:f,isLoading:k}=_(),{res:a,fetchData:j,isLoading:x}=u(),{res:l,fetchData:N,isLoading:q}=u(),[r,d]=o.useState(!1),[i,m]=o.useState([]),[v,y]=o.useState(""),g=(t,n)=>{t.stopPropagation(),y(n),d(!r)},D=async()=>{f(`/admin/delete-enquiry/${v}`)};o.useEffect(()=>{((c==null?void 0:c.status)===200||(c==null?void 0:c.status)===201)&&($.success("Enquiry deleted successfully"),p(),d(!r))},[c]);const p=async()=>{j("/admin/get-all-enquiry")};o.useEffect(()=>{p()},[]),o.useEffect(()=>{((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&m(a==null?void 0:a.data.data)},[a]);const E=async t=>{const n=t.target.value;if(console.log("value",n),!n){p();return}N(`/admin/search-enquiries?query=${n}`)};o.useEffect(()=>{((l==null?void 0:l.status)===200||(l==null?void 0:l.status)===201)&&m(l==null?void 0:l.data.data)},[l]);function L(t,n){let h=null;return function(S){h&&clearTimeout(h),h=setTimeout(()=>{t(S)},n)}}return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsxs("div",{className:s["report-container"],children:[e.jsxs("div",{className:s["report-header"],children:[e.jsx("h1",{className:s["recent-Articles"],children:"Enquiries"}),e.jsx("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:e.jsxs("div",{className:"d-flex",style:{position:"relative"},children:[e.jsx(C,{onClick:()=>{},style:{position:"absolute",left:"8px",top:"10px",cursor:"pointer"}}),e.jsx("input",{onChange:L(E,1e3),style:{width:"400px",padding:"5px 10px",paddingLeft:"30px",borderRadius:"5px"},type:"search",placeholder:"search enquiry by name, phone and city"})]})})]}),e.jsxs("div",{className:s["report-body"],children:[e.jsxs("div",{className:s.enquiries,children:[e.jsx("h3",{className:s["t-op"],children:"Name"}),e.jsx("h3",{className:s["t-op"],children:"Phone"}),e.jsx("h3",{className:s["t-op"],children:"City"}),e.jsx("h3",{className:s["t-op"],children:"State"}),e.jsx("h3",{className:s["t-op"],children:"Service Type"}),e.jsx("h3",{className:s["t-op"],children:"Delete"})]}),e.jsxs("div",{className:s.items,children:[!x&&i.length===0&&e.jsx("p",{children:"No inquiries found"}),x&&i.length===0&&e.jsx(M,{}),i==null?void 0:i.map(t=>e.jsxs("div",{className:s.enquiries,children:[e.jsx("h3",{className:s["t-op-nextlvl"],children:t.name}),e.jsx("h3",{className:s["t-op-nextlvl"],children:t.phone}),e.jsx("h3",{className:`${s["t-op-nextlvl"]}`,children:t.city}),e.jsx("h3",{className:`${s["t-op-nextlvl"]}`,children:t.state}),e.jsx("h3",{className:`${s["t-op-nextlvl"]}`,children:t.serviceType}),e.jsx("h3",{className:`${s["t-op-nextlvl"]}`,children:e.jsx(T,{onClick:n=>g(n,t._id),cursor:"pointer",size:22,color:"red"})})]},t._id))]})]})]})}),r&&e.jsx(A,{setState:d,handleDelete:D})]})};export{H as default};
