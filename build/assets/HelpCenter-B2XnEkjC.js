import{r as c,j as e,e as H,_ as k}from"./index-iVe9Vivd.js";import{c as h}from"./Modal.module-xeZ_p1n2.js";import{u as S,A as $}from"./index.esm-BWkUA85f.js";import{b as D}from"./index.esm-CeT0r-lM.js";import{W as L}from"./WebsiteWrapper-DKnIxjBs.js";import{L as M}from"./Loader-BFdpHLnG.js";import{T as g}from"./TimeLine-CtU0Nolh.js";import{u as T}from"./usePostApiReq-CXvXU-pP.js";import{f as P}from"./index-h5yRQfKO.js";import"./iconBase-CW1Jb1pT.js";import"./rolling-white-BBE_8u84.js";import"./index.esm-Ck0M7SmQ.js";import"./Button-D7Y-_WuR.js";const W="_help_center_ri9v2_1",V="_help_center_title_ri9v2_19",B="_box_ri9v2_27",z="_input_box_ri9v2_63",G="_input_ri9v2_63",J="_d_flex_ri9v2_105",K="_multi_select_ri9v2_117",Q="_label_ri9v2_163",X="_button_wrapper_ri9v2_179",Y="_button_ri9v2_179",Z="_h3_ri9v2_221",R="_issues_container_ri9v2_229",U="_issue_ri9v2_229",ee="_issues_ri9v2_229",se="_in_review_ri9v2_275",te="_solved_ri9v2_287",ie="_raised_ri9v2_301",ae="_modal_overlay_ri9v2_323",le="_modal_open_ri9v2_343",ne="_modal_close_ri9v2_355",oe="_modal_wrapper_ri9v2_363",re="_modal_ri9v2_323",ce="_sm_ri9v2_425",s={help_center:W,help_center_title:V,box:B,input_box:z,input:G,d_flex:J,multi_select:K,label:Q,button_wrapper:X,button:Y,h3:Z,issues_container:R,issue:U,issues:ee,in_review:se,solved:te,raised:ie,modal_overlay:ae,modal_open:le,modal_close:ne,modal_wrapper:oe,modal:re,sm:ce},de=({faq:i,index:t})=>{const[a,l]=c.useState(!1),m=()=>{l(!a)};return e.jsxs("li",{onClick:m,className:`${h.faq_li_none} ${h.faq_li} ${t!==0&&h.faq_li_border_top}`,children:[e.jsxs("h6",{className:h.faq_li_h6,children:[i.ques,"?"]}),e.jsx("p",{className:`${a?`${h.faq_li_p} ${h.faq_li_p_open}`:h.faq_li_p}`,children:i.ans})]})},me=()=>{const[i,t]=c.useState([]),{res:a,fetchData:l,isLoading:m}=S(),u=async()=>{l("/shopping/get-all-faq")};return c.useEffect(()=>{u()},[]),c.useEffect(()=>{((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&(console.log("faqs",a),t(a==null?void 0:a.data.data))},[a]),e.jsx("div",{className:h.faq,children:e.jsxs("ul",{className:h.faq_ul,children:[i==null?void 0:i.map((p,_)=>e.jsx(de,{faq:p,index:_},_)),i.length===0&&m&&e.jsx("span",{children:"Loading..."}),i.length===0&&!m&&e.jsx("span",{children:"No Faqs Found"})]})})},he=({ticketHistory:i})=>{var a,l,m,u,p,_,f,x,n;const t=v=>i==null?void 0:i.find(r=>(r==null?void 0:r.status)===v);return e.jsxs("div",{style:{marginTop:"20px",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{style:{position:"relative",paddingBottom:"40px"},children:[e.jsx(g,{title:"Raised",time:t("raised")?(a=t("raised"))==null?void 0:a.date:"",status:((l=t("raised"))==null?void 0:l.status)||"",className:t("raised")?"bg-green":"bg-gray",desc:((m=t("raised"))==null?void 0:m.resolution)||""}),e.jsx("div",{className:"vertical-line"})]}),e.jsxs("div",{style:{position:"relative",paddingBottom:"40px"},children:[e.jsx(g,{title:"In Progress",time:t("in-review")?(u=t("in-review"))==null?void 0:u.date:"",status:((p=t("in-review"))==null?void 0:p.status)||"",className:t("in-review")?"bg-green":"bg-gray",desc:((_=t("in-review"))==null?void 0:_.resolution)||""}),e.jsx("div",{className:"vertical-line"})]}),e.jsx(g,{title:"Completed",time:t("completed")?(f=t("completed"))==null?void 0:f.date:"",status:((x=t("completed"))==null?void 0:x.status)||"",className:t("completed")?"bg-green":"bg-gray",desc:((n=t("completed"))==null?void 0:n.resolution)||""})]})},ke=()=>{const{res:i,fetchData:t,isLoading:a}=T(),{res:l,fetchData:m,isLoading:u}=S(),[p,_]=c.useState(!1),[f,x]=c.useState(!1),[n,v]=c.useState({description:"",issue:"Select issue",others:""}),[r,q]=c.useState([]),[j,I]=c.useState({}),[N,w]=c.useState(!1);H();const F=o=>{I(o),w(!0)},y=o=>{const{name:b,value:E}=o.target;v({...n,[b]:E})},d=o=>{const{innerText:b}=o.target;b!=="Select issue"&&v({...n,issue:b}),_(!p),x(!1)},O=()=>{n.others&&(v({...n,issue:""}),_(!1),x(!1))},A=async o=>{if(o.preventDefault(),!n.description||n.issue&&!n.issue||n.others&&!n.others){k.error("Please fill all fields");return}t("/shopping/create-help",{...n})};c.useEffect(()=>{((i==null?void 0:i.status)===200||(i==null?void 0:i.status)===201)&&(k.success("Issue submited successfully"),v({description:"",issue:"Select issue",others:""}),C())},[i]);const C=async()=>{m("/shopping/get-user-help")};return c.useEffect(()=>{C()},[]),c.useEffect(()=>{((l==null?void 0:l.status)===200||(l==null?void 0:l.status)===201)&&q(l==null?void 0:l.data.data)},[l]),e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsxs("section",{className:s.help_center,children:[e.jsx("h2",{className:s.help_center_title,children:"Help Center"}),e.jsx("div",{className:s.box,children:e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:s.input_box,children:[e.jsxs("div",{onClick:d,className:`${s.input} ${s.d_flex}`,children:[e.jsx("span",{children:n.issue||n.others}),e.jsx(D,{})]}),p&&e.jsxs("div",{className:s.multi_select,children:[e.jsx("label",{className:s.label,onClick:d,htmlFor:"Having an issue with changing my number",children:"Having an issue with changing my number"}),e.jsx("label",{className:s.label,onClick:d,htmlFor:"Having an issue with changing my Address",children:"Having an issue with changing my Address"}),e.jsx("label",{className:s.label,onClick:d,htmlFor:"Having an issue with changing my E-mail",children:"Having an issue with changing my E-mail"}),e.jsx("label",{className:s.label,onClick:d,htmlFor:"I am unable to make Payment",children:"I am unable to make Payment"}),e.jsx("label",{className:s.label,onClick:d,htmlFor:"Can I get my service delivered faster?",children:"Can I get my service delivered faster?"}),e.jsx("label",{className:s.label,onClick:d,htmlFor:"How can I get my refund back?",children:"How can I get my refund back?"}),e.jsx("label",{className:s.label,onClick:d,htmlFor:"Having an issue with product Cancellation",children:"Having an issue with product Cancellation"}),e.jsx("label",{className:s.label,onClick:d,htmlFor:"How many days will it take for the refund to arrive?",children:"How many days will it take for the refund to arrive?"}),e.jsx("label",{className:s.label,onClick:d,htmlFor:"How can we edit my profile?",children:"How can we edit my profile?"}),e.jsx("label",{onClick:()=>x(!0),htmlFor:"",children:"other"}),f&&e.jsxs("div",{children:[e.jsx("div",{className:s.input_box,children:e.jsx("input",{onChange:y,value:n.others,className:s.input,type:"text",name:"others",id:"others",placeholder:"Enter your issue"})}),e.jsx("div",{className:s.button_wrapper,children:e.jsx("button",{type:"button",onClick:O,className:s.button,children:"Ok"})})]})]})]}),e.jsx("div",{className:s.input_box,children:e.jsx("input",{onChange:y,value:n.description,className:s.input,type:"text",name:"description",id:"description",placeholder:"Enter description"})}),e.jsx("div",{className:s.button_wrapper,children:e.jsx("button",{className:s.button,children:a?"Submitting...":"Submit"})})]})}),e.jsx("div",{children:e.jsx("h3",{className:s.h3,children:"Frequently asked questions"})}),e.jsx(me,{}),e.jsx("h3",{className:s.h3,children:"All issues"}),!u&&(r==null?void 0:r.length)===0&&e.jsx("p",{children:"No issues found"}),u&&(r==null?void 0:r.length)===0&&e.jsx(M,{}),r.length>0&&e.jsxs("div",{className:s.issues_container,children:[e.jsxs("div",{className:s.issue,children:[e.jsx("p",{children:"Ticket Id"}),e.jsx("p",{children:"Date"}),e.jsx("p",{children:"Status"}),e.jsx("p",{children:"View"})]}),r==null?void 0:r.map(o=>e.jsxs("div",{className:s.issues,children:[e.jsx("b",{className:"ticketId",style:{whiteSpace:"nowrap"},children:o==null?void 0:o.ticketId}),e.jsx("p",{children:P(new Date(o.createdAt),"dd-MM-yyyy")}),e.jsx("div",{children:e.jsx("span",{className:o.status==="in-review"?s.in_review:o.status==="raised"?s.raised:s.solved,children:o.status})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>F(o),className:s.button,children:"View"})})]},o._id))]})]})}),N&&e.jsx("div",{className:`${s.modal_overlay} ${N?s.modal_open:s.modal_close}`,children:e.jsxs("div",{className:s.modal_wrapper,children:[e.jsx("button",{onClick:()=>w(!1),className:s.modal_close,children:e.jsx($,{size:20})}),e.jsxs("div",{className:s.modal,children:[e.jsx("h4",{style:{fontWeight:"600"},children:"Ticket details"}),e.jsx("b",{children:j.issue}),e.jsx("p",{children:j.description}),e.jsx(he,{ticketHistory:j==null?void 0:j.ticketHistory})]})]})})]})};export{ke as default};
