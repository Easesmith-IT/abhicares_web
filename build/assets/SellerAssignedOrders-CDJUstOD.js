import{j as s,r as c,_ as us,u as ms}from"./index-MFQKCb7o.js";import{W as xs,c as h}from"./Wrapper-EuhUHBtD.js";import{c as u,s as e,R as ps,C as js,W as fs}from"./index.esm-CoFruA-Q.js";import{L as X}from"./Loader-CooIHcb6.js";import{R as Y}from"./index.esm-CqPrJGFm.js";import"./index-Bd6kNE1D.js";import{f as gs}from"./index-D5Lf-kgZ.js";import{u as E}from"./usePostApiReq-D4ZpDEWt.js";import{u as S}from"./index.esm-Df65-zPW.js";/* empty css                   */import"./logo -C1Nz5jdc.js";import"./useDispatch-DbBSbkF0.js";import"./iconBase-BO1x0Pa9.js";import"./useAuthorization-Y1Z3uJ_s.js";import"./usePatchApiReq-C7rNSsLh.js";const Ns="_wrapper_62yar_1",vs="_modal_62yar_27",bs="_heading_container_62yar_47",_s="_contianer_62yar_59",ys="_mt_62yar_85",Is="_item_62yar_93",Cs="_img_62yar_119",N={wrapper:Ns,modal:vs,heading_container:bs,contianer:_s,mt:ys,item:Is,img:Cs},As=({setSellerOrderInfoModal:l,sellerOrder:n})=>{var d,v,g,t,b,f,i;if(console.log("seller-order",n),!n)return null;const m=!!n.package;return s.jsx("div",{className:N.wrapper,children:s.jsxs("div",{className:N.modal,children:[s.jsxs("div",{className:N.heading_container,children:[s.jsx("h4",{children:"Seller Order Info"}),s.jsx("div",{className:N.d_flex,children:s.jsx(Y,{onClick:()=>l(!1),cursor:"pointer",size:26})})]}),s.jsxs("div",{className:N.contianer,children:[s.jsxs("p",{children:[s.jsx("b",{children:"Order Id:"})," ",n==null?void 0:n.orderId]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Date:"})," ",gs(new Date(n.bookingDate),"dd-MM-yyyy")]}),s.jsxs("p",{children:[s.jsx("b",{children:"Booking Time:"})," ",n==null?void 0:n.bookingTime]}),s.jsxs("p",{children:[s.jsx("b",{children:"Order Total:"})," ₹",n==null?void 0:n.orderValue]}),s.jsxs("p",{children:[s.jsx("b",{children:"Status: "}),n==null?void 0:n.status]})]}),s.jsx("h5",{children:m?"Package":"Product"}),s.jsxs("div",{className:N.item,children:[s.jsxs("div",{children:[s.jsx("img",{className:N.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${m?(d=n==null?void 0:n.package)==null?void 0:d.imageUrl[0]:(v=n==null?void 0:n.product)==null?void 0:v.imageUrl[0]}`,alt:"product"}),s.jsxs("div",{children:[s.jsx("h6",{children:m?"Package":"Product"}),s.jsx("p",{children:n.package?"Package":"Product"})]})]}),s.jsxs("p",{children:["Qty: ",n.quantity]}),s.jsxs("p",{children:["₹",m?n.package.offerPrice:n.product.offerPrice]})]}),s.jsxs("div",{style:{marginTop:"10px"},children:[s.jsx("h5",{children:"User Info"}),s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",(g=n==null?void 0:n.userId)==null?void 0:g.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone:"})," ",(t=n==null?void 0:n.userId)==null?void 0:t.phone]}),s.jsx("p",{children:s.jsx("b",{children:"Address Line:"})}),s.jsx("p",{children:(b=n==null?void 0:n.userAddress)==null?void 0:b.addressLine}),s.jsxs("p",{children:[s.jsx("b",{children:"Landmark:"})," ",(f=n==null?void 0:n.userAddress)==null?void 0:f.landmark]}),s.jsxs("p",{children:[s.jsx("b",{children:"Pincode:"})," ",(i=n==null?void 0:n.userAddress)==null?void 0:i.pincode]})]})]})})},Ps=({setIsUpdateModalOpen:l,getCashOutRequests:n,walletId:m})=>{console.log("walletId",m);const[d,v]=c.useState({amount:"",description:"",paymentId:""}),g=y=>{const{name:A,value:r}=y.target;v({...d,[A]:r})},{res:t,fetchData:b,isLoading:f}=E(),i=async y=>{if(y.preventDefault(),!d.amount){us.error("Amount is required");return}b("/admin/add-seller-cashout",{sellerWalletId:m,value:d.amount,payId:d.paymentId,description:d.description})};return c.useEffect(()=>{((t==null?void 0:t.status)===200||(t==null?void 0:t.status)===201)&&(l(!1),n(m))},[t]),s.jsx("div",{className:u.wrapper,children:s.jsxs("div",{className:u.modal,children:[s.jsxs("div",{className:u.heading_container,children:[s.jsx("h4",{children:"Add CashOut Request"}),s.jsx("div",{className:u.d_flex,children:s.jsx(Y,{onClick:()=>l(!1),cursor:"pointer",size:26})})]}),s.jsxs("form",{onSubmit:i,className:u.form,children:[s.jsxs("div",{className:u.input_container,children:[s.jsx("label",{htmlFor:"amount",children:"Amount"}),s.jsx("input",{className:u.input,onChange:g,value:d.amount,type:"number",name:"amount",id:"amount"})]}),s.jsxs("div",{className:u.input_container,children:[s.jsx("label",{htmlFor:"description",children:"Description"}),s.jsx("textarea",{className:u.input,onChange:g,value:d.description,name:"description",id:"description"})]}),s.jsxs("div",{className:u.input_container,children:[s.jsx("label",{htmlFor:"paymentId",children:"Payment Id"}),s.jsx("input",{className:u.input,onChange:g,value:d.paymentId,type:"text",name:"paymentId",id:"paymentId"})]}),s.jsx("div",{className:u.button_wrapper,children:s.jsx("button",{disabled:f,className:u.button,children:f?"Adding...":"Add"})})]})]})})},Us=()=>{var B,F,z,H,U,G,J,Q,K;const{res:l,fetchData:n,isLoading:m}=E(),{res:d,fetchData:v,isLoading:g}=E(),{res:t,fetchData:b,isLoading:f}=S(),{res:i,fetchData:y,isLoading:A}=S(),{res:r,fetchData:Z,isLoading:D}=S(),{res:x,fetchData:R,isLoading:Ss}=S(),[a,O]=c.useState(""),[P,L]=c.useState([]),[ss,as]=c.useState(""),[I,$]=c.useState(""),[ns,es]=c.useState({}),[ts,w]=c.useState(!1),[is,M]=c.useState(!1),[cs,q]=c.useState(!1),[p,os]=c.useState(""),[C,ds]=c.useState([]),j=ms();console.log("state",a),console.log("partnerstatus",I),c.useEffect(()=>{$(a==null?void 0:a.status)},[a]);const V=async()=>{b(`/admin/get-seller-order-list/${j.partnerId}`)};c.useEffect(()=>{((t==null?void 0:t.status)===200||(t==null?void 0:t.status)===201)&&(console.log("getSellerOrdersListRes",t),L(t==null?void 0:t.data.sellerOrders))},[t]);const k=async()=>{y(`/admin/get-seller-wallet/${j==null?void 0:j.partnerId}`)};c.useEffect(()=>{((i==null?void 0:i.status)===200||(i==null?void 0:i.status)===201)&&(console.log("getWalletRes",i),i!=null&&i.data.wallet._id&&(W(i==null?void 0:i.data.wallet._id),os(i==null?void 0:i.data.wallet)))},[i]);const W=async o=>{Z(`/admin/get-seller-wallet-recent-cashout-requests/${o}`)};c.useEffect(()=>{V(),k()},[]),c.useEffect(()=>{((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&(console.log("getRequestsRes",r),ds(r==null?void 0:r.data.cashouts))},[r]);const ls=async o=>{const _=o.target.value;if(as(_),_===""){V();return}n(`/admin/get-seller-order-by-status/${j.partnerId}`,{status:_})};c.useEffect(()=>{((l==null?void 0:l.status)===200||(l==null?void 0:l.status)===201)&&L(l==null?void 0:l.data.sellerOrders)},[l]);const hs=o=>{es(o),w(!0)},T=async()=>{R(`/admin/get-seller?sellerId=${j==null?void 0:j.partnerId}`)};c.useEffect(()=>{T()},[]),c.useEffect(()=>{((x==null?void 0:x.status)===200||(x==null?void 0:x.status)===201)&&O(x==null?void 0:x.data.data)},[x]);const rs=async o=>{v("/admin/update-partner-status",{sellerId:j.partnerId,status:I})};return c.useEffect(()=>{I&&rs()},[I]),c.useEffect(()=>{((d==null?void 0:d.status)===200||(d==null?void 0:d.status)===201)&&T()},[d]),s.jsxs(s.Fragment,{children:[s.jsx(xs,{children:s.jsxs("div",{children:[s.jsx("h2",{className:e.h2,children:"Seller Info"}),s.jsx("div",{children:s.jsxs("div",{className:e.contianer,children:[s.jsxs("p",{children:[s.jsx("b",{children:"Name:"})," ",a==null?void 0:a.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Gst Number:"})," ",a==null?void 0:a.gstNumber]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone"}),": ",a==null?void 0:a.phone]}),s.jsxs("p",{children:[s.jsx("b",{children:"Legal Name:"})," ",a==null?void 0:a.legalName]}),s.jsxs("p",{children:[s.jsx("b",{children:"Status:"})," ",s.jsx("span",{className:`${h.status} ${a.status==="APPROVED"?e.active:e.inactive}`,children:a.status}),s.jsxs("select",{onChange:o=>$(o.target.value),value:I,className:e.select,name:"partnerstatus",id:"partnerstatus",children:[s.jsx("option",{value:"IN-REVIEW",children:"In Review"}),s.jsx("option",{value:"APPROVED",children:"Approved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"}),s.jsx("option",{value:"HOLD",children:"Hold"})]})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Address:"})," ",`${(B=a==null?void 0:a.address)==null?void 0:B.addressLine}, ${(F=a==null?void 0:a.address)==null?void 0:F.city}, ${(z=a==null?void 0:a.address)==null?void 0:z.state}, ${(H=a==null?void 0:a.address)==null?void 0:H.pincode}`]}),s.jsxs("p",{className:h.mt,children:[s.jsx("b",{children:"Contact Person Email:"})," ",s.jsx("span",{style:{textDecoration:"underline"},children:(U=a==null?void 0:a.contactPerson)==null?void 0:U.email})]}),s.jsxs("p",{children:[s.jsx("b",{children:"Contact Person Name:"})," ",(G=a==null?void 0:a.contactPerson)==null?void 0:G.name]}),s.jsxs("p",{children:[s.jsx("b",{children:"Contact Person Phone:"})," ",(J=a==null?void 0:a.contactPerson)==null?void 0:J.phone]}),s.jsxs("p",{children:[s.jsx("b",{children:"Category"}),": ",(Q=a==null?void 0:a.categoryId)==null?void 0:Q.name]}),s.jsxs("p",{className:e.service_container,children:[s.jsx("b",{children:"Services"}),": ",(K=a==null?void 0:a.services)==null?void 0:K.map(o=>{var _;return s.jsx("span",{className:e.status,children:(_=o==null?void 0:o.serviceId)==null?void 0:_.name})})]})]})}),s.jsxs("div",{className:e.flex,style:{marginBottom:"30px"},children:[s.jsxs("div",{className:e.reportContainer,children:[s.jsxs("div",{className:h["report-header"],children:[s.jsx("h1",{className:h["recent-Articles"],children:"Seller Assigned Orders"}),s.jsxs("select",{onChange:ls,value:ss,className:h.select,name:"status",id:"status",children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"alloted",children:"Alloted"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:e["report-body"],children:[s.jsxs("div",{className:e["report-topic-heading"],children:[s.jsx("h3",{className:h["t-op"],style:{width:"210px"},children:"Order Id"}),s.jsx("h3",{className:h["t-op"],style:{width:"110px"},children:"Order Value"}),s.jsx("h3",{className:h["t-op"],children:"Status"}),s.jsx("h3",{className:h["t-op"],children:"Details"})]}),(f||m)&&s.jsx(X,{}),s.jsxs("div",{className:h.items,children:[!f&&!m&&P.length===0&&s.jsx("p",{children:"No seller order found"}),P==null?void 0:P.map(o=>s.jsxs("div",{className:e.item1,children:[s.jsx("h3",{className:h["t-op-nextlvl"],children:o.orderId}),s.jsx("h3",{className:h["t-op-nextlvl"],style:{width:"110px",textAlign:"center"},children:o.orderValue}),s.jsx("h3",{className:`${h["t-op-nextlvl"]} ${e.status}`,children:o.status}),s.jsx("button",{onClick:()=>hs(o),className:h.button,style:{color:"#2599ff"},children:"View Details"})]},o._id))]})]})]}),s.jsxs("div",{className:e.reportContainer,children:[s.jsxs("div",{className:e.d_flex,children:[s.jsxs("div",{className:e.left,children:[s.jsxs("h3",{className:e.h3,children:[s.jsx(ps,{size:50})," Wallet"]}),s.jsxs("div",{className:e.d_flex,children:[s.jsx("h4",{children:"Balance"}),s.jsxs("p",{style:{marginLeft:"10px"},children:["₹",(p==null?void 0:p.balance)||0]})]})]}),s.jsx("div",{className:e.right,children:s.jsxs("div",{children:[s.jsx("button",{onClick:()=>M(!0),className:e.button,children:"View Wallet History"}),s.jsx("button",{onClick:()=>q(!0),className:e.button,style:{color:"black"},children:"Add Cashout"})]})})]}),s.jsx("button",{className:e.cash_btn,children:"Cashout Request"}),s.jsxs("div",{className:e.tran_contianer,children:[(A||D)&&C.length===0&&s.jsx(X,{}),!A&&!D&&C.length===0&&s.jsx("p",{children:"No cashOut Requests found"}),C==null?void 0:C.map(o=>s.jsx(js,{item:o,getSellerWallet:k},o._id))]})]})]})]})}),ts&&s.jsx(As,{setSellerOrderInfoModal:w,sellerOrder:ns}),is&&s.jsx(fs,{setIsViewWalletModalOpen:M,getSellerWallet:k,id:p==null?void 0:p._id}),cs&&s.jsx(Ps,{getCashOutRequests:W,setIsUpdateModalOpen:q,walletId:p==null?void 0:p._id})]})};export{Us as default};
