import{r,h as W,j as s,f as R,_ as D,i as T,k as C,l as U,m as z,n as H,e as ss,o as es,p as ts}from"./index-DcmPn4CU.js";import{l as V,L as F}from"./Loader-UGYhpWDA.js";import{l as q}from"./rolling-white-BBE_8u84.js";import{H as is,a as ns}from"./index.esm-BNtQXFoA.js";import{B as Y,a as J,b as cs,C as as}from"./CartItem-DSBnjGYr.js";import{c as t}from"./Modal.module-xeZ_p1n2.js";import{M as os,a as rs,A as ls}from"./LogoutModal-Di1XuGXS.js";import{I as _s,a as ds}from"./index.esm-COsu3BVV.js";import{G as ms}from"./iconBase-BJ2zDtiE.js";import{C as ps}from"./index-C_j_rsmk.js";/* empty css               */import{p as K}from"./index-CyNR1zuL.js";import{A as Q}from"./AddReviewModal-DOFTHaLl.js";import{D as hs}from"./DeleteModal-CD9SUXxA.js";import{f as fs}from"./index-C8LMNyAy.js";import{S as xs}from"./index-Cozy86Df.js";/* empty css                 */import{R as X}from"./react-stars-Du4hjxfx.js";import{W as us}from"./WebsiteWrapper-CBbZpn7g.js";import"./index.esm-7S8pM4Fp.js";import"./Button-D4N1S2yu.js";const gs="_product_page_pl7mf_1",js="_container_pl7mf_9",vs="_heading_pl7mf_21",bs="_booking_pl7mf_31",Ns="_star_container_pl7mf_43",ws="_booking_span_pl7mf_63",ys="_wrapper_pl7mf_71",ks="_services_border_pl7mf_83",Is="_select_service_p_pl7mf_103",Cs="_select_service_p_div_pl7mf_121",Ss="_services_container_pl7mf_133",$s="_service_pl7mf_83",Rs="_service_img_pl7mf_163",As="_service_p_pl7mf_175",Ms="_selected_service_pl7mf_187",Ls="_selected_service_h2_pl7mf_209",Os="_sub_services_container_pl7mf_221",Bs="_sub_service_pl7mf_221",zs="_badge_pl7mf_245",Fs="_badge_span_pl7mf_267",Es="_info_container_pl7mf_279",Ts="_info_container_left_pl7mf_297",Us="_dashed_underline_pl7mf_305",Vs="_sub_service_h4_pl7mf_317",qs="_sub_service_star_container_pl7mf_325",Gs="_sub_service_booking_span_pl7mf_337",Ws="_price_time_container_pl7mf_345",Hs="_price_pl7mf_345",Ys="_dot_time_container_pl7mf_369",Js="_dot_pl7mf_369",Ks="_time_pl7mf_395",Qs="_d_flex_pl7mf_403",Xs="_button_pl7mf_417",Zs="_addToCartBtn_pl7mf_441",Ps="_list_container_pl7mf_457",Ds="_list_pl7mf_457",se="_list_first_span_pl7mf_483",ee="_list_second_span_pl7mf_491",te="_package_button_pl7mf_499",ie="_product_pl7mf_1",ne="_product_info_pl7mf_559",ce="_img_pl7mf_573",ae="_price_cotainer_pl7mf_591",oe="_right_section_pl7mf_627",re="_cart_detail_box_pl7mf_647",le="_view_cart_button_pl7mf_661",_e="_right_section_common_button_pl7mf_679",de="_sm_cart_pl7mf_693",me="_offer_container_pl7mf_701",pe="_offer_pl7mf_701",he="_offer_left_div_pl7mf_727",fe="_offer_img_outer_div_pl7mf_747",xe="_offer_left_div_p_pl7mf_767",ue="_offer_left_div_first_p_pl7mf_777",ge="_sm_cart_span_pl7mf_895",je="_max_lg_hidden_pl7mf_933",ve="_min_lg_hidden_pl7mf_979",n={product_page:gs,container:js,heading:vs,booking:bs,star_container:Ns,booking_span:ws,wrapper:ys,services_border:ks,select_service_p:Is,select_service_p_div:Cs,services_container:Ss,service:$s,service_img:Rs,service_p:As,selected_service:Ms,selected_service_h2:Ls,sub_services_container:Os,sub_service:Bs,badge:zs,badge_span:Fs,info_container:Es,info_container_left:Ts,dashed_underline:Us,sub_service_h4:Vs,sub_service_star_container:qs,sub_service_booking_span:Gs,price_time_container:Ws,price:Hs,dot_time_container:Ys,dot:Js,time:Ks,d_flex:Qs,button:Xs,addToCartBtn:Zs,list_container:Ps,list:Ds,list_first_span:se,list_second_span:ee,package_button:te,product:ie,product_info:ne,img:ce,price_cotainer:ae,right_section:oe,cart_detail_box:re,view_cart_button:le,right_section_common_button:_e,sm_cart:de,offer_container:me,offer:pe,offer_left_div:he,offer_img_outer_div:fe,offer_left_div_p:xe,offer_left_div_first_p:ue,sm_cart_span:ge,max_lg_hidden:je,min_lg_hidden:ve};function E(e){return ms({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"}}]})(e)}const be=({review:e,isUser:I=!1,getAllReviews:i})=>{var f,a;const[x,_]=r.useState(!1),[j,p]=r.useState(!1),l=W("userInfo"),S=l==null?void 0:l.name,u=l==null?void 0:l.id;console.log("review",e);const y=async()=>{try{const N=await R.delete(`https://abhicares.com/api/shopping/delete-product-review/${e._id}`,{withCredentials:!0});D.success("Review deleted successfully"),console.log("review res",N.data),p(!1),i()}catch(N){console.log(N)}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:t.customer_review,children:[s.jsxs("div",{className:t.customer_review_left,children:[s.jsxs("div",{className:t.customer_info,children:[s.jsx("img",{className:t.customer_img,src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTa6YvRump6DC1zR3Bu5fz9358Gcgviuu5nag&usqp=CAU",alt:"customer"}),s.jsxs("div",{className:t.customer_info_right,children:[s.jsx("p",{className:t.customer_name,children:(f=e==null?void 0:e.userId)!=null&&f.name?e.userId.name:S}),s.jsx("p",{className:t.review_date,children:fs(new Date(e.createdAt),"MMMM yyyy")})]})]}),s.jsx("h5",{className:t.h5,children:e.title}),s.jsx("p",{className:t.customer_review_p,children:e.content})]}),s.jsxs("div",{className:t.customer_review_right,children:[s.jsxs("div",{className:t.rating_staricon_num_container,children:[s.jsx(E,{color:"black",size:10}),s.jsx("span",{className:t.rating_star_num,children:e.rating})]}),u===((a=e==null?void 0:e.userId)==null?void 0:a._id)&&s.jsxs("div",{className:t.d_flex,children:[s.jsx(os,{onClick:()=>_(!0),cursor:"pointer",color:"black",size:15}),s.jsx(rs,{onClick:()=>p(!0),cursor:"pointer",color:"black",size:15})]})]})]}),x&&s.jsx(Q,{isReviewModalOpen:x,setIsReviewModalOpen:_,id:e._id,review:e,getAllReviewsOfUser:i}),j&&s.jsx(hs,{handleDelete:y,setState:p})]})},L=({ratingValue:e,ratingStar:I,maxRating:i=500})=>{const x=Math.min(e/i*100,100);return s.jsxs("div",{className:t.specific_star_rating_div,children:[s.jsxs("div",{className:t.rating_staricon_num_container,children:[s.jsx(E,{color:"black",size:10}),s.jsx("span",{className:t.rating_star_num,children:I})]}),s.jsx("div",{className:t["singlerating-bar-container"],children:s.jsx("div",{className:t["singlerating-bar"],style:{width:`${x||0}%`}})}),s.jsx("div",{className:t.specific_star_rating_total,children:e})]})},Z=({product:e,setIsCartLoading:I,flag:i=!0,features:x})=>{var k;const[_,j]=r.useState(!1),[p,l]=r.useState({}),[S,u]=r.useState(!1),[y,f]=r.useState(!0),a=T(),N=async()=>{j(!_)};r.useEffect(()=>{(async()=>await a(C()))()},[]);const v=U(d=>d.cart);r.useEffect(()=>{var m;const d=(m=v==null?void 0:v.items)==null?void 0:m.find(w=>{var $;return(($=w==null?void 0:w.productId)==null?void 0:$._id)===e._id});l(d)},[C,v]);const b=async d=>{d.stopPropagation(),u(!0),i&&I(!0),await a(z({id:e._id,type:"product"})),await a(C()),u(!1),i&&I(!1)},g=async d=>{var m;d.stopPropagation(),u(!0),await a(z({id:(m=p==null?void 0:p.productId)==null?void 0:m._id,type:"product"})),await a(C()),u(!1)},h=async d=>{d.stopPropagation(),u(!0),await a(H({itemId:p.productId._id,type:"product"})),await a(C()),u(!1)};return s.jsxs(s.Fragment,{children:[y&&s.jsx(xs,{height:260}),s.jsxs("div",{className:n.product,onClick:N,children:[s.jsx("img",{style:{display:y?"none":"block"},onLoad:()=>f(!1),className:n.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${e==null?void 0:e.imageUrl[0]}`,alt:"product"}),s.jsxs("div",{className:n.product_info,children:[s.jsx("h5",{children:e==null?void 0:e.name}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx(X,{edit:!1,size:30,count:5,value:e==null?void 0:e.rating,color2:"#FF8A00"}),s.jsx("p",{children:e.rating}),"(",e==null?void 0:e.totalReviews,")"]}),s.jsx("p",{children:K(e.description)}),s.jsxs("div",{className:n.d_flex,children:[s.jsxs("div",{className:n.price_cotainer,children:[s.jsxs("p",{className:n.price,children:["₹",e.price]}),s.jsxs("p",{className:n.price,children:["₹",e.offerPrice]})]}),(k=v==null?void 0:v.items)!=null&&k.find(d=>{var m;return((m=d==null?void 0:d.productId)==null?void 0:m._id)===(e==null?void 0:e._id)})?s.jsxs("button",{className:n.button,children:[s.jsx(Y,{size:20,onClick:h}),s.jsx("span",{className:n.quantity,children:p==null?void 0:p.quantity}),s.jsx(J,{size:20,onClick:g})]}):s.jsx("button",{onClick:b,className:`${n.addToCartBtn}`,children:S?s.jsx("div",{className:V.img_container,children:s.jsx("img",{src:q,alt:"loader"})}):"Add"})]})]})]}),_&&s.jsx(P,{isProduct:!0,isOpen:_,handleOnclick:N,Data:e,features:x})]})},P=({isOpen:e,handleOnclick:I,Data:i,isProduct:x,features:_=[]})=>{var B;const[j,p]=r.useState([]),[l,S]=r.useState([]);r.useState([]);const[u,y]=r.useState(!0),[f,a]=r.useState(!0),[N,v]=r.useState(!1),[b,g]=r.useState(!1),h=W("userInfo"),k=h==null?void 0:h.id,{rating:d,ratingDistribution:m,totalReviews:w}=i||{};console.log("modal open",i),r.useEffect(()=>{const c=l.find(M=>{var G;return k===((G=M==null?void 0:M.userId)==null?void 0:G._id)});console.log("review obj",c),g(!c)},[l]);const $={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:1},desktop:{breakpoint:{max:3e3,min:1024},items:1},tablet:{breakpoint:{max:1024,min:550},items:1},mobile:{breakpoint:{max:550,min:0},items:1}},O=({next:c,previous:M})=>s.jsxs(s.Fragment,{children:[s.jsx("button",{className:`${t.carousel_button} ${t.carousel_button_left}`,onClick:()=>M(),children:s.jsx(_s,{size:35})}),s.jsx("button",{className:`${t.carousel_button} ${t.carousel_button_right}`,onClick:()=>c(),children:s.jsx(ds,{size:35})})]}),o=async()=>{try{const{data:c}=await R.get(`https://abhicares.com/api/shopping/get-package-product/${i._id}`);console.log("package products",c),p(c==null?void 0:c.data)}catch(c){console.log(c)}finally{a(!1)}},A=async()=>{try{const{data:c}=await R.get(`https://abhicares.com/api/shopping/get-product-review/${i._id}?type=${x?"product":"package"}`);console.log("get reviews",c),S(c.reviews)}catch(c){console.log(c)}finally{y(!1)}};return r.useEffect(()=>{!x&&o(),A()},[]),s.jsx("div",{className:`${t.modal_overlay} ${e?t.modal_open:t.modal_close}`,children:s.jsxs("div",{className:t.modal_wrapper,children:[s.jsx("button",{onClick:I,className:t.modal_close,children:s.jsx(ls,{size:20})}),s.jsx("div",{className:t.modal_wrapper_overflow,children:s.jsxs("div",{className:t.modal,children:[i.imageUrl&&s.jsx(ps,{responsive:$,arrows:!1,showDots:!0,className:t.carousel,customButtonGroup:s.jsx(O,{}),children:(B=i==null?void 0:i.imageUrl)==null?void 0:B.map(c=>s.jsx("img",{className:t.carousel_img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${c}`,alt:"product"},c))}),s.jsxs("div",{className:t.modal_body,children:[s.jsxs("div",{className:t.border_bottom,children:[s.jsxs("div",{className:t.modal_header,children:[s.jsxs("div",{className:t.modal_header_left,children:[s.jsx("h3",{className:t.modal_header_left_h4,children:i.name}),s.jsxs("div",{className:t.rating,children:[s.jsx(E,{color:"gray",size:11}),s.jsxs("span",{className:t.rating_span,children:[i==null?void 0:i.rating," (",i==null?void 0:i.totalReviews,")"]})]}),s.jsx("div",{className:t.price_time_container,children:s.jsxs("div",{className:t.price_cotainer,children:[s.jsxs("span",{className:t.price,children:["₹",i.price]}),s.jsxs("span",{className:t.price,children:["₹",i.offerPrice]})]})})]}),s.jsx("div",{className:t.modal_header_right})]}),(i==null?void 0:i.description)&&s.jsx("p",{children:K(i==null?void 0:i.description)})]}),!x&&s.jsxs("div",{className:t.products_cotainer,children:[s.jsx("h4",{children:"Products"}),j==null?void 0:j.map(c=>s.jsx(Z,{product:c,flag:!1,features:_},c._id))]}),!x&&!f&&j.length===0&&s.jsx("p",{children:"No product found"}),!x&&f&&j.length===0&&s.jsx(F,{}),s.jsxs("div",{className:t.customer_reviews_section,children:[s.jsx("h4",{children:"Customer reviews"}),s.jsxs("div",{className:t.d_flex,children:[s.jsxs("div",{className:t.rating,children:[s.jsx(E,{color:"black",size:15}),s.jsx("span",{className:t.rating_span,children:d})]}),b&&s.jsx("button",{onClick:()=>v(!0),className:t.button,children:"Add Review"})]}),s.jsxs("p",{className:t.reviews,children:[w," reviews"]}),s.jsxs("div",{className:t.rating_stars_container,children:[s.jsx(L,{ratingStar:5,ratingValue:m[5],maxRating:w}),s.jsx(L,{ratingStar:4,ratingValue:m[4],maxRating:w}),s.jsx(L,{ratingStar:3,ratingValue:m[3],maxRating:w}),s.jsx(L,{ratingStar:2,ratingValue:m[2],maxRating:w}),s.jsx(L,{ratingStar:1,ratingValue:m[1],maxRating:w})]}),s.jsxs("div",{className:t.customer_reviews_container,children:[!u&&l.length===0&&s.jsx("p",{children:"No reviews found"}),u&&l.length===0&&s.jsx(F,{}),l==null?void 0:l.map(c=>s.jsx(be,{review:c,getAllReviews:A},c._id))]}),s.jsxs("div",{className:t.features_container,children:[s.jsx("h4",{children:"We Offer"}),(_==null?void 0:_.length)===0&&s.jsx("p",{children:"No features found"}),_==null?void 0:_.map(c=>s.jsxs("div",{className:t.feature,children:[s.jsx("div",{className:t.feature_img,children:s.jsx("img",{src:`https://storage.googleapis.com/abhicares-backend-bucket/${c==null?void 0:c.image}`,alt:"feature"})}),s.jsxs("div",{className:t.feature_content,children:[s.jsx("h5",{children:c==null?void 0:c.title}),s.jsx("p",{children:c==null?void 0:c.description})]})]}))]})]}),N&&s.jsx(Q,{isReviewModalOpen:N,setIsReviewModalOpen:v,id:i._id,getAllReviewsOfUser:A})]})]})})]})})},Ne=({singlePackage:e,serviceId:I,setIsCartLoading:i,features:x})=>{var g;const _=T(),[j,p]=r.useState(!1),[l,S]=r.useState({}),[u,y]=r.useState(!1);r.useEffect(()=>{(async()=>await _(C()))()},[]);const f=U(h=>h.cart);r.useEffect(()=>{var k;const h=(k=f==null?void 0:f.items)==null?void 0:k.find(d=>{var m;return((m=d==null?void 0:d.packageId)==null?void 0:m._id)===e._id});S(h)},[C,f]);const a=async()=>{p(!j)};console.log("singlepackage",e);const N=async()=>{y(!0),i(!0),await _(z({id:e._id,type:"package"})),await _(C()),y(!1),i(!1)},v=async()=>{var h;await _(z({id:(h=l==null?void 0:l.packageId)==null?void 0:h._id,type:"package"})),await _(C())},b=async()=>{await _(H({itemId:l.packageId._id,type:"package"})),await _(C())};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:n.sub_service,children:[s.jsxs("button",{className:n.badge,style:{marginBottom:"20px"},children:[s.jsx(cs,{color:"#12ACAC"}),s.jsx("span",{className:n.badge_span,children:"Packages"})]}),s.jsxs("div",{className:n.info_container,children:[s.jsxs("div",{className:n.info_container_left,children:[s.jsx("h5",{className:n.sub_service_h4,children:e.name}),s.jsx("div",{className:n.booking}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx(X,{edit:!1,size:30,count:5,value:e==null?void 0:e.rating,color2:"#FF8A00"}),e.rating,"(",e==null?void 0:e.totalReviews,")"]}),s.jsx("p",{className:n.price_time_container,children:s.jsxs("div",{className:n.price_cotainer,children:[s.jsxs("span",{className:n.price,children:["₹",e.price]}),s.jsxs("span",{className:n.price,children:["₹",e.offerPrice]})]})})]}),s.jsx("div",{children:(g=f==null?void 0:f.items)!=null&&g.find(h=>{var k;return((k=h==null?void 0:h.packageId)==null?void 0:k._id)===(e==null?void 0:e._id)})?s.jsxs("button",{className:n.button,children:[s.jsx(Y,{size:20,onClick:b}),s.jsx("span",{className:n.quantity,children:l==null?void 0:l.quantity}),s.jsx(J,{size:20,onClick:v})]}):s.jsx("button",{onClick:N,className:`${n.addToCartBtn}`,children:u?s.jsx("div",{className:V.img_container,children:s.jsx("img",{src:q,alt:"loader"})}):"Add"})})]}),s.jsx("button",{onClick:a,className:n.package_button,children:"View details"})]}),j&&s.jsx(P,{isProduct:!1,isOpen:j,handleOnclick:a,Data:e,serviceId:I,features:x})]})},We=()=>{var m,w,$,O;const[e,I]=r.useState([]),[i,x]=r.useState([]),[_,j]=r.useState(!0),[p,l]=r.useState(!0),[S,u]=r.useState(!1),[y,f]=r.useState({title:"",description:""}),a=U(o=>o.cart),N=T(),v=ss(),{state:b}=es(),g=ts(),h=async()=>{try{const{data:o}=await R.get(`https://abhicares.com/api/content/get-seo/${g.serviceId}`),{seoTitle:A,seoDescription:B}=o==null?void 0:o.seo;f({title:A,description:B})}catch(o){console.log(o)}},k=async()=>{try{const{data:o}=await R.get(`https://abhicares.com/api/shopping/get-all-product/${g.serviceId}`);console.log("services",o),I(o.data)}catch(o){console.log(o)}finally{j(!1)}},d=async()=>{try{const{data:o}=await R.get(`https://abhicares.com/api/shopping/get-service-package/${g==null?void 0:g.serviceId}`);console.log("package",o),x(o.data)}catch(o){console.log(o)}finally{l(!1)}};return r.useEffect(()=>{k(),d(),h(),(async()=>await N(C()))()},[]),s.jsx(is,{children:s.jsxs(us,{children:[s.jsxs(ns,{children:[s.jsx("title",{children:y.title}),s.jsx("meta",{name:"description",content:y.description})]}),s.jsx("section",{className:n.product_page,children:s.jsxs("div",{className:n.container,children:[s.jsx("h1",{className:n.heading,children:b==null?void 0:b.name}),s.jsx("div",{className:n.booking}),s.jsxs("div",{className:n.wrapper,children:[s.jsxs("div",{className:n.selected_service,children:[s.jsxs("div",{children:[s.jsx("h2",{className:n.selected_service_h2,children:"Bestseller Packages"}),s.jsxs("div",{className:n.sub_services_container,children:[!p&&(i==null?void 0:i.length)===0&&s.jsx("p",{children:"No packages found"}),p&&(i==null?void 0:i.length)===0&&s.jsx(F,{}),i==null?void 0:i.map(o=>s.jsx(Ne,{singlePackage:o,serviceId:g==null?void 0:g.serviceId,setIsCartLoading:u,features:b==null?void 0:b.features},o==null?void 0:o._id))]})]}),s.jsxs("div",{className:n.products_cotainer,children:[s.jsx("h2",{children:"Services"}),!_&&(e==null?void 0:e.length)===0&&s.jsx("p",{children:"No products found"}),_&&(e==null?void 0:e.length)===0&&s.jsx(F,{}),e==null?void 0:e.map(o=>s.jsx(Z,{product:o,setIsCartLoading:u,features:b==null?void 0:b.features}))]})]}),((m=a==null?void 0:a.items)==null?void 0:m.length)!==0&&s.jsxs("div",{className:n.sm_cart,children:[s.jsxs("span",{className:n.sm_cart_span,children:["₹",a.totalPrice]}),s.jsx("button",{onClick:()=>v("/checkout"),className:`${n.button} ${n.view_cart_button}`,children:"View Cart"})]}),s.jsx("div",{className:`${n.right_section} ${n.max_lg_hidden}`,children:s.jsxs("div",{className:n.cart_detail_box,children:[((w=a==null?void 0:a.items)==null?void 0:w.length)!==0&&s.jsxs("button",{onClick:()=>v("/checkout"),className:`${n.button} ${n.view_cart_button}`,children:[s.jsxs("span",{children:["₹",a.totalPrice]}),s.jsx("span",{children:S?s.jsxs("div",{className:V.img_container,children:[s.jsx("img",{src:q,alt:"loader"}),"Loading"]}):"View Cart"})]}),($=a==null?void 0:a.items)==null?void 0:$.map(o=>s.jsx(as,{item:o},o._id)),((O=a==null?void 0:a.items)==null?void 0:O.length)===0&&s.jsx("p",{children:"No items in your cart"})]})})]})]})})]})})};export{We as default};
