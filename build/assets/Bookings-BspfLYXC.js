import{r as o,e as C,j as t}from"./index-iVe9Vivd.js";import{W as A,c as s}from"./Wrapper-yQx_tRHn.js";import{u as p,h as E}from"./index.esm-BWkUA85f.js";import{L as I}from"./Loader-BFdpHLnG.js";import{f as S}from"./index-h5yRQfKO.js";import"./logo -C1Nz5jdc.js";import"./iconBase-CW1Jb1pT.js";const W=()=>{const{res:a,fetchData:j,isLoading:u}=p(),{res:l,fetchData:v,isLoading:h}=p(),{res:n,fetchData:g,isLoading:k}=p(),[c,d]=o.useState([]),[i,N]=o.useState({date:"",status:""});console.log("filters",i);const x=e=>{const{name:r,value:D}=e.target;N({...i,[r]:D})},y=C(),m=o.useRef(),f=async()=>{j("/admin/get-booking-list")};o.useEffect(()=>{f()},[]),o.useEffect(()=>{((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&d(a==null?void 0:a.data.data)},[a]);const b=async()=>{v(`/admin/search-filter-bookings?status=${i.status}&bookingDate=${i.date}`)};o.useEffect(()=>{((l==null?void 0:l.status)===200||(l==null?void 0:l.status)===201)&&d(l==null?void 0:l.data.data)},[l]),o.useEffect(()=>{(i.date||i.status)&&b()},[i.date,i.status]);const $=async()=>{const e=m.current.value;if(!e){f();return}g(`/admin/get-booking-by-id?bookingId=${e}`)};return o.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&d(n==null?void 0:n.data.data)},[n]),t.jsx(t.Fragment,{children:t.jsx(A,{children:t.jsxs("div",{className:s["report-container"],children:[t.jsxs("div",{className:s["report-header"],children:[t.jsx("h1",{className:s["recent-Articles"],children:"Bookings"}),t.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[t.jsxs("div",{className:"d-flex",style:{position:"relative"},children:[t.jsx("input",{ref:m,style:{width:"300px",padding:"5px 10px",borderRadius:"5px"},type:"text",placeholder:"search booking by id"}),t.jsx(E,{onClick:$,style:{position:"absolute",right:"8px",top:"10px",cursor:"pointer"}})]}),t.jsx("input",{type:"date",name:"date",value:i.date,onChange:x,className:s.filter_input}),t.jsxs("select",{name:"status",value:i.status,onChange:x,className:s.filter_input,children:[t.jsx("option",{value:"",children:"Select Status"}),t.jsx("option",{value:"cancelled",children:"Cancelled"}),t.jsx("option",{value:"alloted",children:"Alloted"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"not-alloted",children:"Not Alloted"})]})]})]}),t.jsxs("div",{className:s["report-body"],children:[t.jsxs("div",{className:s["report-topic-heading"],children:[t.jsx("h3",{className:s["t-op"],style:{width:"200px"},children:"Booking Id"}),t.jsx("h3",{className:s["t-op"],children:"Booking Date"}),t.jsx("h3",{className:`${s["t-op"]}`,children:"Status"}),t.jsx("h3",{className:`${s["t-op"]}`,children:"Booking Value"}),t.jsx("h3",{className:s["t-op"],children:"Details"})]}),t.jsxs("div",{className:s.items,children:[!u&&!h&&(c==null?void 0:c.length)===0&&t.jsx("p",{children:"No bookings found"}),(u||h)&&(c==null?void 0:c.length)===0&&t.jsx(I,{}),c==null?void 0:c.map((e,r)=>t.jsxs("div",{className:`${s.item1} ${s.cursor}`,children:[t.jsx("h3",{className:`${s["t-op-nextlvl"]}`,style:{width:"200px"},children:e.bookingId}),t.jsxs("h3",{className:s["t-op-nextlvl"],children:[t.jsx("span",{style:{color:"green"},children:e.autoAssigned&&"auto"})," ",S(new Date(e==null?void 0:e.bookingDate),"dd-MM-yyyy")]}),t.jsx("h3",{className:`${s["t-op-nextlvl"]} ${s.status} ${e.status==="cancelled"?s.Cancelled:e.status==="completed"?s.Completed:e.status==="alloted"?s.alloted:s.OutOfDelivery}`,children:e.status}),t.jsxs("h3",{className:`${s["t-op-nextlvl"]}`,children:["â‚¹",e.orderValue]}),t.jsx("h3",{className:s["t-op-nextlvl"],children:t.jsx("button",{onClick:()=>y(`/admin/bookings/${e._id}`,{state:e}),className:s.button,children:"View Details"})})]},r))]})]})]})})})};export{W as default};
