import{r as o,_ as S,j as e}from"./index-MFQKCb7o.js";import{c as i,W as J}from"./Wrapper-EuhUHBtD.js";import{R as A}from"./index.esm-CqPrJGFm.js";/* empty css                   */import{u as K}from"./usePatchApiReq-C7rNSsLh.js";import{u as Q}from"./usePostApiReq-D4ZpDEWt.js";import{F as X}from"./index.esm-DwEWRVTp.js";import{u as y,a as Y}from"./index.esm-Df65-zPW.js";import{D as Z}from"./DeleteModal-B67oLNyF.js";import{L as O}from"./Loader-CooIHcb6.js";import{b as R}from"./index.esm-CLNZD255.js";import"./index-Bd6kNE1D.js";import{h as ee}from"./jspdf-html2canvas.min-CS5f29oT.js";import{u as se}from"./useDeleteApiReq-Y_ssn4az.js";import"./logo -C1Nz5jdc.js";import"./useDispatch-DbBSbkF0.js";import"./iconBase-BO1x0Pa9.js";const ne="_wrapper_1s75l_1",te="_modal_1s75l_27",ae="_heading_container_1s75l_47",oe="_form_1s75l_59",ce="_input_container_1s75l_73",le="_input_1s75l_73",ie="_button_wrapper_1s75l_105",de="_button_1s75l_105",p={wrapper:ne,modal:te,heading_container:ae,form:oe,input_container:ce,input:le,button_wrapper:ie,button:de},P=({setIsModalOpen:l,user:s="",getAllUsers:c})=>{const{res:n,fetchData:u,isLoading:r}=Q(),[a,f]=o.useState({name:(s==null?void 0:s.name)||"",phone:(s==null?void 0:s.phone)||"",status:(s==null?void 0:s.status)||!0}),t=m=>{const{name:_,value:v}=m.target;f({...a,[_]:v})},{res:h,fetchData:b}=K(),N=async m=>{if(m.preventDefault(),!a.name||!a.phone||!a.status){alert("alert");return}s?await b(`/admin/update-user/${s._id}`,{...a}):u("/admin/create-user",{...a})};return o.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(S.success("User created successfully"),c(),l(!1))},[n]),o.useEffect(()=>{((h==null?void 0:h.status)===200||(h==null?void 0:h.status)===201)&&(S.success("User updated successfully"),c(),l(!1))},[h]),e.jsx("div",{className:p.wrapper,children:e.jsxs("div",{className:p.modal,children:[e.jsxs("div",{className:p.heading_container,children:[e.jsxs("h4",{children:[s?"Update":"Add"," User"]}),e.jsx("div",{className:p.d_flex,children:e.jsx(A,{onClick:()=>l(!1),cursor:"pointer",size:26})})]}),e.jsxs("form",{onSubmit:N,className:p.form,children:[e.jsxs("div",{className:p.input_container,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{className:p.input,onChange:t,value:a.name,type:"text",name:"name",id:"name"})]}),e.jsxs("div",{className:p.input_container,children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{className:p.input,onChange:t,value:a.phone,type:"number",name:"phone",id:"phone"})]}),e.jsxs("div",{className:p.input_container,children:[e.jsx("label",{htmlFor:"status",children:"Status"}),e.jsxs("select",{onChange:t,value:a.status,className:p.input,name:"status",id:"status",children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"InActive"})]})]}),e.jsx("div",{className:p.button_wrapper,children:e.jsx("button",{className:p.button,children:s?"Update":"Add"})})]})]})})},re="_wrapper_1c8xw_1",pe="_modal_1c8xw_27",he="_heading_container_1c8xw_47",me="_contianer_1c8xw_59",_e="_mt_1c8xw_85",xe="_btn_1c8xw_95",w={wrapper:re,modal:pe,heading_container:he,contianer:me,mt:_e,btn:xe},ue="_wrapper_mlgom_1",je="_modal_mlgom_27",fe="_heading_container_mlgom_47",ge="_form_mlgom_59",be="_input_container_mlgom_73",Ne="_input_mlgom_73",ve="_button_wrapper_mlgom_105",we="_button_mlgom_105",$e="_addresses_container_mlgom_131",ye="_address_mlgom_131",g={wrapper:ue,modal:je,heading_container:fe,form:ge,input_container:be,input:Ne,button_wrapper:ve,button:we,addresses_container:$e,address:ye},Ae=({setIsModalOpen:l,userId:s})=>{const{res:c,fetchData:n,isLoading:u}=y(),[r,a]=o.useState([]),f=async()=>{n(`/admin/get-all-addresses/${s}`)};return o.useEffect(()=>{f()},[]),o.useEffect(()=>{((c==null?void 0:c.status)===200||(c==null?void 0:c.status)===201)&&a(c==null?void 0:c.data.addresses)},[c]),e.jsx("div",{className:g.wrapper,children:e.jsxs("div",{className:g.modal,children:[e.jsxs("div",{className:g.heading_container,children:[e.jsx("h4",{children:"User Addresses"}),e.jsx("div",{className:g.d_flex,children:e.jsx(A,{onClick:()=>l(!1),cursor:"pointer",size:26})})]}),e.jsxs("div",{className:g.addresses_container,children:[!u&&(r==null?void 0:r.length)===0&&e.jsx("p",{children:"No address found"}),u&&(r==null?void 0:r.length)===0&&e.jsx(O,{}),r&&r.map(t=>e.jsx("div",{className:g.address,children:e.jsxs("div",{className:g.partner_left,children:[e.jsxs("p",{children:[e.jsx("b",{children:"Address Line:"})," ",t.addressLine]}),e.jsxs("p",{children:[e.jsx("b",{children:"Landmark:"})," ",t.landmark]}),e.jsxs("p",{children:[e.jsx("b",{children:"City:"})," ",t.city]}),e.jsxs("p",{children:[e.jsx("b",{children:"Pincode:"})," ",t.pincode]}),e.jsxs("p",{children:[e.jsx("b",{children:"Default Address:"})," ",`${t.defaultAddress}`]}),e.jsxs("p",{children:[e.jsx("b",{children:"Co-ordinates:"})," ",`${t.location.coordinates[0]}, ${t.location.coordinates[1]}`]})]})}))]})]})})},Me=({setIsUserInfoModalOpen:l,user:s})=>{console.log(s);const[c,n]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:w.wrapper,children:e.jsxs("div",{className:w.modal,children:[e.jsxs("div",{className:w.heading_container,children:[e.jsx("h4",{children:"User Info"}),e.jsxs("div",{className:w.d_flex,children:[e.jsx("button",{onClick:()=>n(!0),className:w.btn,children:"View all address"}),e.jsx(A,{onClick:()=>l(!1),cursor:"pointer",size:26})]})]}),e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsxs("p",{children:[e.jsx("b",{children:"Name:"})," ",s==null?void 0:s.name]}),e.jsxs("p",{children:[e.jsx("b",{children:"Phone:"})," ",s==null?void 0:s.phone]})]})]})}),c&&e.jsx(Ae,{userId:s._id,setIsModalOpen:n})]})},Ce="_wrapper_ig0nd_1",Ie="_modal_ig0nd_27",De="_heading_container_ig0nd_45",Se="_contianer_ig0nd_61",Oe="_mt_ig0nd_87",Le="_btn_container_ig0nd_95",Ee="_button_ig0nd_109",ke="_table_wrapper_ig0nd_125",Fe="_table_ig0nd_125",j={wrapper:Ce,modal:Ie,heading_container:De,contianer:Se,mt:Oe,btn_container:Le,button:Ee,table_wrapper:ke,table:Fe},Pe=({setIsModalOpen:l})=>{const[s,c]=o.useState([]),{res:n,fetchData:u,isLoading:r}=y(),a=async()=>{u("/admin/get-users-data")};o.useEffect(()=>{a()},[]),o.useEffect(()=>{var t;((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&(console.log("getUsersDataRes",n),c((t=n==null?void 0:n.data)==null?void 0:t.users))},[n]);const f=()=>{ee(document.querySelector("#table"),{jsPDF:{format:"a4"},imageType:"image/jpeg",output:"./pdf/generate.pdf"})};return e.jsx("div",{className:j.wrapper,children:e.jsxs("div",{className:j.modal,children:[e.jsxs("div",{className:j.heading_container,children:[e.jsx("h4",{children:"All Users"}),e.jsx("div",{className:j.d_flex,children:e.jsx(A,{onClick:()=>l(!1),cursor:"pointer",size:26})})]}),!r&&(s==null?void 0:s.length)===0&&e.jsx("p",{style:{padding:"20px"},children:"No users found"}),e.jsx("div",{style:{marginBottom:"20px"},children:r&&(s==null?void 0:s.length)===0&&e.jsx(O,{})}),(s==null?void 0:s.length)>0&&e.jsxs("div",{className:i["report-body"],children:[e.jsx("div",{id:"table",className:j.table_wrapper,children:e.jsxs("table",{border:"2px",className:j.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Locality"})]})}),e.jsx("tbody",{children:s.map((t,h)=>{var b,N,m,_;return e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px",textAlign:"left",paddingInline:"10px"},children:(b=t==null?void 0:t.userInfo)==null?void 0:b.name}),e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:(N=t==null?void 0:t.userInfo)==null?void 0:N.phone}),t!=null&&t.add?e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:`${(m=t==null?void 0:t.add)==null?void 0:m.city}, ${(_=t==null?void 0:t.add)==null?void 0:_.pincode}`}):e.jsx("td",{style:{textAlign:"left",paddingInline:"10px"},children:"No address found."})]},h)})})]})}),e.jsx("div",{className:j.btn_container,children:e.jsx("button",{className:j.button,onClick:f,children:"Download"})})]})]})})},ss=()=>{const{res:l,fetchData:s,isLoading:c}=se(),{res:n,fetchData:u,isLoading:r}=y(),{res:a,fetchData:f,isLoading:t}=y(),[h,b]=o.useState(!1),[N,m]=o.useState(!1),[_,v]=o.useState(!1),[M,C]=o.useState({}),[x,L]=o.useState([]),[E,k]=o.useState(!1),[U,F]=o.useState(!1),$=async()=>{u("/admin/get-all-user")};o.useEffect(()=>{$()},[]),o.useEffect(()=>{((n==null?void 0:n.status)===200||(n==null?void 0:n.status)===201)&&L(n==null?void 0:n.data.data)},[n]);const z=d=>{C(d),m(!_)},q=d=>{C(d),k(!E)},T=d=>{C(d),v(!_)},W=async()=>{s(`/admin/delete-user/${M}`)};o.useEffect(()=>{((l==null?void 0:l.status)===200||(l==null?void 0:l.status)===201)&&(S.success("User deleted successfully"),$(),v(!_))},[l]);const B=async d=>{const I=d.target.value;f(`/admin/search-user?search=${I}`)};o.useEffect(()=>{((a==null?void 0:a.status)===200||(a==null?void 0:a.status)===201)&&L(a==null?void 0:a.data.data)},[a]);function G(d,I){let D=null;return function(H){D&&clearTimeout(D),D=setTimeout(()=>{d(H)},I)}}const V=()=>{F(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsxs("div",{className:i["report-container"],children:[e.jsxs("div",{className:i["report-header"],children:[e.jsx("h1",{className:i["recent-Articles"],children:"Customers"}),e.jsxs("div",{className:i.d_flex,children:[e.jsx("button",{className:i.btn,onClick:V,children:"Download"}),e.jsx("input",{onChange:G(B,1e3),className:i.input,type:"text",placeholder:"Search customers"})]})]}),e.jsxs("div",{className:i["report-body"],children:[e.jsxs("div",{className:i["report-topic-heading"],children:[e.jsx("h3",{className:i["t-op"],children:"User Name"}),e.jsx("h3",{className:i["t-op"],children:"Contact Number"}),e.jsx("h3",{className:i["t-op"],children:"Update/Delete"})]}),e.jsxs("div",{className:i.items,children:[!r&&(x==null?void 0:x.length)===0&&e.jsx("p",{children:"No users found"}),r&&(x==null?void 0:x.length)===0&&e.jsx(O,{}),x==null?void 0:x.map(d=>e.jsxs("div",{className:i.item1,children:[e.jsx("h3",{className:i["t-op-nextlvl"],children:d.name}),e.jsx("h3",{className:i["t-op-nextlvl"],children:d.phone}),e.jsxs("h3",{className:`${i["t-op-nextlvl"]}`,children:[e.jsx(R,{onClick:()=>q(d),cursor:"pointer",size:20}),e.jsx(X,{onClick:()=>z(d),cursor:"pointer",className:"ml-2",size:20}),e.jsx(Y,{onClick:()=>T(d._id),cursor:"pointer",size:22,color:"red"})]})]},d._id))]})]})]})}),E&&e.jsx(Me,{setIsUserInfoModalOpen:k,user:M}),h&&e.jsx(P,{setIsModalOpen:b,getAllUsers:$}),N&&e.jsx(P,{setIsModalOpen:m,user:M,getAllUsers:$}),_&&e.jsx(Z,{setState:v,handleDelete:W}),U&&e.jsx(Pe,{setIsModalOpen:F})]})};export{ss as default};
