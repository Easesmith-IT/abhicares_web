import{r,j as s,f as p,e as x,h as j}from"./index-C00j65eE.js";import{e as v}from"./LogoutModal-BFEBZfWM.js";import{I as u}from"./InvoiceModal-BgqP7gOj.js";import{f as b}from"./index-CwLm7xHs.js";import{L as y}from"./Loader-Bg91KXBw.js";import{W as k}from"./WebsiteWrapper-DPwAgfCs.js";import"./iconBase-DBedV832.js";import"./index.esm-B5E25rFw.js";import"./jspdf-html2canvas.min-BkrYz3l5.js";import"./index-Wjobe2wE.js";import"./rolling-white-BBE_8u84.js";import"./Button-DUNLdeQj.js";import"./index.esm-D4599Q37.js";const N="_my_bookings_1y6ji_1",w="_img_1y6ji_15",I="_table_1y6ji_31",$="_bookings_container_1y6ji_73",f={my_bookings:N,img:w,table:I,bookings_container:$},M="_order_37wz4_1",z="_order_top_37wz4_19",O="_img_37wz4_49",C="_info_37wz4_63",S="_info_row_37wz4_71",E="_order_bottom_37wz4_93",U="_progress_37wz4_107",A="_d_flex_37wz4_147",B="_p_37wz4_107",_={order:M,order_top:z,img:O,info:C,info_row:S,order_bottom:E,progress:U,d_flex:A,p:B},D="_modal_overlay_h3fvf_1",L="_modal_h3fvf_1",V="_heading_container_h3fvf_49",W="_button_h3fvf_61",q="_p_container_h3fvf_81",F="_progress_h3fvf_89",P="_d_flex_h3fvf_131",Q="_product_contaner_h3fvf_141",R="_product_h3fvf_141",T="_img_h3fvf_173",G="_info_h3fvf_183",H="_p_h3fvf_81",i={modal_overlay:D,modal:L,heading_container:V,button:W,p_container:q,progress:F,d_flex:P,product_contaner:Q,product:R,img:T,info:G,p:H},J=({setIsInfoModalOpen:o,order:t})=>{var a;console.log(t._id);const[d,h]=r.useState({}),[c,l]=r.useState(!1),n=async()=>{try{const{data:e}=await p.get(`https://abhicares.com/api/shopping/get-product-invoice/${t._id}`,{withCredentials:!0});console.log("invoice",e),h(e.data)}catch(e){console.log(e)}};return r.useEffect(()=>{n()},[]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:i.modal_overlay,children:s.jsxs("div",{className:i.modal,children:[s.jsxs("div",{className:i.heading_container,children:[s.jsx("h2",{children:"Booking Info"}),s.jsx(v,{onClick:()=>o(!1),size:22,cursor:"pointer"})]}),s.jsxs("div",{className:i.heading_container,children:[s.jsx("h3",{children:"Order1"}),s.jsx("button",{onClick:()=>l(!0),className:i.button,children:"View Invoice"})]}),s.jsx("div",{className:i.p_container,children:s.jsx("p",{className:i.qty,children:"Qty: 1"})}),s.jsx("h3",{children:"Products"}),s.jsx("div",{className:i.product_contaner,children:(a=t==null?void 0:t.products)==null?void 0:a.map(e=>{var g,m;return s.jsxs("div",{className:i.product,children:[s.jsx("img",{className:i.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${e.product.imageUrl[0]}`,alt:""}),s.jsxs("div",{className:i.info,children:[s.jsx("h4",{children:(g=e==null?void 0:e.product)==null?void 0:g.name}),s.jsxs("p",{children:["Qty: ",e==null?void 0:e.quantity]}),s.jsxs("p",{children:["₹",(m=e==null?void 0:e.product)==null?void 0:m.offerPrice]})]})]},e._id)})}),s.jsx("h4",{children:"Track Order"}),s.jsxs("div",{children:[s.jsx("div",{className:i.progress}),s.jsxs("div",{className:i.d_flex,children:[s.jsx("p",{}),s.jsx("p",{children:"Out for delivary"}),s.jsx("p",{children:"Delivered"})]})]}),s.jsx("hr",{})]})}),c&&s.jsx(u,{setIsInvoiceModalOpen:l})]})},K=({order:o,index:t})=>{console.log("single order",o);const d=x(),[h,c]=r.useState(!1),l=()=>{d(`/my_bookings/${o._id}`,{state:o}),c(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{onClick:l,className:_.order,children:[s.jsxs("div",{className:_.order_top,children:[s.jsx("div",{children:o.items.map((n,a)=>{var e,g,m;return s.jsx("img",{className:_.img,src:`https://storage.googleapis.com/abhicares-backend-bucket/${(e=n==null?void 0:n.product)!=null&&e.imageUrl[0]?(g=n==null?void 0:n.product)==null?void 0:g.imageUrl[0]:(m=n==null?void 0:n.package)==null?void 0:m.imageUrl[0]}`,alt:""},a)})}),s.jsxs("div",{className:_.info,children:[s.jsxs("p",{style:{color:"grey"},children:["#",o.orderId]}),s.jsxs("div",{className:_.info_row,children:[s.jsxs("p",{children:["Date : ",b(new Date(o.createdAt),"dd-MM-yyyy")]}),s.jsxs("p",{children:["Order Value : ₹",o.orderValue]})]})]})]}),s.jsx("hr",{}),s.jsxs("div",{className:_.order_bottom,children:[s.jsx("p",{children:"Order Status :"}),s.jsx("div",{children:o==null?void 0:o.status})]})]}),h&&s.jsx(J,{setIsInfoModalOpen:c,order:o})]})},_s=()=>{const[o,t]=r.useState([]),[d,h]=r.useState(!0);x();const c=j("userInfo"),l=c==null?void 0:c.id,n=async()=>{try{const{data:a}=await p.get(`https://abhicares.com/api/shopping/get-user-orders?userId=${l}`,{withCredentials:!0});console.log(a),t(a.data)}catch(a){console.log(a)}finally{h(!1)}};return r.useEffect(()=>{n()},[]),s.jsx(k,{children:s.jsxs("section",{className:f.my_bookings,children:[s.jsx("h1",{children:"MyBookings"}),!d&&(o==null?void 0:o.length)===0&&s.jsx("p",{children:"No bookings found"}),d&&(o==null?void 0:o.length)===0&&s.jsx(y,{}),s.jsx("div",{className:f.bookings_container,children:o==null?void 0:o.map((a,e)=>s.jsx(K,{index:e,order:a},a._id))})]})})};export{_s as default};
